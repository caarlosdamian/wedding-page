const vS=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};vS();var Jc={},Oy={exports:{}},Ct={},Y={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),wS=Symbol.for("react.portal"),ES=Symbol.for("react.fragment"),SS=Symbol.for("react.strict_mode"),IS=Symbol.for("react.profiler"),TS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),_S=Symbol.for("react.forward_ref"),kS=Symbol.for("react.suspense"),CS=Symbol.for("react.memo"),AS=Symbol.for("react.lazy"),Gp=Symbol.iterator;function NS(t){return t===null||typeof t!="object"?null:(t=Gp&&t[Gp]||t["@@iterator"],typeof t=="function"?t:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},My=Object.assign,Fy={};function os(t,e,n){this.props=t,this.context=e,this.refs=Fy,this.updater=n||Ly}os.prototype.isReactComponent={};os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vy(){}Vy.prototype=os.prototype;function _d(t,e,n){this.props=t,this.context=e,this.refs=Fy,this.updater=n||Ly}var kd=_d.prototype=new Vy;kd.constructor=_d;My(kd,os.prototype);kd.isPureReactComponent=!0;var Hp=Array.isArray,By=Object.prototype.hasOwnProperty,Cd={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)By.call(e,r)&&!Uy.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Go,type:t,key:s,ref:o,props:i,_owner:Cd.current}}function DS(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function bS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qp=/\/+/g;function uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bS(""+t.key):e.toString(36)}function Qa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Go:case wS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+uc(o,0):r,Hp(i)?(n="",t!=null&&(n=t.replace(Qp,"$&/")+"/"),Qa(i,e,n,"",function(l){return l})):i!=null&&(Ad(i)&&(i=DS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Hp(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+uc(s,a);o+=Qa(s,e,n,u,i)}else if(u=NS(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+uc(s,a++),o+=Qa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],i=0;return Qa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $S(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},Wa={transition:null},RS={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:Cd};q.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!Ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=os;q.Fragment=ES;q.Profiler=IS;q.PureComponent=_d;q.StrictMode=SS;q.Suspense=kS;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RS;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=My({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Cd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)By.call(e,u)&&!Uy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Go,type:t.type,key:i,ref:s,props:r,_owner:o}};q.createContext=function(t){return t={$$typeof:xS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TS,_context:t},t.Consumer=t};q.createElement=zy;q.createFactory=function(t){var e=zy.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:_S,render:t}};q.isValidElement=Ad;q.lazy=function(t){return{$$typeof:AS,_payload:{_status:-1,_result:t},_init:$S}};q.memo=function(t,e){return{$$typeof:CS,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};q.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};q.useCallback=function(t,e){return ut.current.useCallback(t,e)};q.useContext=function(t){return ut.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};q.useEffect=function(t,e){return ut.current.useEffect(t,e)};q.useId=function(){return ut.current.useId()};q.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return ut.current.useMemo(t,e)};q.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};q.useRef=function(t){return ut.current.useRef(t)};q.useState=function(t){return ut.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return ut.current.useTransition()};q.version="18.2.0";Y.exports=q;var jy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,z){var j=P.length;P.push(z);e:for(;0<j;){var ye=j-1>>>1,Ae=P[ye];if(0<i(Ae,z))P[ye]=z,P[j]=Ae,j=ye;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],j=P.pop();if(j!==z){P[0]=j;e:for(var ye=0,Ae=P.length,wa=Ae>>>1;ye<wa;){var fr=2*(ye+1)-1,ac=P[fr],pr=fr+1,Ea=P[pr];if(0>i(ac,j))pr<Ae&&0>i(Ea,ac)?(P[ye]=Ea,P[pr]=j,ye=pr):(P[ye]=ac,P[fr]=j,ye=fr);else if(pr<Ae&&0>i(Ea,j))P[ye]=Ea,P[pr]=j,ye=pr;else break e}}return z}function i(P,z){var j=P.sortIndex-z.sortIndex;return j!==0?j:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,h=null,d=3,p=!1,y=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var z=n(l);z!==null;){if(z.callback===null)r(l);else if(z.startTime<=P)r(l),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(l)}}function S(P){if(E=!1,g(P),!y)if(n(u)!==null)y=!0,sc(_);else{var z=n(l);z!==null&&oc(S,z.startTime-P)}}function _(P,z){y=!1,E&&(E=!1,m(O),O=-1),p=!0;var j=d;try{for(g(z),h=n(u);h!==null&&(!(h.expirationTime>z)||P&&!Lt());){var ye=h.callback;if(typeof ye=="function"){h.callback=null,d=h.priorityLevel;var Ae=ye(h.expirationTime<=z);z=t.unstable_now(),typeof Ae=="function"?h.callback=Ae:h===n(u)&&r(u),g(z)}else r(u);h=n(u)}if(h!==null)var wa=!0;else{var fr=n(l);fr!==null&&oc(S,fr.startTime-z),wa=!1}return wa}finally{h=null,d=j,p=!1}}var C=!1,D=null,O=-1,ge=5,K=-1;function Lt(){return!(t.unstable_now()-K<ge)}function Es(){if(D!==null){var P=t.unstable_now();K=P;var z=!0;try{z=D(!0,P)}finally{z?Ss():(C=!1,D=null)}}else C=!1}var Ss;if(typeof f=="function")Ss=function(){f(Es)};else if(typeof MessageChannel!="undefined"){var Kp=new MessageChannel,yS=Kp.port2;Kp.port1.onmessage=Es,Ss=function(){yS.postMessage(null)}}else Ss=function(){k(Es,0)};function sc(P){D=P,C||(C=!0,Ss())}function oc(P,z){O=k(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,sc(_))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(P){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var j=d;d=z;try{return P()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=d;d=P;try{return z()}finally{d=j}},t.unstable_scheduleCallback=function(P,z,j){var ye=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ye+j:ye):j=ye,P){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=j+Ae,P={id:c++,callback:z,priorityLevel:P,startTime:j,expirationTime:Ae,sortIndex:-1},j>ye?(P.sortIndex=j,e(l,P),n(u)===null&&P===n(l)&&(E?(m(O),O=-1):E=!0,oc(S,j-ye))):(P.sortIndex=Ae,e(u,P),y||p||(y=!0,sc(_))),P},t.unstable_shouldYield=Lt,t.unstable_wrapCallback=function(P){var z=d;return function(){var j=d;d=z;try{return P.apply(this,arguments)}finally{d=j}}}})(qy);jy.exports=qy;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=Y.exports,xt=jy.exports;function x(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gy=new Set,ao={};function ri(t,e){Bi(t,e),Bi(t+"Capture",e)}function Bi(t,e){for(ao[t]=e,t=0;t<e.length;t++)Gy.add(e[t])}var cn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Zc=Object.prototype.hasOwnProperty,PS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wp={},Xp={};function OS(t){return Zc.call(Xp,t)?!0:Zc.call(Wp,t)?!1:PS.test(t)?Xp[t]=!0:(Wp[t]=!0,!1)}function LS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MS(t,e,n,r){if(e===null||typeof e=="undefined"||LS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nd=/[\-:]([a-z])/g;function Dd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nd,Dd);Ge[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nd,Dd);Ge[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nd,Dd);Ge[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function bd(t,e,n,r){var i=Ge.hasOwnProperty(e)?Ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MS(e,n,i,r)&&(n=null),r||i===null?OS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=Ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),Hy=Symbol.for("react.provider"),Qy=Symbol.for("react.context"),Rd=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),nh=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),Wy=Symbol.for("react.offscreen"),Yp=Symbol.iterator;function Is(t){return t===null||typeof t!="object"?null:(t=Yp&&t[Yp]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,lc;function Ms(t){if(lc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lc=e&&e[1]||""}return`
`+lc+t}var cc=!1;function hc(t,e){if(!t||cc)return"";cc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{cc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ms(t):""}function FS(t){switch(t.tag){case 5:return Ms(t.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return t=hc(t.type,!1),t;case 11:return t=hc(t.type.render,!1),t;case 1:return t=hc(t.type,!0),t;default:return""}}function rh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case eh:return"Profiler";case $d:return"StrictMode";case th:return"Suspense";case nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qy:return(t.displayName||"Context")+".Consumer";case Hy:return(t._context.displayName||"Context")+".Provider";case Rd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pd:return e=t.displayName||null,e!==null?e:rh(t.type)||"Memo";case _n:e=t._payload,t=t._init;try{return rh(t(e))}catch{}}return null}function VS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rh(e);case 8:return e===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BS(t){var e=Xy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ta(t){t._valueTracker||(t._valueTracker=BS(t))}function Yy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mu(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function ih(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Jp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jy(t,e){e=e.checked,e!=null&&bd(t,"checked",e,!1)}function sh(t,e){Jy(t,e);var n=Gn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&oh(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oh(t,e,n){(e!=="number"||mu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fs=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(x(92));if(Fs(n)){if(1<n.length)throw Error(x(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function Zy(t,e){var n=Gn(e.value),r=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ev(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ev(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xa,tv=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},US=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){US.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function nv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function rv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zS=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(t,e){if(e){if(zS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hh=null;function Od(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dh=null,$i=null,Ri=null;function nm(t){if(t=Wo(t)){if(typeof dh!="function")throw Error(x(280));var e=t.stateNode;e&&(e=pl(e),dh(t.stateNode,t.type,e))}}function iv(t){$i?Ri?Ri.push(t):Ri=[t]:$i=t}function sv(){if($i){var t=$i,e=Ri;if(Ri=$i=null,nm(t),e)for(t=0;t<e.length;t++)nm(e[t])}}function ov(t,e){return t(e)}function av(){}var dc=!1;function uv(t,e,n){if(dc)return t(e,n);dc=!0;try{return ov(t,e,n)}finally{dc=!1,($i!==null||Ri!==null)&&(av(),sv())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(x(231,e,typeof n));return n}var fh=!1;if(cn)try{var Ts={};Object.defineProperty(Ts,"passive",{get:function(){fh=!0}}),window.addEventListener("test",Ts,Ts),window.removeEventListener("test",Ts,Ts)}catch{fh=!1}function jS(t,e,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Ks=!1,gu=null,yu=!1,ph=null,qS={onError:function(t){Ks=!0,gu=t}};function KS(t,e,n,r,i,s,o,a,u){Ks=!1,gu=null,jS.apply(qS,arguments)}function GS(t,e,n,r,i,s,o,a,u){if(KS.apply(this,arguments),Ks){if(Ks){var l=gu;Ks=!1,gu=null}else throw Error(x(198));yu||(yu=!0,ph=l)}}function ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rm(t){if(ii(t)!==t)throw Error(x(188))}function HS(t){var e=t.alternate;if(!e){if(e=ii(t),e===null)throw Error(x(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rm(i),t;if(s===r)return rm(i),e;s=s.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?t:e}function cv(t){return t=HS(t),t!==null?hv(t):null}function hv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hv(t);if(e!==null)return e;t=t.sibling}return null}var dv=xt.unstable_scheduleCallback,im=xt.unstable_cancelCallback,QS=xt.unstable_shouldYield,WS=xt.unstable_requestPaint,ve=xt.unstable_now,XS=xt.unstable_getCurrentPriorityLevel,Ld=xt.unstable_ImmediatePriority,fv=xt.unstable_UserBlockingPriority,vu=xt.unstable_NormalPriority,YS=xt.unstable_LowPriority,pv=xt.unstable_IdlePriority,cl=null,Xt=null;function JS(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:tI,ZS=Math.log,eI=Math.LN2;function tI(t){return t>>>=0,t===0?32:31-(ZS(t)/eI|0)|0}var _a=64,ka=4194304;function Vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Vs(a):(s&=o,s!==0&&(r=Vs(s)))}else o=n&~i,o!==0?r=Vs(o):s!==0&&(r=Vs(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),i=1<<n,r|=t[n],e&=~i;return r}function nI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zt(s),a=1<<o,u=i[o];u===-1?((a&n)===0||(a&r)!==0)&&(i[o]=nI(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mv(){var t=_a;return _a<<=1,(_a&4194240)===0&&(_a=64),t}function fc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function iI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Md(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var J=0;function gv(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var yv,Fd,vv,wv,Ev,gh=!1,Ca=[],On=null,Ln=null,Mn=null,co=new Map,ho=new Map,Cn=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sm(t,e){switch(t){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":co.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ho.delete(e.pointerId)}}function xs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wo(e),e!==null&&Fd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oI(t,e,n,r,i){switch(e){case"focusin":return On=xs(On,t,e,n,r,i),!0;case"dragenter":return Ln=xs(Ln,t,e,n,r,i),!0;case"mouseover":return Mn=xs(Mn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return co.set(s,xs(co.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ho.set(s,xs(ho.get(s)||null,t,e,n,r,i)),!0}return!1}function Sv(t){var e=kr(t.target);if(e!==null){var n=ii(e);if(n!==null){if(e=n.tag,e===13){if(e=lv(n),e!==null){t.blockedOn=e,Ev(t.priority,function(){vv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hh=r,n.target.dispatchEvent(r),hh=null}else return e=Wo(n),e!==null&&Fd(e),t.blockedOn=n,!1;e.shift()}return!0}function om(t,e,n){Xa(t)&&n.delete(e)}function aI(){gh=!1,On!==null&&Xa(On)&&(On=null),Ln!==null&&Xa(Ln)&&(Ln=null),Mn!==null&&Xa(Mn)&&(Mn=null),co.forEach(om),ho.forEach(om)}function _s(t,e){t.blockedOn===e&&(t.blockedOn=null,gh||(gh=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,aI)))}function fo(t){function e(i){return _s(i,t)}if(0<Ca.length){_s(Ca[0],t);for(var n=1;n<Ca.length;n++){var r=Ca[n];r.blockedOn===t&&(r.blockedOn=null)}}for(On!==null&&_s(On,t),Ln!==null&&_s(Ln,t),Mn!==null&&_s(Mn,t),co.forEach(e),ho.forEach(e),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)Sv(n),n.blockedOn===null&&Cn.shift()}var Pi=vn.ReactCurrentBatchConfig,Eu=!0;function uI(t,e,n,r){var i=J,s=Pi.transition;Pi.transition=null;try{J=1,Vd(t,e,n,r)}finally{J=i,Pi.transition=s}}function lI(t,e,n,r){var i=J,s=Pi.transition;Pi.transition=null;try{J=4,Vd(t,e,n,r)}finally{J=i,Pi.transition=s}}function Vd(t,e,n,r){if(Eu){var i=yh(t,e,n,r);if(i===null)Tc(t,e,r,Su,n),sm(t,r);else if(oI(i,t,e,n,r))r.stopPropagation();else if(sm(t,r),e&4&&-1<sI.indexOf(t)){for(;i!==null;){var s=Wo(i);if(s!==null&&yv(s),s=yh(t,e,n,r),s===null&&Tc(t,e,r,Su,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tc(t,e,r,null,n)}}var Su=null;function yh(t,e,n,r){if(Su=null,t=Od(r),t=kr(t),t!==null)if(e=ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Su=t,null}function Iv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XS()){case Ld:return 1;case fv:return 4;case vu:case YS:return 16;case pv:return 536870912;default:return 16}default:return 16}}var $n=null,Bd=null,Ya=null;function Tv(){if(Ya)return Ya;var t,e=Bd,n=e.length,r,i="value"in $n?$n.value:$n.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ya=i.slice(t,1<r?1-r:void 0)}function Ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function am(){return!1}function At(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Aa:am,this.isPropagationStopped=am,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=At(as),Qo=he({},as,{view:0,detail:0}),cI=At(Qo),pc,mc,ks,hl=he({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ks&&(ks&&t.type==="mousemove"?(pc=t.screenX-ks.screenX,mc=t.screenY-ks.screenY):mc=pc=0,ks=t),pc)},movementY:function(t){return"movementY"in t?t.movementY:mc}}),um=At(hl),hI=he({},hl,{dataTransfer:0}),dI=At(hI),fI=he({},Qo,{relatedTarget:0}),gc=At(fI),pI=he({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),mI=At(pI),gI=he({},as,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yI=At(gI),vI=he({},as,{data:0}),lm=At(vI),wI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function II(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SI[t])?!!e[t]:!1}function zd(){return II}var TI=he({},Qo,{key:function(t){if(t.key){var e=wI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xI=At(TI),_I=he({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=At(_I),kI=he({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),CI=At(kI),AI=he({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),NI=At(AI),DI=he({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bI=At(DI),$I=[9,13,27,32],jd=cn&&"CompositionEvent"in window,Gs=null;cn&&"documentMode"in document&&(Gs=document.documentMode);var RI=cn&&"TextEvent"in window&&!Gs,xv=cn&&(!jd||Gs&&8<Gs&&11>=Gs),hm=String.fromCharCode(32),dm=!1;function _v(t,e){switch(t){case"keyup":return $I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wi=!1;function PI(t,e){switch(t){case"compositionend":return kv(e);case"keypress":return e.which!==32?null:(dm=!0,hm);case"textInput":return t=e.data,t===hm&&dm?null:t;default:return null}}function OI(t,e){if(wi)return t==="compositionend"||!jd&&_v(t,e)?(t=Tv(),Ya=Bd=$n=null,wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xv&&e.locale!=="ko"?null:e.data;default:return null}}var LI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LI[t.type]:e==="textarea"}function Cv(t,e,n,r){iv(r),e=Iu(e,"onChange"),0<e.length&&(n=new Ud("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hs=null,po=null;function MI(t){Fv(t,0)}function dl(t){var e=Ii(t);if(Yy(e))return t}function FI(t,e){if(t==="change")return e}var Av=!1;if(cn){var yc;if(cn){var vc="oninput"in document;if(!vc){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),vc=typeof pm.oninput=="function"}yc=vc}else yc=!1;Av=yc&&(!document.documentMode||9<document.documentMode)}function mm(){Hs&&(Hs.detachEvent("onpropertychange",Nv),po=Hs=null)}function Nv(t){if(t.propertyName==="value"&&dl(po)){var e=[];Cv(e,po,t,Od(t)),uv(MI,e)}}function VI(t,e,n){t==="focusin"?(mm(),Hs=e,po=n,Hs.attachEvent("onpropertychange",Nv)):t==="focusout"&&mm()}function BI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(po)}function UI(t,e){if(t==="click")return dl(e)}function zI(t,e){if(t==="input"||t==="change")return dl(e)}function jI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:jI;function mo(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zc.call(e,i)||!qt(t[i],e[i]))return!1}return!0}function gm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ym(t,e){var n=gm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gm(n)}}function Dv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bv(){for(var t=window,e=mu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mu(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qI(t){var e=bv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dv(n.ownerDocument.documentElement,n)){if(r!==null&&qd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ym(n,s);var o=ym(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KI=cn&&"documentMode"in document&&11>=document.documentMode,Ei=null,vh=null,Qs=null,wh=!1;function vm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wh||Ei==null||Ei!==mu(r)||(r=Ei,"selectionStart"in r&&qd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qs&&mo(Qs,r)||(Qs=r,r=Iu(vh,"onSelect"),0<r.length&&(e=new Ud("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ei)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},wc={},$v={};cn&&($v=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function fl(t){if(wc[t])return wc[t];if(!Si[t])return t;var e=Si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $v)return wc[t]=e[n];return t}var Rv=fl("animationend"),Pv=fl("animationiteration"),Ov=fl("animationstart"),Lv=fl("transitionend"),Mv=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){Mv.set(t,e),ri(e,[t])}for(var Ec=0;Ec<wm.length;Ec++){var Sc=wm[Ec],GI=Sc.toLowerCase(),HI=Sc[0].toUpperCase()+Sc.slice(1);rr(GI,"on"+HI)}rr(Rv,"onAnimationEnd");rr(Pv,"onAnimationIteration");rr(Ov,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Lv,"onTransitionEnd");Bi("onMouseEnter",["mouseout","mouseover"]);Bi("onMouseLeave",["mouseout","mouseover"]);Bi("onPointerEnter",["pointerout","pointerover"]);Bi("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Em(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GS(r,e,void 0,t),t.currentTarget=null}function Fv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Em(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Em(i,a,l),s=u}}}if(yu)throw t=ph,yu=!1,ph=null,t}function ne(t,e){var n=e[xh];n===void 0&&(n=e[xh]=new Set);var r=t+"__bubble";n.has(r)||(Vv(e,t,2,!1),n.add(r))}function Ic(t,e,n){var r=0;e&&(r|=4),Vv(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function go(t){if(!t[Da]){t[Da]=!0,Gy.forEach(function(n){n!=="selectionchange"&&(QI.has(n)||Ic(n,!1,t),Ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Ic("selectionchange",!1,e))}}function Vv(t,e,n,r){switch(Iv(e)){case 1:var i=uI;break;case 4:i=lI;break;default:i=Vd}n=i.bind(null,e,n,t),i=void 0,!fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tc(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=kr(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uv(function(){var l=s,c=Od(n),h=[];e:{var d=Mv.get(t);if(d!==void 0){var p=Ud,y=t;switch(t){case"keypress":if(Ja(n)===0)break e;case"keydown":case"keyup":p=xI;break;case"focusin":y="focus",p=gc;break;case"focusout":y="blur",p=gc;break;case"beforeblur":case"afterblur":p=gc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=CI;break;case Rv:case Pv:case Ov:p=mI;break;case Lv:p=NI;break;case"scroll":p=cI;break;case"wheel":p=bI;break;case"copy":case"cut":case"paste":p=yI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cm}var E=(e&4)!==0,k=!E&&t==="scroll",m=E?d!==null?d+"Capture":null:d;E=[];for(var f=l,g;f!==null;){g=f;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,m!==null&&(S=lo(f,m),S!=null&&E.push(yo(f,S,g)))),k)break;f=f.return}0<E.length&&(d=new p(d,y,null,n,c),h.push({event:d,listeners:E}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==hh&&(y=n.relatedTarget||n.fromElement)&&(kr(y)||y[hn]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=l,y=y?kr(y):null,y!==null&&(k=ii(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=l),p!==y)){if(E=um,S="onMouseLeave",m="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(E=cm,S="onPointerLeave",m="onPointerEnter",f="pointer"),k=p==null?d:Ii(p),g=y==null?d:Ii(y),d=new E(S,f+"leave",p,n,c),d.target=k,d.relatedTarget=g,S=null,kr(c)===l&&(E=new E(m,f+"enter",y,n,c),E.target=g,E.relatedTarget=k,S=E),k=S,p&&y)t:{for(E=p,m=y,f=0,g=E;g;g=di(g))f++;for(g=0,S=m;S;S=di(S))g++;for(;0<f-g;)E=di(E),f--;for(;0<g-f;)m=di(m),g--;for(;f--;){if(E===m||m!==null&&E===m.alternate)break t;E=di(E),m=di(m)}E=null}else E=null;p!==null&&Sm(h,d,p,E,!1),y!==null&&k!==null&&Sm(h,k,y,E,!0)}}e:{if(d=l?Ii(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var _=FI;else if(fm(d))if(Av)_=zI;else{_=BI;var C=VI}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=UI);if(_&&(_=_(t,l))){Cv(h,_,n,c);break e}C&&C(t,d,l),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&oh(d,"number",d.value)}switch(C=l?Ii(l):window,t){case"focusin":(fm(C)||C.contentEditable==="true")&&(Ei=C,vh=l,Qs=null);break;case"focusout":Qs=vh=Ei=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,vm(h,n,c);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":vm(h,n,c)}var D;if(jd)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else wi?_v(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(xv&&n.locale!=="ko"&&(wi||O!=="onCompositionStart"?O==="onCompositionEnd"&&wi&&(D=Tv()):($n=c,Bd="value"in $n?$n.value:$n.textContent,wi=!0)),C=Iu(l,O),0<C.length&&(O=new lm(O,t,null,n,c),h.push({event:O,listeners:C}),D?O.data=D:(D=kv(n),D!==null&&(O.data=D)))),(D=RI?PI(t,n):OI(t,n))&&(l=Iu(l,"onBeforeInput"),0<l.length&&(c=new lm("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:l}),c.data=D))}Fv(h,e)})}function yo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Iu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=lo(t,n),s!=null&&r.unshift(yo(t,s,i)),s=lo(t,e),s!=null&&r.push(yo(t,s,i))),t=t.return}return r}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=lo(n,s),u!=null&&o.unshift(yo(n,u,a))):i||(u=lo(n,s),u!=null&&o.push(yo(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var WI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function Im(t){return(typeof t=="string"?t:""+t).replace(WI,`
`).replace(XI,"")}function ba(t,e,n){if(e=Im(e),Im(t)!==e&&n)throw Error(x(425))}function Tu(){}var Eh=null,Sh=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Th=typeof setTimeout=="function"?setTimeout:void 0,YI=typeof clearTimeout=="function"?clearTimeout:void 0,Tm=typeof Promise=="function"?Promise:void 0,JI=typeof queueMicrotask=="function"?queueMicrotask:typeof Tm!="undefined"?function(t){return Tm.resolve(null).then(t).catch(ZI)}:Th;function ZI(t){setTimeout(function(){throw t})}function xc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fo(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),Ht="__reactFiber$"+us,vo="__reactProps$"+us,hn="__reactContainer$"+us,xh="__reactEvents$"+us,eT="__reactListeners$"+us,tT="__reactHandles$"+us;function kr(t){var e=t[Ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[Ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xm(t);t!==null;){if(n=t[Ht])return n;t=xm(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[Ht]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function pl(t){return t[vo]||null}var _h=[],Ti=-1;function ir(t){return{current:t}}function re(t){0>Ti||(t.current=_h[Ti],_h[Ti]=null,Ti--)}function te(t,e){Ti++,_h[Ti]=t.current,t.current=e}var Hn={},Je=ir(Hn),mt=ir(!1),Lr=Hn;function Ui(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gt(t){return t=t.childContextTypes,t!=null}function xu(){re(mt),re(Je)}function _m(t,e,n){if(Je.current!==Hn)throw Error(x(168));te(Je,e),te(mt,n)}function Bv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,VS(t)||"Unknown",i));return he({},n,r)}function _u(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,Lr=Je.current,te(Je,t),te(mt,mt.current),!0}function km(t,e,n){var r=t.stateNode;if(!r)throw Error(x(169));n?(t=Bv(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,re(mt),re(Je),te(Je,t)):re(mt),te(mt,n)}var sn=null,ml=!1,_c=!1;function Uv(t){sn===null?sn=[t]:sn.push(t)}function nT(t){ml=!0,Uv(t)}function sr(){if(!_c&&sn!==null){_c=!0;var t=0,e=J;try{var n=sn;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sn=null,ml=!1}catch(i){throw sn!==null&&(sn=sn.slice(t+1)),dv(Ld,sr),i}finally{J=e,_c=!1}}return null}var xi=[],_i=0,ku=null,Cu=0,Nt=[],Dt=0,Mr=null,on=1,an="";function yr(t,e){xi[_i++]=Cu,xi[_i++]=ku,ku=t,Cu=e}function zv(t,e,n){Nt[Dt++]=on,Nt[Dt++]=an,Nt[Dt++]=Mr,Mr=t;var r=on;t=an;var i=32-zt(r)-1;r&=~(1<<i),n+=1;var s=32-zt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,on=1<<32-zt(e)+i|n<<i|r,an=s+t}else on=1<<s|n<<i|r,an=t}function Kd(t){t.return!==null&&(yr(t,1),zv(t,1,0))}function Gd(t){for(;t===ku;)ku=xi[--_i],xi[_i]=null,Cu=xi[--_i],xi[_i]=null;for(;t===Mr;)Mr=Nt[--Dt],Nt[Dt]=null,an=Nt[--Dt],Nt[Dt]=null,on=Nt[--Dt],Nt[Dt]=null}var It=null,Et=null,se=!1,Bt=null;function jv(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Et=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mr!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Et=null,!0):!1;default:return!1}}function kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ch(t){if(se){var e=Et;if(e){var n=e;if(!Cm(t,e)){if(kh(t))throw Error(x(418));e=Fn(n.nextSibling);var r=It;e&&Cm(t,e)?jv(r,n):(t.flags=t.flags&-4097|2,se=!1,It=t)}}else{if(kh(t))throw Error(x(418));t.flags=t.flags&-4097|2,se=!1,It=t}}}function Am(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function $a(t){if(t!==It)return!1;if(!se)return Am(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=Et)){if(kh(t))throw qv(),Error(x(418));for(;e;)jv(t,e),e=Fn(e.nextSibling)}if(Am(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=It?Fn(t.stateNode.nextSibling):null;return!0}function qv(){for(var t=Et;t;)t=Fn(t.nextSibling)}function zi(){Et=It=null,se=!1}function Hd(t){Bt===null?Bt=[t]:Bt.push(t)}var rT=vn.ReactCurrentBatchConfig;function Ft(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Au=ir(null),Nu=null,ki=null,Qd=null;function Wd(){Qd=ki=Nu=null}function Xd(t){var e=Au.current;re(Au),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oi(t,e){Nu=t,Qd=ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(dt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},ki===null){if(Nu===null)throw Error(x(308));ki=t,Nu.dependencies={lanes:0,firstContext:t}}else ki=ki.next=t;return e}var Cr=null;function Yd(t){Cr===null?Cr=[t]:Cr.push(t)}function Kv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yd(e)):(n.next=i.next,i.next=n),e.interleaved=n,dn(t,r)}function dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Q&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dn(t,n)}return i=r.interleaved,i===null?(e.next=e,Yd(r)):(e.next=i.next,i.next=e),r.interleaved=e,dn(t,n)}function Za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Md(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Du(t,e,n,r){var i=t.updateQueue;kn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(d=e,p=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){h=y.call(p,h,d);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,d=typeof y=="function"?y.call(p,h,d):y,d==null)break e;h=he({},h,d);break e;case 2:kn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=p,u=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=h}}function Dm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var Hv=new Ky.Component().refs;function Nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gl={isMounted:function(t){return(t=t._reactInternals)?ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),i=Un(t),s=ln(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vn(t,s,i),e!==null&&(jt(e,t,i,r),Za(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),i=Un(t),s=ln(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vn(t,s,i),e!==null&&(jt(e,t,i,r),Za(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=Un(t),i=ln(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vn(t,i,r),e!==null&&(jt(e,t,r,n),Za(e,t,r))}};function bm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!mo(n,r)||!mo(i,s):!0}function Qv(t,e,n){var r=!1,i=Hn,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=gt(e)?Lr:Je.current,r=e.contextTypes,s=(r=r!=null)?Ui(t,i):Hn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $m(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gl.enqueueReplaceState(e,e.state,null)}function Dh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Hv,Jd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=gt(e)?Lr:Je.current,i.context=Ui(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gl.enqueueReplaceState(i,i.state,null),Du(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Hv&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,t))}return t}function Ra(t,e){throw t=Object.prototype.toString.call(e),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rm(t){var e=t._init;return e(t._payload)}function Wv(t){function e(m,f){if(t){var g=m.deletions;g===null?(m.deletions=[f],m.flags|=16):g.push(f)}}function n(m,f){if(!t)return null;for(;f!==null;)e(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=zn(m,f),m.index=0,m.sibling=null,m}function s(m,f,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<f?(m.flags|=2,f):g):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,f,g,S){return f===null||f.tag!==6?(f=$c(g,m.mode,S),f.return=m,f):(f=i(f,g),f.return=m,f)}function u(m,f,g,S){var _=g.type;return _===vi?c(m,f,g.props.children,S,g.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_n&&Rm(_)===f.type)?(S=i(f,g.props),S.ref=Cs(m,f,g),S.return=m,S):(S=su(g.type,g.key,g.props,null,m.mode,S),S.ref=Cs(m,f,g),S.return=m,S)}function l(m,f,g,S){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Rc(g,m.mode,S),f.return=m,f):(f=i(f,g.children||[]),f.return=m,f)}function c(m,f,g,S,_){return f===null||f.tag!==7?(f=Pr(g,m.mode,S,_),f.return=m,f):(f=i(f,g),f.return=m,f)}function h(m,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=$c(""+f,m.mode,g),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ia:return g=su(f.type,f.key,f.props,null,m.mode,g),g.ref=Cs(m,null,f),g.return=m,g;case yi:return f=Rc(f,m.mode,g),f.return=m,f;case _n:var S=f._init;return h(m,S(f._payload),g)}if(Fs(f)||Is(f))return f=Pr(f,m.mode,g,null),f.return=m,f;Ra(m,f)}return null}function d(m,f,g,S){var _=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return _!==null?null:a(m,f,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ia:return g.key===_?u(m,f,g,S):null;case yi:return g.key===_?l(m,f,g,S):null;case _n:return _=g._init,d(m,f,_(g._payload),S)}if(Fs(g)||Is(g))return _!==null?null:c(m,f,g,S,null);Ra(m,g)}return null}function p(m,f,g,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(g)||null,a(f,m,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:return m=m.get(S.key===null?g:S.key)||null,u(f,m,S,_);case yi:return m=m.get(S.key===null?g:S.key)||null,l(f,m,S,_);case _n:var C=S._init;return p(m,f,g,C(S._payload),_)}if(Fs(S)||Is(S))return m=m.get(g)||null,c(f,m,S,_,null);Ra(f,S)}return null}function y(m,f,g,S){for(var _=null,C=null,D=f,O=f=0,ge=null;D!==null&&O<g.length;O++){D.index>O?(ge=D,D=null):ge=D.sibling;var K=d(m,D,g[O],S);if(K===null){D===null&&(D=ge);break}t&&D&&K.alternate===null&&e(m,D),f=s(K,f,O),C===null?_=K:C.sibling=K,C=K,D=ge}if(O===g.length)return n(m,D),se&&yr(m,O),_;if(D===null){for(;O<g.length;O++)D=h(m,g[O],S),D!==null&&(f=s(D,f,O),C===null?_=D:C.sibling=D,C=D);return se&&yr(m,O),_}for(D=r(m,D);O<g.length;O++)ge=p(D,m,O,g[O],S),ge!==null&&(t&&ge.alternate!==null&&D.delete(ge.key===null?O:ge.key),f=s(ge,f,O),C===null?_=ge:C.sibling=ge,C=ge);return t&&D.forEach(function(Lt){return e(m,Lt)}),se&&yr(m,O),_}function E(m,f,g,S){var _=Is(g);if(typeof _!="function")throw Error(x(150));if(g=_.call(g),g==null)throw Error(x(151));for(var C=_=null,D=f,O=f=0,ge=null,K=g.next();D!==null&&!K.done;O++,K=g.next()){D.index>O?(ge=D,D=null):ge=D.sibling;var Lt=d(m,D,K.value,S);if(Lt===null){D===null&&(D=ge);break}t&&D&&Lt.alternate===null&&e(m,D),f=s(Lt,f,O),C===null?_=Lt:C.sibling=Lt,C=Lt,D=ge}if(K.done)return n(m,D),se&&yr(m,O),_;if(D===null){for(;!K.done;O++,K=g.next())K=h(m,K.value,S),K!==null&&(f=s(K,f,O),C===null?_=K:C.sibling=K,C=K);return se&&yr(m,O),_}for(D=r(m,D);!K.done;O++,K=g.next())K=p(D,m,O,K.value,S),K!==null&&(t&&K.alternate!==null&&D.delete(K.key===null?O:K.key),f=s(K,f,O),C===null?_=K:C.sibling=K,C=K);return t&&D.forEach(function(Es){return e(m,Es)}),se&&yr(m,O),_}function k(m,f,g,S){if(typeof g=="object"&&g!==null&&g.type===vi&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ia:e:{for(var _=g.key,C=f;C!==null;){if(C.key===_){if(_=g.type,_===vi){if(C.tag===7){n(m,C.sibling),f=i(C,g.props.children),f.return=m,m=f;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_n&&Rm(_)===C.type){n(m,C.sibling),f=i(C,g.props),f.ref=Cs(m,C,g),f.return=m,m=f;break e}n(m,C);break}else e(m,C);C=C.sibling}g.type===vi?(f=Pr(g.props.children,m.mode,S,g.key),f.return=m,m=f):(S=su(g.type,g.key,g.props,null,m.mode,S),S.ref=Cs(m,f,g),S.return=m,m=S)}return o(m);case yi:e:{for(C=g.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(m,f.sibling),f=i(f,g.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else e(m,f);f=f.sibling}f=Rc(g,m.mode,S),f.return=m,m=f}return o(m);case _n:return C=g._init,k(m,f,C(g._payload),S)}if(Fs(g))return y(m,f,g,S);if(Is(g))return E(m,f,g,S);Ra(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,g),f.return=m,m=f):(n(m,f),f=$c(g,m.mode,S),f.return=m,m=f),o(m)):n(m,f)}return k}var ji=Wv(!0),Xv=Wv(!1),Xo={},Yt=ir(Xo),wo=ir(Xo),Eo=ir(Xo);function Ar(t){if(t===Xo)throw Error(x(174));return t}function Zd(t,e){switch(te(Eo,e),te(wo,t),te(Yt,Xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uh(e,t)}re(Yt),te(Yt,e)}function qi(){re(Yt),re(wo),re(Eo)}function Yv(t){Ar(Eo.current);var e=Ar(Yt.current),n=uh(e,t.type);e!==n&&(te(wo,t),te(Yt,n))}function ef(t){wo.current===t&&(re(Yt),re(wo))}var ue=ir(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kc=[];function tf(){for(var t=0;t<kc.length;t++)kc[t]._workInProgressVersionPrimary=null;kc.length=0}var eu=vn.ReactCurrentDispatcher,Cc=vn.ReactCurrentBatchConfig,Fr=0,ce=null,_e=null,be=null,$u=!1,Ws=!1,So=0,iT=0;function Qe(){throw Error(x(321))}function nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function rf(t,e,n,r,i,s){if(Fr=s,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eu.current=t===null||t.memoizedState===null?uT:lT,t=n(r,i),Ws){s=0;do{if(Ws=!1,So=0,25<=s)throw Error(x(301));s+=1,be=_e=null,e.updateQueue=null,eu.current=cT,t=n(r,i)}while(Ws)}if(eu.current=Ru,e=_e!==null&&_e.next!==null,Fr=0,be=_e=ce=null,$u=!1,e)throw Error(x(300));return t}function sf(){var t=So!==0;return So=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ce.memoizedState=be=t:be=be.next=t,be}function Ot(){if(_e===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=be===null?ce.memoizedState:be.next;if(e!==null)be=e,_e=t;else{if(t===null)throw Error(x(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},be===null?ce.memoizedState=be=t:be=be.next=t}return be}function Io(t,e){return typeof e=="function"?e(t):e}function Ac(t){var e=Ot(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=_e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Fr&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ce.lanes|=c,Vr|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,qt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ce.lanes|=s,Vr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nc(t){var e=Ot(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);qt(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Jv(){}function Zv(t,e){var n=ce,r=Ot(),i=e(),s=!qt(r.memoizedState,i);if(s&&(r.memoizedState=i,dt=!0),r=r.queue,of(nw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,To(9,tw.bind(null,n,r,i,e),void 0,null),Re===null)throw Error(x(349));(Fr&30)!==0||ew(n,e,i)}return i}function ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tw(t,e,n,r){e.value=n,e.getSnapshot=r,rw(e)&&iw(t)}function nw(t,e,n){return n(function(){rw(e)&&iw(t)})}function rw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function iw(t){var e=dn(t,1);e!==null&&jt(e,t,1,-1)}function Pm(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=aT.bind(null,ce,t),[e.memoizedState,t]}function To(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sw(){return Ot().memoizedState}function tu(t,e,n,r){var i=Gt();ce.flags|=t,i.memoizedState=To(1|e,n,void 0,r===void 0?null:r)}function yl(t,e,n,r){var i=Ot();r=r===void 0?null:r;var s=void 0;if(_e!==null){var o=_e.memoizedState;if(s=o.destroy,r!==null&&nf(r,o.deps)){i.memoizedState=To(e,n,s,r);return}}ce.flags|=t,i.memoizedState=To(1|e,n,s,r)}function Om(t,e){return tu(8390656,8,t,e)}function of(t,e){return yl(2048,8,t,e)}function ow(t,e){return yl(4,2,t,e)}function aw(t,e){return yl(4,4,t,e)}function uw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lw(t,e,n){return n=n!=null?n.concat([t]):null,yl(4,4,uw.bind(null,e,t),n)}function af(){}function cw(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hw(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dw(t,e,n){return(Fr&21)===0?(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n):(qt(n,e)||(n=mv(),ce.lanes|=n,Vr|=n,t.baseState=!0),e)}function sT(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=Cc.transition;Cc.transition={};try{t(!1),e()}finally{J=n,Cc.transition=r}}function fw(){return Ot().memoizedState}function oT(t,e,n){var r=Un(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pw(t))mw(e,n);else if(n=Kv(t,e,n,r),n!==null){var i=ot();jt(n,t,r,i),gw(n,e,r)}}function aT(t,e,n){var r=Un(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pw(t))mw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,qt(a,o)){var u=e.interleaved;u===null?(i.next=i,Yd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Kv(t,e,i,r),n!==null&&(i=ot(),jt(n,t,r,i),gw(n,e,r))}}function pw(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function mw(t,e){Ws=$u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gw(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Md(t,n)}}var Ru={readContext:Pt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},uT={readContext:Pt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:Om,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tu(4194308,4,uw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return tu(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oT.bind(null,ce,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Pm,useDebugValue:af,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Pm(!1),e=t[0];return t=sT.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ce,i=Gt();if(se){if(n===void 0)throw Error(x(407));n=n()}else{if(n=e(),Re===null)throw Error(x(349));(Fr&30)!==0||ew(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Om(nw.bind(null,r,s,t),[t]),r.flags|=2048,To(9,tw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Re.identifierPrefix;if(se){var n=an,r=on;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=So++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lT={readContext:Pt,useCallback:cw,useContext:Pt,useEffect:of,useImperativeHandle:lw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:hw,useReducer:Ac,useRef:sw,useState:function(){return Ac(Io)},useDebugValue:af,useDeferredValue:function(t){var e=Ot();return dw(e,_e.memoizedState,t)},useTransition:function(){var t=Ac(Io)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Jv,useSyncExternalStore:Zv,useId:fw,unstable_isNewReconciler:!1},cT={readContext:Pt,useCallback:cw,useContext:Pt,useEffect:of,useImperativeHandle:lw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:hw,useReducer:Nc,useRef:sw,useState:function(){return Nc(Io)},useDebugValue:af,useDeferredValue:function(t){var e=Ot();return _e===null?e.memoizedState=t:dw(e,_e.memoizedState,t)},useTransition:function(){var t=Nc(Io)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Jv,useSyncExternalStore:Zv,useId:fw,unstable_isNewReconciler:!1};function Ki(t,e){try{var n="",r=e;do n+=FS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dc(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hT=typeof WeakMap=="function"?WeakMap:Map;function yw(t,e,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ou||(Ou=!0,Uh=r),bh(t,e)},n}function vw(t,e,n){n=ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bh(t,e),typeof r!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_T.bind(null,t,e,n),e.then(t,t))}function Mm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fm(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ln(-1,1),e.tag=2,Vn(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var dT=vn.ReactCurrentOwner,dt=!1;function et(t,e,n,r){e.child=t===null?Xv(e,null,n,r):ji(e,t.child,n,r)}function Vm(t,e,n,r,i){n=n.render;var s=e.ref;return Oi(e,i),r=rf(t,e,n,r,s,i),n=sf(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(se&&n&&Kd(e),e.flags|=1,et(t,e,r,i),e.child)}function Bm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ww(t,e,s,r,i)):(t=su(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(o,r)&&t.ref===e.ref)return fn(t,e,i)}return e.flags|=1,t=zn(s,r),t.ref=e.ref,t.return=e,e.child=t}function ww(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(mo(s,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(dt=!0);else return e.lanes=t.lanes,fn(t,e,i)}return $h(t,e,n,r,i)}function Ew(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(Ai,wt),wt|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(Ai,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,te(Ai,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,te(Ai,wt),wt|=r;return et(t,e,i,n),e.child}function Sw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $h(t,e,n,r,i){var s=gt(n)?Lr:Je.current;return s=Ui(e,s),Oi(e,i),n=rf(t,e,n,r,s,i),r=sf(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(se&&r&&Kd(e),e.flags|=1,et(t,e,n,i),e.child)}function Um(t,e,n,r,i){if(gt(n)){var s=!0;_u(e)}else s=!1;if(Oi(e,i),e.stateNode===null)nu(t,e),Qv(e,n,r),Dh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Pt(l):(l=gt(n)?Lr:Je.current,l=Ui(e,l));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&$m(e,o,r,l),kn=!1;var d=e.memoizedState;o.state=d,Du(e,r,o,i),u=e.memoizedState,a!==r||d!==u||mt.current||kn?(typeof c=="function"&&(Nh(e,n,c,r),u=e.memoizedState),(a=kn||bm(e,n,a,r,d,u,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gv(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ft(e.type,a),o.props=l,h=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pt(u):(u=gt(n)?Lr:Je.current,u=Ui(e,u));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==u)&&$m(e,o,r,u),kn=!1,d=e.memoizedState,o.state=d,Du(e,r,o,i);var y=e.memoizedState;a!==h||d!==y||mt.current||kn?(typeof p=="function"&&(Nh(e,n,p,r),y=e.memoizedState),(l=kn||bm(e,n,l,r,d,y,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Rh(t,e,n,r,s,i)}function Rh(t,e,n,r,i,s){Sw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&km(e,n,!1),fn(t,e,s);r=e.stateNode,dT.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ji(e,t.child,null,s),e.child=ji(e,null,a,s)):et(t,e,a,s),e.memoizedState=r.state,i&&km(e,n,!0),e.child}function Iw(t){var e=t.stateNode;e.pendingContext?_m(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_m(t,e.context,!1),Zd(t,e.containerInfo)}function zm(t,e,n,r,i){return zi(),Hd(i),e.flags|=256,et(t,e,n,r),e.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Oh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tw(t,e,n){var r=e.pendingProps,i=ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),te(ue,i&1),t===null)return Ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=El(o,r,0,null),t=Pr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Oh(n),e.memoizedState=Ph,t):uf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fT(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zn(a,s):(s=Pr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Oh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ph,r}return s=t.child,t=s.sibling,r=zn(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uf(t,e){return e=El({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pa(t,e,n,r){return r!==null&&Hd(r),ji(e,t.child,null,n),t=uf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fT(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dc(Error(x(422))),Pa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=El({mode:"visible",children:r.children},i,0,null),s=Pr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&ji(e,t.child,null,o),e.child.memoizedState=Oh(o),e.memoizedState=Ph,s);if((e.mode&1)===0)return Pa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=Dc(s,r,void 0),Pa(t,e,o,r)}if(a=(o&t.childLanes)!==0,dt||a){if(r=Re,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dn(t,i),jt(r,t,i,-1))}return pf(),r=Dc(Error(x(421))),Pa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Et=Fn(i.nextSibling),It=e,se=!0,Bt=null,t!==null&&(Nt[Dt++]=on,Nt[Dt++]=an,Nt[Dt++]=Mr,on=t.id,an=t.overflow,Mr=e),e=uf(e,r.children),e.flags|=4096,e)}function jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ah(t.return,e,n)}function bc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(et(t,e,r.children,n),r=ue.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,n,e);else if(t.tag===19)jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(ue,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bc(e,!0,n,null,s);break;case"together":bc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nu(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(x(153));if(e.child!==null){for(t=e.child,n=zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pT(t,e,n){switch(e.tag){case 3:Iw(e),zi();break;case 5:Yv(e);break;case 1:gt(e.type)&&_u(e);break;case 4:Zd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;te(Au,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(ue,ue.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Tw(t,e,n):(te(ue,ue.current&1),t=fn(t,e,n),t!==null?t.sibling:null);te(ue,ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return xw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(ue,ue.current),r)break;return null;case 22:case 23:return e.lanes=0,Ew(t,e,n)}return fn(t,e,n)}var _w,Lh,kw,Cw;_w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lh=function(){};kw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ar(Yt.current);var s=null;switch(n){case"input":i=ih(t,i),r=ih(t,r),s=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),s=[];break;case"textarea":i=ah(t,i),r=ah(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tu)}lh(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ao.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ao.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ne("scroll",t),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};Cw=function(t,e,n,r){n!==r&&(e.flags|=4)};function As(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mT(t,e,n){var r=e.pendingProps;switch(Gd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return gt(e.type)&&xu(),We(e),null;case 3:return r=e.stateNode,qi(),re(mt),re(Je),tf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Bt!==null&&(qh(Bt),Bt=null))),Lh(t,e),We(e),null;case 5:ef(e);var i=Ar(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)kw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return We(e),null}if(t=Ar(Yt.current),$a(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ht]=e,r[vo]=s,t=(e.mode&1)!==0,n){case"dialog":ne("cancel",r),ne("close",r);break;case"iframe":case"object":case"embed":ne("load",r);break;case"video":case"audio":for(i=0;i<Bs.length;i++)ne(Bs[i],r);break;case"source":ne("error",r);break;case"img":case"image":case"link":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"input":Jp(r,s),ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ne("invalid",r);break;case"textarea":em(r,s),ne("invalid",r)}lh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ba(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ba(r.textContent,a,t),i=["children",""+a]):ao.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ne("scroll",r)}switch(n){case"input":Ta(r),Zp(r,s,!0);break;case"textarea":Ta(r),tm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Tu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ev(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ht]=e,t[vo]=r,_w(t,e,!1,!1),e.stateNode=t;e:{switch(o=ch(n,r),n){case"dialog":ne("cancel",t),ne("close",t),i=r;break;case"iframe":case"object":case"embed":ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bs.length;i++)ne(Bs[i],t);i=r;break;case"source":ne("error",t),i=r;break;case"img":case"image":case"link":ne("error",t),ne("load",t),i=r;break;case"details":ne("toggle",t),i=r;break;case"input":Jp(t,r),i=ih(t,r),ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),ne("invalid",t);break;case"textarea":em(t,r),i=ah(t,r),ne("invalid",t);break;default:i=r}lh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?rv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&tv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&uo(t,u):typeof u=="number"&&uo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ao.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ne("scroll",t):u!=null&&bd(t,s,u,o))}switch(n){case"input":Ta(t),Zp(t,r,!1);break;case"textarea":Ta(t),tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bi(t,!!r.multiple,s,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)Cw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(n=Ar(Eo.current),Ar(Yt.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ht]=e,(s=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ba(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=e,e.stateNode=r}return We(e),null;case 13:if(re(ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&Et!==null&&(e.mode&1)!==0&&(e.flags&128)===0)qv(),zi(),e.flags|=98560,s=!1;else if(s=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[Ht]=e}else zi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;We(e),s=!1}else Bt!==null&&(qh(Bt),Bt=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ue.current&1)!==0?ke===0&&(ke=3):pf())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return qi(),Lh(t,e),t===null&&go(e.stateNode.containerInfo),We(e),null;case 10:return Xd(e.type._context),We(e),null;case 17:return gt(e.type)&&xu(),We(e),null;case 19:if(re(ue),s=e.memoizedState,s===null)return We(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)As(s,!1);else{if(ke!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=bu(t),o!==null){for(e.flags|=128,As(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(ue,ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&ve()>Gi&&(e.flags|=128,r=!0,As(s,!1),e.lanes=4194304)}else{if(!r)if(t=bu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),As(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!se)return We(e),null}else 2*ve()-s.renderingStartTime>Gi&&n!==1073741824&&(e.flags|=128,r=!0,As(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,n=ue.current,te(ue,r?n&1|2:n&1),e):(We(e),null);case 22:case 23:return ff(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(wt&1073741824)!==0&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function gT(t,e){switch(Gd(e),e.tag){case 1:return gt(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qi(),re(mt),re(Je),tf(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return ef(e),null;case 13:if(re(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(x(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(ue),null;case 4:return qi(),null;case 10:return Xd(e.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var Oa=!1,Xe=!1,yT=typeof WeakSet=="function"?WeakSet:Set,b=null;function Ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function Mh(t,e,n){try{n()}catch(r){de(t,e,r)}}var qm=!1;function vT(t,e){if(Eh=Eu,t=bv(),qd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sh={focusedElem:t,selectionRange:n},Eu=!1,b=e;b!==null;)if(e=b,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,b=t;else for(;b!==null;){e=b;try{var y=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,k=y.memoizedState,m=e.stateNode,f=m.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ft(e.type,E),k);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(S){de(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,b=t;break}b=e.return}return y=qm,qm=!1,y}function Xs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Mh(e,n,s)}i=i.next}while(i!==r)}}function vl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aw(t){var e=t.alternate;e!==null&&(t.alternate=null,Aw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ht],delete e[vo],delete e[xh],delete e[eT],delete e[tT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nw(t){return t.tag===5||t.tag===3||t.tag===4}function Km(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tu));else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}var Ve=null,Vt=!1;function In(t,e,n){for(n=n.child;n!==null;)Dw(t,e,n),n=n.sibling}function Dw(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:Xe||Ci(n,e);case 6:var r=Ve,i=Vt;Ve=null,In(t,e,n),Ve=r,Vt=i,Ve!==null&&(Vt?(t=Ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(Vt?(t=Ve,n=n.stateNode,t.nodeType===8?xc(t.parentNode,n):t.nodeType===1&&xc(t,n),fo(t)):xc(Ve,n.stateNode));break;case 4:r=Ve,i=Vt,Ve=n.stateNode.containerInfo,Vt=!0,In(t,e,n),Ve=r,Vt=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Mh(n,e,o),i=i.next}while(i!==r)}In(t,e,n);break;case 1:if(!Xe&&(Ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){de(n,e,a)}In(t,e,n);break;case 21:In(t,e,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,In(t,e,n),Xe=r):In(t,e,n);break;default:In(t,e,n)}}function Gm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yT),e.forEach(function(r){var i=CT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ve=a.stateNode,Vt=!1;break e;case 3:Ve=a.stateNode.containerInfo,Vt=!0;break e;case 4:Ve=a.stateNode.containerInfo,Vt=!0;break e}a=a.return}if(Ve===null)throw Error(x(160));Dw(s,o,i),Ve=null,Vt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){de(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bw(e,t),e=e.sibling}function bw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Kt(t),r&4){try{Xs(3,t,t.return),vl(3,t)}catch(E){de(t,t.return,E)}try{Xs(5,t,t.return)}catch(E){de(t,t.return,E)}}break;case 1:Mt(e,t),Kt(t),r&512&&n!==null&&Ci(n,n.return);break;case 5:if(Mt(e,t),Kt(t),r&512&&n!==null&&Ci(n,n.return),t.flags&32){var i=t.stateNode;try{uo(i,"")}catch(E){de(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Jy(i,s),ch(a,o);var l=ch(a,s);for(o=0;o<u.length;o+=2){var c=u[o],h=u[o+1];c==="style"?rv(i,h):c==="dangerouslySetInnerHTML"?tv(i,h):c==="children"?uo(i,h):bd(i,c,h,l)}switch(a){case"input":sh(i,s);break;case"textarea":Zy(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?bi(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?bi(i,!!s.multiple,s.defaultValue,!0):bi(i,!!s.multiple,s.multiple?[]:"",!1))}i[vo]=s}catch(E){de(t,t.return,E)}}break;case 6:if(Mt(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(x(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){de(t,t.return,E)}}break;case 3:if(Mt(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fo(e.containerInfo)}catch(E){de(t,t.return,E)}break;case 4:Mt(e,t),Kt(t);break;case 13:Mt(e,t),Kt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hf=ve())),r&4&&Gm(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(l=Xe)||c,Mt(e,t),Xe=l):Mt(e,t),Kt(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(b=t,c=t.child;c!==null;){for(h=b=c;b!==null;){switch(d=b,p=d.child,d.tag){case 0:case 11:case 14:case 15:Xs(4,d,d.return);break;case 1:Ci(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){de(r,n,E)}}break;case 5:Ci(d,d.return);break;case 22:if(d.memoizedState!==null){Qm(h);continue}}p!==null?(p.return=d,b=p):Qm(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=nv("display",o))}catch(E){de(t,t.return,E)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(E){de(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mt(e,t),Kt(t),r&4&&Gm(t);break;case 21:break;default:Mt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Nw(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uo(i,""),r.flags&=-33);var s=Km(t);Bh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Km(t);Vh(t,a,o);break;default:throw Error(x(161))}}catch(u){de(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wT(t,e,n){b=t,$w(t)}function $w(t,e,n){for(var r=(t.mode&1)!==0;b!==null;){var i=b,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Oa;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Xe;a=Oa;var l=Xe;if(Oa=o,(Xe=u)&&!l)for(b=i;b!==null;)o=b,u=o.child,o.tag===22&&o.memoizedState!==null?Wm(i):u!==null?(u.return=o,b=u):Wm(i);for(;s!==null;)b=s,$w(s),s=s.sibling;b=i,Oa=a,Xe=l}Hm(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,b=s):Hm(t)}}function Hm(t){for(;b!==null;){var e=b;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Xe||vl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Dm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dm(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&fo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Xe||e.flags&512&&Fh(e)}catch(d){de(e,e.return,d)}}if(e===t){b=null;break}if(n=e.sibling,n!==null){n.return=e.return,b=n;break}b=e.return}}function Qm(t){for(;b!==null;){var e=b;if(e===t){b=null;break}var n=e.sibling;if(n!==null){n.return=e.return,b=n;break}b=e.return}}function Wm(t){for(;b!==null;){var e=b;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vl(4,e)}catch(u){de(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){de(e,i,u)}}var s=e.return;try{Fh(e)}catch(u){de(e,s,u)}break;case 5:var o=e.return;try{Fh(e)}catch(u){de(e,o,u)}}}catch(u){de(e,e.return,u)}if(e===t){b=null;break}var a=e.sibling;if(a!==null){a.return=e.return,b=a;break}b=e.return}}var ET=Math.ceil,Pu=vn.ReactCurrentDispatcher,lf=vn.ReactCurrentOwner,Rt=vn.ReactCurrentBatchConfig,Q=0,Re=null,Ie=null,je=0,wt=0,Ai=ir(0),ke=0,xo=null,Vr=0,wl=0,cf=0,Ys=null,ht=null,hf=0,Gi=1/0,rn=null,Ou=!1,Uh=null,Bn=null,La=!1,Rn=null,Lu=0,Js=0,zh=null,ru=-1,iu=0;function ot(){return(Q&6)!==0?ve():ru!==-1?ru:ru=ve()}function Un(t){return(t.mode&1)===0?1:(Q&2)!==0&&je!==0?je&-je:rT.transition!==null?(iu===0&&(iu=mv()),iu):(t=J,t!==0||(t=window.event,t=t===void 0?16:Iv(t.type)),t)}function jt(t,e,n,r){if(50<Js)throw Js=0,zh=null,Error(x(185));Ho(t,n,r),((Q&2)===0||t!==Re)&&(t===Re&&((Q&2)===0&&(wl|=n),ke===4&&An(t,je)),yt(t,r),n===1&&Q===0&&(e.mode&1)===0&&(Gi=ve()+500,ml&&sr()))}function yt(t,e){var n=t.callbackNode;rI(t,e);var r=wu(t,t===Re?je:0);if(r===0)n!==null&&im(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&im(n),e===1)t.tag===0?nT(Xm.bind(null,t)):Uv(Xm.bind(null,t)),JI(function(){(Q&6)===0&&sr()}),n=null;else{switch(gv(r)){case 1:n=Ld;break;case 4:n=fv;break;case 16:n=vu;break;case 536870912:n=pv;break;default:n=vu}n=Bw(n,Rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rw(t,e){if(ru=-1,iu=0,(Q&6)!==0)throw Error(x(327));var n=t.callbackNode;if(Li()&&t.callbackNode!==n)return null;var r=wu(t,t===Re?je:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Mu(t,r);else{e=r;var i=Q;Q|=2;var s=Ow();(Re!==t||je!==e)&&(rn=null,Gi=ve()+500,Rr(t,e));do try{TT();break}catch(a){Pw(t,a)}while(1);Wd(),Pu.current=s,Q=i,Ie!==null?e=0:(Re=null,je=0,e=ke)}if(e!==0){if(e===2&&(i=mh(t),i!==0&&(r=i,e=jh(t,i))),e===1)throw n=xo,Rr(t,0),An(t,r),yt(t,ve()),n;if(e===6)An(t,r);else{if(i=t.current.alternate,(r&30)===0&&!ST(i)&&(e=Mu(t,r),e===2&&(s=mh(t),s!==0&&(r=s,e=jh(t,s))),e===1))throw n=xo,Rr(t,0),An(t,r),yt(t,ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:vr(t,ht,rn);break;case 3:if(An(t,r),(r&130023424)===r&&(e=hf+500-ve(),10<e)){if(wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Th(vr.bind(null,t,ht,rn),e);break}vr(t,ht,rn);break;case 4:if(An(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ET(r/1960))-r,10<r){t.timeoutHandle=Th(vr.bind(null,t,ht,rn),r);break}vr(t,ht,rn);break;case 5:vr(t,ht,rn);break;default:throw Error(x(329))}}}return yt(t,ve()),t.callbackNode===n?Rw.bind(null,t):null}function jh(t,e){var n=Ys;return t.current.memoizedState.isDehydrated&&(Rr(t,e).flags|=256),t=Mu(t,e),t!==2&&(e=ht,ht=n,e!==null&&qh(e)),t}function qh(t){ht===null?ht=t:ht.push.apply(ht,t)}function ST(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~cf,e&=~wl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Xm(t){if((Q&6)!==0)throw Error(x(327));Li();var e=wu(t,0);if((e&1)===0)return yt(t,ve()),null;var n=Mu(t,e);if(t.tag!==0&&n===2){var r=mh(t);r!==0&&(e=r,n=jh(t,r))}if(n===1)throw n=xo,Rr(t,0),An(t,e),yt(t,ve()),n;if(n===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,ht,rn),yt(t,ve()),null}function df(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(Gi=ve()+500,ml&&sr())}}function Br(t){Rn!==null&&Rn.tag===0&&(Q&6)===0&&Li();var e=Q;Q|=1;var n=Rt.transition,r=J;try{if(Rt.transition=null,J=1,t)return t()}finally{J=r,Rt.transition=n,Q=e,(Q&6)===0&&sr()}}function ff(){wt=Ai.current,re(Ai)}function Rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YI(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(Gd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xu();break;case 3:qi(),re(mt),re(Je),tf();break;case 5:ef(r);break;case 4:qi();break;case 13:re(ue);break;case 19:re(ue);break;case 10:Xd(r.type._context);break;case 22:case 23:ff()}n=n.return}if(Re=t,Ie=t=zn(t.current,null),je=wt=e,ke=0,xo=null,cf=wl=Vr=0,ht=Ys=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Cr=null}return t}function Pw(t,e){do{var n=Ie;try{if(Wd(),eu.current=Ru,$u){for(var r=ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$u=!1}if(Fr=0,be=_e=ce=null,Ws=!1,So=0,lf.current=null,n===null||n.return===null){ke=1,xo=e,Ie=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=je,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Mm(o);if(p!==null){p.flags&=-257,Fm(p,o,a,s,e),p.mode&1&&Lm(s,l,e),e=p,u=l;var y=e.updateQueue;if(y===null){var E=new Set;E.add(u),e.updateQueue=E}else y.add(u);break e}else{if((e&1)===0){Lm(s,l,e),pf();break e}u=Error(x(426))}}else if(se&&a.mode&1){var k=Mm(o);if(k!==null){(k.flags&65536)===0&&(k.flags|=256),Fm(k,o,a,s,e),Hd(Ki(u,a));break e}}s=u=Ki(u,a),ke!==4&&(ke=2),Ys===null?Ys=[s]:Ys.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=yw(s,u,e);Nm(s,m);break e;case 1:a=u;var f=s.type,g=s.stateNode;if((s.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Bn===null||!Bn.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=vw(s,a,e);Nm(s,S);break e}}s=s.return}while(s!==null)}Mw(n)}catch(_){e=_,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(1)}function Ow(){var t=Pu.current;return Pu.current=Ru,t===null?Ru:t}function pf(){(ke===0||ke===3||ke===2)&&(ke=4),Re===null||(Vr&268435455)===0&&(wl&268435455)===0||An(Re,je)}function Mu(t,e){var n=Q;Q|=2;var r=Ow();(Re!==t||je!==e)&&(rn=null,Rr(t,e));do try{IT();break}catch(i){Pw(t,i)}while(1);if(Wd(),Q=n,Pu.current=r,Ie!==null)throw Error(x(261));return Re=null,je=0,ke}function IT(){for(;Ie!==null;)Lw(Ie)}function TT(){for(;Ie!==null&&!QS();)Lw(Ie)}function Lw(t){var e=Vw(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Mw(t):Ie=e,lf.current=null}function Mw(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=mT(n,e,wt),n!==null){Ie=n;return}}else{if(n=gT(n,e),n!==null){n.flags&=32767,Ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,Ie=null;return}}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);ke===0&&(ke=5)}function vr(t,e,n){var r=J,i=Rt.transition;try{Rt.transition=null,J=1,xT(t,e,n,r)}finally{Rt.transition=i,J=r}return null}function xT(t,e,n,r){do Li();while(Rn!==null);if((Q&6)!==0)throw Error(x(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iI(t,s),t===Re&&(Ie=Re=null,je=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||La||(La=!0,Bw(vu,function(){return Li(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=Rt.transition,Rt.transition=null;var o=J;J=1;var a=Q;Q|=4,lf.current=null,vT(t,n),bw(n,t),qI(Sh),Eu=!!Eh,Sh=Eh=null,t.current=n,wT(n),WS(),Q=a,J=o,Rt.transition=s}else t.current=n;if(La&&(La=!1,Rn=t,Lu=i),s=t.pendingLanes,s===0&&(Bn=null),JS(n.stateNode),yt(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ou)throw Ou=!1,t=Uh,Uh=null,t;return(Lu&1)!==0&&t.tag!==0&&Li(),s=t.pendingLanes,(s&1)!==0?t===zh?Js++:(Js=0,zh=t):Js=0,sr(),null}function Li(){if(Rn!==null){var t=gv(Lu),e=Rt.transition,n=J;try{if(Rt.transition=null,J=16>t?16:t,Rn===null)var r=!1;else{if(t=Rn,Rn=null,Lu=0,(Q&6)!==0)throw Error(x(331));var i=Q;for(Q|=4,b=t.current;b!==null;){var s=b,o=s.child;if((b.flags&16)!==0){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(b=l;b!==null;){var c=b;switch(c.tag){case 0:case 11:case 15:Xs(8,c,s)}var h=c.child;if(h!==null)h.return=c,b=h;else for(;b!==null;){c=b;var d=c.sibling,p=c.return;if(Aw(c),c===l){b=null;break}if(d!==null){d.return=p,b=d;break}b=p}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}b=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,b=o;else e:for(;b!==null;){if(s=b,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Xs(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,b=m;break e}b=s.return}}var f=t.current;for(b=f;b!==null;){o=b;var g=o.child;if((o.subtreeFlags&2064)!==0&&g!==null)g.return=o,b=g;else e:for(o=f;b!==null;){if(a=b,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:vl(9,a)}}catch(_){de(a,a.return,_)}if(a===o){b=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,b=S;break e}b=a.return}}if(Q=i,sr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(cl,t)}catch{}r=!0}return r}finally{J=n,Rt.transition=e}}return!1}function Ym(t,e,n){e=Ki(n,e),e=yw(t,e,1),t=Vn(t,e,1),e=ot(),t!==null&&(Ho(t,1,e),yt(t,e))}function de(t,e,n){if(t.tag===3)Ym(t,t,n);else for(;e!==null;){if(e.tag===3){Ym(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r))){t=Ki(n,t),t=vw(e,t,1),e=Vn(e,t,1),t=ot(),e!==null&&(Ho(e,1,t),yt(e,t));break}}e=e.return}}function _T(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(je&n)===n&&(ke===4||ke===3&&(je&130023424)===je&&500>ve()-hf?Rr(t,0):cf|=n),yt(t,e)}function Fw(t,e){e===0&&((t.mode&1)===0?e=1:(e=ka,ka<<=1,(ka&130023424)===0&&(ka=4194304)));var n=ot();t=dn(t,e),t!==null&&(Ho(t,e,n),yt(t,n))}function kT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fw(t,n)}function CT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),Fw(t,n)}var Vw;Vw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)dt=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return dt=!1,pT(t,e,n);dt=(t.flags&131072)!==0}else dt=!1,se&&(e.flags&1048576)!==0&&zv(e,Cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nu(t,e),t=e.pendingProps;var i=Ui(e,Je.current);Oi(e,n),i=rf(null,e,r,t,i,n);var s=sf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(s=!0,_u(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jd(e),i.updater=gl,e.stateNode=i,i._reactInternals=e,Dh(e,r,t,n),e=Rh(null,e,r,!0,s,n)):(e.tag=0,se&&s&&Kd(e),et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=NT(r),t=Ft(r,t),i){case 0:e=$h(null,e,r,t,n);break e;case 1:e=Um(null,e,r,t,n);break e;case 11:e=Vm(null,e,r,t,n);break e;case 14:e=Bm(null,e,r,Ft(r.type,t),n);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),$h(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Um(t,e,r,i,n);case 3:e:{if(Iw(e),t===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Gv(t,e),Du(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ki(Error(x(423)),e),e=zm(t,e,r,n,i);break e}else if(r!==i){i=Ki(Error(x(424)),e),e=zm(t,e,r,n,i);break e}else for(Et=Fn(e.stateNode.containerInfo.firstChild),It=e,se=!0,Bt=null,n=Xv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===i){e=fn(t,e,n);break e}et(t,e,r,n)}e=e.child}return e;case 5:return Yv(e),t===null&&Ch(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ih(r,i)?o=null:s!==null&&Ih(r,s)&&(e.flags|=32),Sw(t,e),et(t,e,o,n),e.child;case 6:return t===null&&Ch(e),null;case 13:return Tw(t,e,n);case 4:return Zd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ji(e,null,r,n):et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Vm(t,e,r,i,n);case 7:return et(t,e,e.pendingProps,n),e.child;case 8:return et(t,e,e.pendingProps.children,n),e.child;case 12:return et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,te(Au,r._currentValue),r._currentValue=o,s!==null)if(qt(s.value,o)){if(s.children===i.children&&!mt.current){e=fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ln(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ah(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ah(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oi(e,n),i=Pt(i),r=r(i),e.flags|=1,et(t,e,r,n),e.child;case 14:return r=e.type,i=Ft(r,e.pendingProps),i=Ft(r.type,i),Bm(t,e,r,i,n);case 15:return ww(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),nu(t,e),e.tag=1,gt(r)?(t=!0,_u(e)):t=!1,Oi(e,n),Qv(e,r,i),Dh(e,r,i,n),Rh(null,e,r,!0,t,n);case 19:return xw(t,e,n);case 22:return Ew(t,e,n)}throw Error(x(156,e.tag))};function Bw(t,e){return dv(t,e)}function AT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new AT(t,e,n,r)}function mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NT(t){if(typeof t=="function")return mf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rd)return 11;if(t===Pd)return 14}return 2}function zn(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function su(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vi:return Pr(n.children,i,s,e);case $d:o=8,i|=8;break;case eh:return t=bt(12,n,e,i|2),t.elementType=eh,t.lanes=s,t;case th:return t=bt(13,n,e,i),t.elementType=th,t.lanes=s,t;case nh:return t=bt(19,n,e,i),t.elementType=nh,t.lanes=s,t;case Wy:return El(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hy:o=10;break e;case Qy:o=9;break e;case Rd:o=11;break e;case Pd:o=14;break e;case _n:o=16,r=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return e=bt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Pr(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function El(t,e,n,r){return t=bt(22,t,r,e),t.elementType=Wy,t.lanes=n,t.stateNode={isHidden:!1},t}function $c(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function Rc(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gf(t,e,n,r,i,s,o,a,u){return t=new DT(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(s),t}function bT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uw(t){if(!t)return Hn;t=t._reactInternals;e:{if(ii(t)!==t||t.tag!==1)throw Error(x(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(t.tag===1){var n=t.type;if(gt(n))return Bv(t,n,e)}return e}function zw(t,e,n,r,i,s,o,a,u){return t=gf(n,r,!0,t,i,s,o,a,u),t.context=Uw(null),n=t.current,r=ot(),i=Un(n),s=ln(r,i),s.callback=e!=null?e:null,Vn(n,s,i),t.current.lanes=i,Ho(t,i,r),yt(t,r),t}function Sl(t,e,n,r){var i=e.current,s=ot(),o=Un(i);return n=Uw(n),e.context===null?e.context=n:e.pendingContext=n,e=ln(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vn(i,e,o),t!==null&&(jt(t,i,o,s),Za(t,i,o)),o}function Fu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yf(t,e){Jm(t,e),(t=t.alternate)&&Jm(t,e)}function $T(){return null}var jw=typeof reportError=="function"?reportError:function(t){console.error(t)};function vf(t){this._internalRoot=t}Il.prototype.render=vf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(x(409));Sl(t,e,null,null)};Il.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Br(function(){Sl(null,t,null,null)}),e[hn]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var e=wv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&Sv(t)}};function wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zm(){}function RT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Fu(o);s.call(l)}}var o=zw(e,r,t,0,null,!1,!1,"",Zm);return t._reactRootContainer=o,t[hn]=o.current,go(t.nodeType===8?t.parentNode:t),Br(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Fu(u);a.call(l)}}var u=gf(t,0,!1,null,null,!1,!1,"",Zm);return t._reactRootContainer=u,t[hn]=u.current,go(t.nodeType===8?t.parentNode:t),Br(function(){Sl(e,u,n,r)}),u}function xl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Fu(o);a.call(u)}}Sl(e,o,t,i)}else o=RT(n,e,t,i,r);return Fu(o)}yv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vs(e.pendingLanes);n!==0&&(Md(e,n|1),yt(e,ve()),(Q&6)===0&&(Gi=ve()+500,sr()))}break;case 13:Br(function(){var r=dn(t,1);if(r!==null){var i=ot();jt(r,t,1,i)}}),yf(t,1)}};Fd=function(t){if(t.tag===13){var e=dn(t,134217728);if(e!==null){var n=ot();jt(e,t,134217728,n)}yf(t,134217728)}};vv=function(t){if(t.tag===13){var e=Un(t),n=dn(t,e);if(n!==null){var r=ot();jt(n,t,e,r)}yf(t,e)}};wv=function(){return J};Ev=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};dh=function(t,e,n){switch(e){case"input":if(sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pl(r);if(!i)throw Error(x(90));Yy(r),sh(r,i)}}}break;case"textarea":Zy(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};ov=df;av=Br;var PT={usingClientEntryPoint:!1,Events:[Wo,Ii,pl,iv,sv,df]},Ns={findFiberByHostInstance:kr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},OT={bundleType:Ns.bundleType,version:Ns.version,rendererPackageName:Ns.rendererPackageName,rendererConfig:Ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ns.findFiberByHostInstance||$T,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{cl=Ma.inject(OT),Xt=Ma}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wf(e))throw Error(x(200));return bT(t,e,null,n)};Ct.createRoot=function(t,e){if(!wf(t))throw Error(x(299));var n=!1,r="",i=jw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gf(t,1,!1,null,null,n,!1,r,i),t[hn]=e.current,go(t.nodeType===8?t.parentNode:t),new vf(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=cv(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Br(t)};Ct.hydrate=function(t,e,n){if(!Tl(e))throw Error(x(200));return xl(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!wf(t))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zw(e,null,t,1,n!=null?n:null,i,!1,s,o),t[hn]=e.current,go(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Il(e)};Ct.render=function(t,e,n){if(!Tl(e))throw Error(x(200));return xl(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!Tl(t))throw Error(x(40));return t._reactRootContainer?(Br(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};Ct.unstable_batchedUpdates=df;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tl(n))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return xl(t,e,n,!1,r)};Ct.version="18.2.0-next-9e3b772b8-20220608";function qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qw)}catch(t){console.error(t)}}qw(),Oy.exports=Ct;var eg=Oy.exports;Jc.createRoot=eg.createRoot,Jc.hydrateRoot=eg.hydrateRoot;var Ef={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT=Y.exports,MT=Symbol.for("react.element"),FT=Symbol.for("react.fragment"),VT=Object.prototype.hasOwnProperty,BT=LT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UT={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VT.call(e,r)&&!UT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MT,type:t,key:s,ref:o,props:i,_owner:BT.current}}_l.Fragment=FT;_l.jsx=Kw;_l.jsxs=Kw;Ef.exports=_l;const L=Ef.exports.jsx,Ne=Ef.exports.jsxs,zT=({card:t})=>{const{img:e,title:n,buttonLabel:r,button:i,url:s}=t;return Ne("div",{className:"card-container",children:[L("img",{src:e,alt:"img",className:"img-card"}),L("h1",{className:"card-header",children:n}),L("a",{href:s,target:"_blank",className:"button-link",children:i&&L("button",{className:"button-card",children:r})||L("span",{className:"card-text",children:r})})]})};var jT="/wedding-page/assets/liverpool.1b74c327.jpeg",qT="/wedding-page/assets/hospedaje.6c24b12d.jpeg";const KT=[{id:1,title:"Hospedaje",button:!0,buttonLabel:"Ver Recomendaci\xF3n",url:"https://www.tripadvisor.com.mx/Hotel_Review-g1744419-d5114199-Reviews-Reserva_La_Cofradia-Comala_Pacific_Coast.html",img:qT},{id:2,title:"Mesa de Regalos",button:!0,buttonLabel:"Ver Mesa de Regalos",url:"https://mesaderegalos.liverpool.com.mx/milistaderegalos/50974252",img:jT},{id:3,title:"Amazon wishlist",button:!0,buttonLabel:"Ver Lista de deseos",url:"https://www.amazon.com.mx/hz/wishlist/ls/2KGPU36MS34EG?ref_=wl_share",img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAw1BMVEX///8iHx8AAAD/mQAXExMbFxf/lQAGAACura3/lwD/kQD6+voTDg7/lgD09PQfGxvj4+NnZmZPTU1IRkYtKipwbm5UUlKCgYHs7Oyko6NmZWUUEBC3trbp6elxcHA2NDSSkZHR0dFdXFyamZmKiYnW1taHhob/4sn/rVP/ypj/zqH/9u3/2LXExMS0s7OmpaX/w4j/p0H/vXv/hQD/tWn/7+H/38I/PT0wLi7/unT/niH/xo7/sV//69n/06v/r1f/ojL2eEIDAAAHL0lEQVR4nO2YeVfiPBTGaehCQ6EIIqtsBVkr6Ii+Mi7z/T/Vm61tijqDWmb0nOf3B4c0232S3JsllwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+wGTdGJ2NGq3Ja5nFMAgK5yrR7AZBt7xXIgx6o7N2Iy7EKe+RarDFGqm8aknzkmU1PyzkDVoWcTzTMjsOOe3GVhNOI5cLCHEch9SFbXWeIKSnS7lg3zqsuueQ6iRdXSfKqZzIBkk/7ivXEyUm4s9++5/n/JT4RoRPTtTngsOS5oj1KXOcOybG9FTitJhI8eLahkUC9blLjDRE1WgRM+7rLGqlavESYa7myCzvvwwFNomVtqSnKzwJY0vJOHcXGWd0zmKBe0K6v1c41r93ooE6kwqDONPJcBb7QqDPloaaC1JJFFr1fjK/pKVZR+R6LBM1d4R0VMZvFarPHccR7XaqmkLnUm9/39c/jOzS8teToRpBb5woZBmG50Qzx4ag46kZd1qiVEMMi1PrToZqObO1xon9UI2b1edfi6pM43LdFyNCColCv691Ri6zUqjaVlYJW6qaQuYsF616NLY+aQQjNQsNUUokOiIK5QZCjDeQDTclZflVrYyBkwyC8D3DSawwfJ8MCvXUOGcAYUHUJ0OZ+M8X/egKCY/cBdmrb/FES2SYIiJNePXIxeSK7aQ9qKJmTUYgEdNY+JJ1RUY3UWg4vP1Aaz8LuuNe1fJUom0mniQVetIy6WMqigjLzLb437o4qZF2NFqvmCYGzbBqIhFqoqLio0ShU0i+W2e5Y1B/oVAFlBMzCRa5Oz9RmOIVhRfaSmCBVKxYog4Go6Q3qVBFl5qV+EqmFCsT1ZGuUJrW6CQZ0pwXq6hcGb5cXkOSChtVrX2m3ovHUEaDU/ldDKea9aw4LzRqPO5Jb0gpLCbG+MYbCietXp9XN14oNOWeMFJJYugKpcOJNSuatFSxXuYKwxo7tGnb/isKxaYQjfGewoJBHDPZNXWFdRlHnejoosJwVFH0ILYd2aRa+PWsFbbl1PnsWPnmHKYUVnWFzb4881ms+r7CbmqHTI4HKYVid0kNWtYK5VHQJ/2Ldbf60g//oLDsiComqQ7WXS+tUAlyGnsfojm8/DsK5TnR7E/itt+lsCZqOG0RkPZi6ZnIi2rFBWI/VKs0OK5COaypKPYehWFKVFrhWunR7oFphWupsHBchesknuVSO9RhCtWkn7+i8Fyt0ZbWW1Xf9tQpT5ynjqgwbaI8gLxDoaM7VjmlsK+icxhO4iu7tgMmfZePqzA1qk21iooHK0ytcblk/TuRGESndXHBaF9qJdThTB4FpZIjKqxZ2qiO1TUgPFRhMeVYNbXZ8OEqp6+HJiGDeESU8fK846yPrFCetWXb6oil7lKHz6GyMpo1cbkYphXylnghtUyF299ZSQdHVBiok3F9OEzeF5yLQxWqWw8JJmE7ee4IX1Mo9j01tWQw7PalF8pAdESF6vrGlxETYUa33gMUiluvujgaHuHvS+p+7owiheygw/DEZ3kPU1uIR+Qrhimd9qg7/on2UkZ6wmKzUzlUYc7Qz7OFHi/m1IpCIRu0aqNVKLTGIz586qbZ0yfX9MvHV5jrqwc8wyJjtiMyU/qi28PONJXoAcroMO8q8gu/kD4kpBcmnUzGKtSwppK3S3IXPTcd9+Q9Vg+0NfGUUSPqct3V33HH4n9fmSMS6rGi3FbVT/iu1/QiIcH+W9k6ehAP+/z9ueMQGaAEI71J+Tyc5Q24GK6DdRgbEH2ucMp6Ql2CiiIRV292W0EhVHnl4QEdTlqNei9IlUw1qXf2tSlOF5vr++v5avmvLTkOT1eU2napVLJtev2vjdnnx8OnR31lM3kcN8+gWViVJQtKN5/zg+mP3ex+M18s5jf0KyrM3VKb/szI14t23t1l01SWbN2STTfZRIgr133IpKGMmdF8iT5MP9XGdLNlvzvXnmdjU8YsqJt36W7x0YlcLnaUztgfmqePWRqWHdudnc+7Np2tPuCRqxm13RKXNmUjlb1xGTGnPNZzkYvtO6otn7g8tgBmfP43pS+6SAXLZ6GRi8zfrw5Ruby93lGxCdr2SnxxXfqlT2DTX1JjngdX+3l++7bM5XRx41JaEuVLdCO/PlL751+y9aPcRhrlXFK6e76eP90+brdLwfZxulpsHn6xHNtVJdk5LQpQ9/bX9cKYKXOrfILr8qOmDjt+um6Sz2YtCcCUvseF/xnbjU1L+UNgs3y10mo+/fjclvoXub2hMoL8Xt6veXr/fPwWMxgx3ew0X9sTxwPRzdP3vwkub+fPrvQ85nqcknTKq+uDNpNvQvHx9unn9c3z7Go2e7jfLFbT7z91AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAvhX/A35khN4Tpx+oAAAAAElFTkSuQmCC"}],GT=[{id:"1b",label:"No Asistire",value:0},{id:"2b",label:"Asistire",value:1},{id:"3b",label:"1 Invitado(s)",value:2},{id:"4b",label:"2 Invitado(s)",value:3}];const HT=()=>Ne("section",{className:"footer-container",children:[L("span",{className:"footer-header",children:"Recomendaciones"}),L("span",{className:"footer-subtext",children:"Es posible hospedarse en lugar de la fiesta"}),L("div",{className:"footer-grid-container",children:KT.map(t=>L(zT,{card:t}))})]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},WT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,p=l&63;u||(p=64,o||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();const d=s<<2|a>>4;if(r.push(d),l!==64){const p=a<<4&240|l>>2;if(r.push(p),h!==64){const y=l<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},XT=function(t){const e=Gw(t);return WT.encodeByteArray(e,!0)},Vu=function(t){return XT(t).replace(/\./g,"")};function Bu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YT(n)||(t[n]=Bu(t[n],e[n]));return t}function YT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Vu(JSON.stringify(n)),Vu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ex(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function tx(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nx(){return typeof self=="object"&&self.self===self}function rx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sx(){return Ur().indexOf("Electron/")>=0}function ox(){const t=Ur();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ax(){return Ur().indexOf("MSAppHost/")>=0}function ux(){return!tx()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hw(){return typeof indexedDB=="object"}function lx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cx,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hx(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new si(i,a,r)}}function hx(t,e){return t.replace(dx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ng(s)&&ng(o)){if(!Kh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ng(t){return t!==null&&typeof t=="object"}function fx(t,e){const n=new px(t,e);return n.subscribe.bind(n)}class px{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pc),i.error===void 0&&(i.error=Pc),i.complete===void 0&&(i.complete=Pc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vx(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yx(t){return t===wr?void 0:t}function vx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=[];var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const Qw={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},Ex=X.INFO,Sx={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Ix=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Sx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class If{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=Ix,this._userLogHandler=null,Sf.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}function Tx(t){Sf.forEach(e=>{e.setLogLevel(t)})}function xx(t,e){for(const n of Sf){let r=null;e&&e.level&&(r=Qw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:X[s].toLowerCase(),message:a,args:o,type:i.name})}}}const _x=(t,e)=>e.some(n=>t instanceof n);let rg,ig;function kx(){return rg||(rg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cx(){return ig||(ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,Gh=new WeakMap,Xw=new WeakMap,Oc=new WeakMap,Tf=new WeakMap;function Ax(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,t)}).catch(()=>{}),Tf.set(e,t),e}function Nx(t){if(Gh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gh.set(t,e)}let Hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dx(t){Hh=t(Hh)}function bx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lc(this),e,...n);return Xw.set(r,e.sort?e.sort():[e]),jn(r)}:Cx().includes(t)?function(...e){return t.apply(Lc(this),e),jn(Ww.get(this))}:function(...e){return jn(t.apply(Lc(this),e))}}function $x(t){return typeof t=="function"?bx(t):(t instanceof IDBTransaction&&Nx(t),_x(t,kx())?new Proxy(t,Hh):t)}function jn(t){if(t instanceof IDBRequest)return Ax(t);if(Oc.has(t))return Oc.get(t);const e=$x(t);return e!==t&&(Oc.set(t,e),Tf.set(e,t)),e}const Lc=t=>Tf.get(t);function Rx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=jn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jn(o.result),u.oldVersion,u.newVersion,jn(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const Px=["get","getKey","getAll","getAllKeys","count"],Ox=["put","add","delete","clear"],Mc=new Map;function sg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mc.get(e))return Mc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ox.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Px.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Mc.set(e,s),s}Dx(t=>({...t,get:(e,n,r)=>sg(e,n)||t.get(e,n,r),has:(e,n)=>!!sg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",og="0.7.31";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new If("@firebase/app"),Fx="@firebase/app-compat",Vx="@firebase/analytics-compat",Bx="@firebase/analytics",Ux="@firebase/app-check-compat",zx="@firebase/app-check",jx="@firebase/auth",qx="@firebase/auth-compat",Kx="@firebase/database",Gx="@firebase/database-compat",Hx="@firebase/functions",Qx="@firebase/functions-compat",Wx="@firebase/installations",Xx="@firebase/installations-compat",Yx="@firebase/messaging",Jx="@firebase/messaging-compat",Zx="@firebase/performance",e_="@firebase/performance-compat",t_="@firebase/remote-config",n_="@firebase/remote-config-compat",r_="@firebase/storage",i_="@firebase/storage-compat",s_="@firebase/firestore",o_="@firebase/firestore-compat",a_="firebase",u_="9.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]",l_={[Qh]:"fire-core",[Fx]:"fire-core-compat",[Bx]:"fire-analytics",[Vx]:"fire-analytics-compat",[zx]:"fire-app-check",[Ux]:"fire-app-check-compat",[jx]:"fire-auth",[qx]:"fire-auth-compat",[Kx]:"fire-rtdb",[Gx]:"fire-rtdb-compat",[Hx]:"fire-fn",[Qx]:"fire-fn-compat",[Wx]:"fire-iid",[Xx]:"fire-iid-compat",[Yx]:"fire-fcm",[Jx]:"fire-fcm-compat",[Zx]:"fire-perf",[e_]:"fire-perf-compat",[t_]:"fire-rc",[n_]:"fire-rc-compat",[r_]:"fire-gcs",[i_]:"fire-gcs-compat",[s_]:"fire-fst",[o_]:"fire-fst-compat","fire-js":"fire-js",[a_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Map,_o=new Map;function Uu(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yw(t,e){t.container.addOrOverwriteComponent(e)}function Hi(t){const e=t.name;if(_o.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;_o.set(e,t);for(const n of Qn.values())Uu(n,t);return!0}function Jw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function c_(t,e,n=qr){Jw(t,e).clearInstance(n)}function h_(){_o.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Wn=new kl("app","Firebase",d_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=u_;function Zw(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:qr,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Wn.create("bad-app-name",{appName:String(r)});const i=Qn.get(r);if(i){if(Kh(t,i.options)&&Kh(n,i.config))return i;throw Wn.create("duplicate-app",{appName:r})}const s=new wx(r);for(const a of _o.values())s.addComponent(a);const o=new f_(t,n,s);return Qn.set(r,o),o}function p_(t=qr){const e=Qn.get(t);if(!e)throw Wn.create("no-app",{appName:t});return e}function m_(){return Array.from(Qn.values())}async function e0(t){const e=t.name;Qn.has(e)&&(Qn.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function qn(t,e,n){var r;let i=(r=l_[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}Hi(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function t0(t,e){if(t!==null&&typeof t!="function")throw Wn.create("invalid-log-argument");xx(t,e)}function n0(t){Tx(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firebase-heartbeat-database",y_=1,ko="firebase-heartbeat-store";let Fc=null;function r0(){return Fc||(Fc=Rx(g_,y_,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ko)}}}).catch(t=>{throw Wn.create("idb-open",{originalErrorMessage:t.message})})),Fc}async function v_(t){var e;try{return(await r0()).transaction(ko).objectStore(ko).get(i0(t))}catch(n){if(n instanceof si)jr.warn(n.message);else{const r=Wn.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});jr.warn(r.message)}}}async function ag(t,e){var n;try{const i=(await r0()).transaction(ko,"readwrite");return await i.objectStore(ko).put(e,i0(t)),i.done}catch(r){if(r instanceof si)jr.warn(r.message);else{const i=Wn.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});jr.warn(i.message)}}}function i0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=1024,E_=30*24*60*60*1e3;class S_{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ug();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=E_}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ug(),{heartbeatsToSend:n,unsentEntries:r}=I_(this._heartbeatsCache.heartbeats),i=Vu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ug(){return new Date().toISOString().substring(0,10)}function I_(t,e=w_){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class T_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hw()?lx().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await v_(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ag(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ag(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lg(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){Hi(new zr("platform-logger",e=>new Lx(e),"PRIVATE")),Hi(new zr("heartbeat",e=>new S_(e),"PRIVATE")),qn(Qh,og,t),qn(Qh,og,"esm2017"),qn("fire-js","")}x_("");var __=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:xf,_DEFAULT_ENTRY_NAME:qr,_addComponent:Uu,_addOrOverwriteComponent:Yw,_apps:Qn,_clearComponents:h_,_components:_o,_getProvider:Jw,_registerComponent:Hi,_removeServiceInstance:c_,deleteApp:e0,getApp:p_,getApps:m_,initializeApp:Zw,onLog:t0,registerVersion:qn,setLogLevel:n0,FirebaseError:si},Symbol.toStringTag,{value:"Module"})),k_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},$,_f=_f||{},V=k_||self;function zu(){}function Wh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Yo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function C_(t){return Object.prototype.hasOwnProperty.call(t,Vc)&&t[Vc]||(t[Vc]=++A_)}var Vc="closure_uid_"+(1e9*Math.random()>>>0),A_=0;function N_(t,e,n){return t.call.apply(t.bind,arguments)}function D_(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function qe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qe=N_:qe=D_,qe.apply(null,arguments)}function Fa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function He(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function or(){this.s=this.s,this.o=this.o}var b_=0;or.prototype.s=!1;or.prototype.na=function(){!this.s&&(this.s=!0,this.M(),b_!=0)&&C_(this)};or.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const s0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},o0=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function $_(t){e:{var e=Tk;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function cg(t){return Array.prototype.concat.apply([],arguments)}function kf(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ju(t){return/^[\s\xa0]*$/.test(t)}var hg=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function rt(t,e){return t.indexOf(e)!=-1}function Bc(t,e){return t<e?-1:t>e?1:0}var it;e:{var dg=V.navigator;if(dg){var fg=dg.userAgent;if(fg){it=fg;break e}}it=""}function Cf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function a0(t){const e={};for(const n in t)e[n]=t[n];return e}var pg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<pg.length;s++)n=pg[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Af(t){return Af[" "](t),t}Af[" "]=zu;function R_(t){var e=L_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var P_=rt(it,"Opera"),Qi=rt(it,"Trident")||rt(it,"MSIE"),l0=rt(it,"Edge"),Xh=l0||Qi,c0=rt(it,"Gecko")&&!(rt(it.toLowerCase(),"webkit")&&!rt(it,"Edge"))&&!(rt(it,"Trident")||rt(it,"MSIE"))&&!rt(it,"Edge"),O_=rt(it.toLowerCase(),"webkit")&&!rt(it,"Edge");function h0(){var t=V.document;return t?t.documentMode:void 0}var qu;e:{var Uc="",zc=function(){var t=it;if(c0)return/rv:([^\);]+)(\)|;)/.exec(t);if(l0)return/Edge\/([\d\.]+)/.exec(t);if(Qi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(O_)return/WebKit\/(\S+)/.exec(t);if(P_)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zc&&(Uc=zc?zc[1]:""),Qi){var jc=h0();if(jc!=null&&jc>parseFloat(Uc)){qu=String(jc);break e}}qu=Uc}var L_={};function M_(){return R_(function(){let t=0;const e=hg(String(qu)).split("."),n=hg("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Bc(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Bc(i[2].length==0,s[2].length==0)||Bc(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Yh;if(V.document&&Qi){var mg=h0();Yh=mg||parseInt(qu,10)||void 0}else Yh=void 0;var F_=Yh,V_=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{V.addEventListener("test",zu,e),V.removeEventListener("test",zu,e)}catch{}return t}();function Ye(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};function Co(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(c0){e:{try{Af(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:B_[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Co.Z.h.call(this)}}He(Co,Ye);var B_={2:"touch",3:"pen",4:"mouse"};Co.prototype.h=function(){Co.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Jo="closure_listenable_"+(1e6*Math.random()|0),U_=0;function z_(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++U_,this.ca=this.fa=!1}function Cl(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Al(t){this.src=t,this.g={},this.h=0}Al.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Zh(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new z_(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function Jh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=s0(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Cl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Zh(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var Nf="closure_lm_"+(1e6*Math.random()|0),qc={};function d0(t,e,n,r,i){if(r&&r.once)return p0(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)d0(t,e[s],n,r,i);return null}return n=$f(n),t&&t[Jo]?t.N(e,n,Yo(r)?!!r.capture:!!r,i):f0(t,e,n,!1,r,i)}function f0(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Yo(i)?!!i.capture:!!i,a=bf(t);if(a||(t[Nf]=a=new Al(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=j_(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)V_||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(g0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function j_(){function t(n){return e.call(t.src,t.listener,n)}var e=q_;return t}function p0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)p0(t,e[s],n,r,i);return null}return n=$f(n),t&&t[Jo]?t.O(e,n,Yo(r)?!!r.capture:!!r,i):f0(t,e,n,!0,r,i)}function m0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)m0(t,e[s],n,r,i);else r=Yo(r)?!!r.capture:!!r,n=$f(n),t&&t[Jo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Zh(s,n,r,i),-1<n&&(Cl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=bf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zh(e,n,r,i)),(n=-1<t?e[t]:null)&&Df(n))}function Df(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Jo])Jh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(g0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bf(e))?(Jh(n,t),n.h==0&&(n.src=null,e[Nf]=null)):Cl(t)}}}function g0(t){return t in qc?qc[t]:qc[t]="on"+t}function q_(t,e){if(t.ca)t=!0;else{e=new Co(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Df(t),t=n.call(r,e)}return t}function bf(t){return t=t[Nf],t instanceof Al?t:null}var Kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function $f(t){return typeof t=="function"?t:(t[Kc]||(t[Kc]=function(e){return t.handleEvent(e)}),t[Kc])}function Le(){or.call(this),this.i=new Al(this),this.P=this,this.I=null}He(Le,or);Le.prototype[Jo]=!0;Le.prototype.removeEventListener=function(t,e,n,r){m0(this,t,e,n,r)};function Ke(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Ye(e,t);else if(e instanceof Ye)e.target=e.target||t;else{var i=e;e=new Ye(r,t),u0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Va(o,r,!0,e)&&i}if(o=e.g=t,i=Va(o,r,!0,e)&&i,i=Va(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Va(o,r,!1,e)&&i}Le.prototype.M=function(){if(Le.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cl(n[r]);delete t.g[e],t.h--}}this.I=null};Le.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Le.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Va(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Jh(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Rf=V.JSON.stringify;function K_(){var t=v0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class G_{constructor(){this.h=this.g=null}add(e,n){const r=y0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var y0=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new H_,t=>t.reset());class H_{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Q_(t){V.setTimeout(()=>{throw t},0)}function Pf(t,e){ed||W_(),td||(ed(),td=!0),v0.add(t,e)}var ed;function W_(){var t=V.Promise.resolve(void 0);ed=function(){t.then(X_)}}var td=!1,v0=new G_;function X_(){for(var t;t=K_();){try{t.h.call(t.g)}catch(n){Q_(n)}var e=y0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}td=!1}function Nl(t,e){Le.call(this),this.h=t||1,this.g=e||V,this.j=qe(this.kb,this),this.l=Date.now()}He(Nl,Le);$=Nl.prototype;$.da=!1;$.S=null;$.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ke(this,"tick"),this.da&&(Of(this),this.start()))}};$.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Of(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}$.M=function(){Nl.Z.M.call(this),Of(this),delete this.g};function Lf(t,e,n){if(typeof t=="function")n&&(t=qe(t,n));else if(t&&typeof t.handleEvent=="function")t=qe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function w0(t){t.g=Lf(()=>{t.g=null,t.i&&(t.i=!1,w0(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Y_ extends or{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:w0(this)}M(){super.M(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ao(t){or.call(this),this.h=t,this.g={}}He(Ao,or);var gg=[];function E0(t,e,n,r){Array.isArray(n)||(n&&(gg[0]=n.toString()),n=gg);for(var i=0;i<n.length;i++){var s=d0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function S0(t){Cf(t.g,function(e,n){this.g.hasOwnProperty(n)&&Df(e)},t),t.g={}}Ao.prototype.M=function(){Ao.Z.M.call(this),S0(this)};Ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Dl(){this.g=!0}Dl.prototype.Aa=function(){this.g=!1};function J_(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Z_(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ni(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+tk(t,n)+(r?" "+r:"")})}function ek(t,e){t.info(function(){return"TIMEOUT: "+e})}Dl.prototype.info=function(){};function tk(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Rf(n)}catch{return e}}var oi={},yg=null;function bl(){return yg=yg||new Le}oi.Ma="serverreachability";function I0(t){Ye.call(this,oi.Ma,t)}He(I0,Ye);function No(t){const e=bl();Ke(e,new I0(e))}oi.STAT_EVENT="statevent";function T0(t,e){Ye.call(this,oi.STAT_EVENT,t),this.stat=e}He(T0,Ye);function st(t){const e=bl();Ke(e,new T0(e,t))}oi.Na="timingevent";function x0(t,e){Ye.call(this,oi.Na,t),this.size=e}He(x0,Ye);function Zo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var $l={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Mf(){}Mf.prototype.h=null;function vg(t){return t.h||(t.h=t.i())}function k0(){}var ea={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ff(){Ye.call(this,"d")}He(Ff,Ye);function Vf(){Ye.call(this,"c")}He(Vf,Ye);var nd;function Rl(){}He(Rl,Mf);Rl.prototype.g=function(){return new XMLHttpRequest};Rl.prototype.i=function(){return{}};nd=new Rl;function ta(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ao(this),this.P=nk,t=Xh?125:void 0,this.W=new Nl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new C0}function C0(){this.i=null,this.g="",this.h=!1}var nk=45e3,rd={},Ku={};$=ta.prototype;$.setTimeout=function(t){this.P=t};function id(t,e,n){t.K=1,t.v=Ol(pn(e)),t.s=n,t.U=!0,A0(t,null)}function A0(t,e){t.F=Date.now(),na(t),t.A=pn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),O0(n.h,"t",r),t.C=0,n=t.l.H,t.h=new C0,t.g=t1(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Y_(qe(t.Ia,t,t.g),t.O)),E0(t.V,t.g,"readystatechange",t.gb),e=t.H?a0(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),No(),J_(t.j,t.u,t.A,t.m,t.X,t.s)}$.gb=function(t){t=t.target;const e=this.L;e&&un(t)==3?e.l():this.Ia(t)};$.Ia=function(t){try{if(t==this.g)e:{const c=un(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||Xh||this.g&&(this.h.h||this.g.ga()||Ig(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?No(3):No(2)),Pl(this);var n=this.g.ba();this.N=n;t:if(N0(this)){var r=Ig(this.g);t="";var i=r.length,s=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Nr(this),Zs(this);var o="";break t}this.h.i=new V.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,Z_(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ju(a)){var l=a;break t}}l=null}if(n=l)Ni(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sd(this,n);else{this.i=!1,this.o=3,st(12),Nr(this),Zs(this);break e}}this.U?(D0(this,c,o),Xh&&this.i&&c==3&&(E0(this.V,this.W,"tick",this.fb),this.W.start())):(Ni(this.j,this.m,o,null),sd(this,o)),c==4&&Nr(this),this.i&&!this.I&&(c==4?Y0(this.l,this):(this.i=!1,na(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,st(12)):(this.o=0,st(13)),Nr(this),Zs(this)}}}catch{}finally{}};function N0(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function D0(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=rk(t,n),i==Ku){e==4&&(t.o=4,st(14),r=!1),Ni(t.j,t.m,null,"[Incomplete Response]");break}else if(i==rd){t.o=4,st(15),Ni(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ni(t.j,t.m,i,null),sd(t,i);N0(t)&&i!=Ku&&i!=rd&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,st(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qf(e),e.L=!0,st(11))):(Ni(t.j,t.m,n,"[Invalid Chunked Response]"),Nr(t),Zs(t))}$.fb=function(){if(this.g){var t=un(this.g),e=this.g.ga();this.C<e.length&&(Pl(this),D0(this,t,e),this.i&&t!=4&&na(this))}};function rk(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ku:(n=Number(e.substring(n,r)),isNaN(n)?rd:(r+=1,r+n>e.length?Ku:(e=e.substr(r,n),t.C=r+n,e)))}$.cancel=function(){this.I=!0,Nr(this)};function na(t){t.Y=Date.now()+t.P,b0(t,t.P)}function b0(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Zo(qe(t.eb,t),e)}function Pl(t){t.B&&(V.clearTimeout(t.B),t.B=null)}$.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ek(this.j,this.A),this.K!=2&&(No(),st(17)),Nr(this),this.o=2,Zs(this)):b0(this,this.Y-t)};function Zs(t){t.l.G==0||t.I||Y0(t.l,t)}function Nr(t){Pl(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Of(t.W),S0(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function sd(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||od(n.i,t))){if(n.I=t.N,!t.J&&od(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Wu(n),Fl(n);else break e;Hf(n),st(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Zo(qe(n.ab,n),6e3));if(1>=F0(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Dr(n,11)}else if((t.J||n.g==t)&&Wu(n),!ju(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.U=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.J=l[1],n.la=l[2];const c=l[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=l[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;!s.g&&(rt(y,"spdy")||rt(y,"quic")||rt(y,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(zf(s,s.h),s.h=null))}if(r.D){const E=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.sa=E,oe(r.F,r.D,E))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=e1(r,r.H?r.la:null,r.W),o.J){V0(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Pl(a),na(a)),r.g=o}else W0(r);0<n.l.length&&Vl(n)}else l[0]!="stop"&&l[0]!="close"||Dr(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Dr(n,7):Gf(n):l[0]!="noop"&&n.j&&n.j.wa(l),n.A=0)}}No(4)}catch{}}function ik(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Wh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Bf(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Wh(t)||typeof t=="string")o0(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Wh(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=ik(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ls(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ls)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}$=ls.prototype;$.R=function(){Uf(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};$.T=function(){return Uf(this),this.g.concat()};function Uf(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Kr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Kr(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}$.get=function(t,e){return Kr(this.h,t)?this.h[t]:e};$.set=function(t,e){Kr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};$.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var $0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sk(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Gr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Gr){this.g=e!==void 0?e:t.g,Gu(this,t.j),this.s=t.s,Hu(this,t.i),Qu(this,t.m),this.l=t.l,e=t.h;var n=new Do;n.i=e.i,e.g&&(n.g=new ls(e.g),n.h=e.h),wg(this,n),this.o=t.o}else t&&(n=String(t).match($0))?(this.g=!!e,Gu(this,n[1]||"",!0),this.s=eo(n[2]||""),Hu(this,n[3]||"",!0),Qu(this,n[4]),this.l=eo(n[5]||"",!0),wg(this,n[6]||"",!0),this.o=eo(n[7]||"")):(this.g=!!e,this.h=new Do(null,this.g))}Gr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Us(e,Eg,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Us(e,Eg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Us(n,n.charAt(0)=="/"?ck:lk,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Us(n,dk)),t.join("")};function pn(t){return new Gr(t)}function Gu(t,e,n){t.j=n?eo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Hu(t,e,n){t.i=n?eo(e,!0):e}function Qu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function wg(t,e,n){e instanceof Do?(t.h=e,fk(t.h,t.g)):(n||(e=Us(e,hk)),t.h=new Do(e,t.g))}function oe(t,e,n){t.h.set(e,n)}function Ol(t){return oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ok(t){return t instanceof Gr?pn(t):new Gr(t,void 0)}function ak(t,e,n,r){var i=new Gr(null,void 0);return t&&Gu(i,t),e&&Hu(i,e),n&&Qu(i,n),r&&(i.l=r),i}function eo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Us(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,uk),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uk(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Eg=/[#\/\?@]/g,lk=/[#\?:]/g,ck=/[#\?]/g,hk=/[#\?@]/g,dk=/#/g;function Do(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ar(t){t.g||(t.g=new ls,t.h=0,t.i&&sk(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}$=Do.prototype;$.add=function(t,e){ar(this),this.i=null,t=cs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function R0(t,e){ar(t),e=cs(t,e),Kr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Kr(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Uf(t)))}function P0(t,e){return ar(t),e=cs(t,e),Kr(t.g.h,e)}$.forEach=function(t,e){ar(this),this.g.forEach(function(n,r){o0(n,function(i){t.call(e,i,r,this)},this)},this)};$.T=function(){ar(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};$.R=function(t){ar(this);var e=[];if(typeof t=="string")P0(this,t)&&(e=cg(e,this.g.get(cs(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=cg(e,t[n])}return e};$.set=function(t,e){return ar(this),this.i=null,t=cs(this,t),P0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};$.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function O0(t,e,n){R0(t,e),0<n.length&&(t.i=null,t.g.set(cs(t,e),kf(n)),t.h+=n.length)}$.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function cs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function fk(t,e){e&&!t.j&&(ar(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(R0(this,r),O0(this,i,n))},t)),t.j=e}var pk=class{constructor(t,e){this.h=t,this.g=e}};function L0(t){this.l=t||mk,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ea&&V.g.Ea()&&V.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mk=10;function M0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function F0(t){return t.h?1:t.g?t.g.size:0}function od(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function zf(t,e){t.g?t.g.add(e):t.h=e}function V0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}L0.prototype.cancel=function(){if(this.i=B0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function B0(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return kf(t.i)}function jf(){}jf.prototype.stringify=function(t){return V.JSON.stringify(t,void 0)};jf.prototype.parse=function(t){return V.JSON.parse(t,void 0)};function gk(){this.g=new jf}function yk(t,e,n){const r=n||"";try{Bf(t,function(i,s){let o=i;Yo(i)&&(o=Rf(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vk(t,e){const n=new Dl;if(V.Image){const r=new Image;r.onload=Fa(Ba,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fa(Ba,n,r,"TestLoadImage: error",!1,e),r.onabort=Fa(Ba,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fa(Ba,n,r,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ba(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ra(t){this.l=t.$b||null,this.j=t.ib||!1}He(ra,Mf);ra.prototype.g=function(){return new Ll(this.l,this.j)};ra.prototype.i=function(t){return function(){return t}}({});function Ll(t,e){Le.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=qf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(Ll,Le);var qf=0;$=Ll.prototype;$.open=function(t,e){if(this.readyState!=qf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bo(this)};$.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||V).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};$.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=qf};$.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof V.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;U0(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function U0(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}$.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ia(this):bo(this),this.readyState==3&&U0(this)}};$.Ua=function(t){this.g&&(this.response=this.responseText=t,ia(this))};$.Ta=function(t){this.g&&(this.response=t,ia(this))};$.ha=function(){this.g&&ia(this)};function ia(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bo(t)}$.setRequestHeader=function(t,e){this.v.append(t,e)};$.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};$.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function bo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var wk=V.JSON.parse;function xe(t){Le.call(this),this.headers=new ls,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=z0,this.K=this.L=!1}He(xe,Le);var z0="",Ek=/^https?$/i,Sk=["POST","PUT"];$=xe.prototype;$.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nd.g(),this.C=this.u?vg(this.u):vg(nd),this.g.onreadystatechange=qe(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){Sg(this,s);return}t=n||"";const i=new ls(this.headers);r&&Bf(r,function(s,o){i.set(o,s)}),r=$_(i.T()),n=V.FormData&&t instanceof V.FormData,!(0<=s0(Sk,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{K0(this),0<this.B&&((this.K=Ik(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qe(this.pa,this)):this.A=Lf(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Sg(this,s)}};function Ik(t){return Qi&&M_()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function Tk(t){return t.toLowerCase()=="content-type"}$.pa=function(){typeof _f!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ke(this,"timeout"),this.abort(8))};function Sg(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,j0(t),Ml(t)}function j0(t){t.D||(t.D=!0,Ke(t,"complete"),Ke(t,"error"))}$.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ke(this,"complete"),Ke(this,"abort"),Ml(this))};$.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ml(this,!0)),xe.Z.M.call(this)};$.Fa=function(){this.s||(this.F||this.v||this.l?q0(this):this.cb())};$.cb=function(){q0(this)};function q0(t){if(t.h&&typeof _f!="undefined"&&(!t.C[1]||un(t)!=4||t.ba()!=2)){if(t.v&&un(t)==4)Lf(t.Fa,0,t);else if(Ke(t,"readystatechange"),un(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match($0)[1]||null;if(!i&&V.self&&V.self.location){var s=V.self.location.protocol;i=s.substr(0,s.length-1)}r=!Ek.test(i?i.toLowerCase():"")}n=r}if(n)Ke(t,"complete"),Ke(t,"success");else{t.m=6;try{var o=2<un(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",j0(t)}}finally{Ml(t)}}}}function Ml(t,e){if(t.g){K0(t);const n=t.g,r=t.C[0]?zu:null;t.g=null,t.C=null,e||Ke(t,"ready");try{n.onreadystatechange=r}catch{}}}function K0(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}function un(t){return t.g?t.g.readyState:0}$.ba=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}};$.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};$.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),wk(e)}};function Ig(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case z0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}$.Da=function(){return this.m};$.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function xk(t){let e="";return Cf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Kf(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=xk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):oe(t,e,n))}function Ds(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function G0(t){this.za=0,this.l=[],this.h=new Dl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ds("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ds("baseRetryDelayMs",5e3,t),this.$a=Ds("retryDelaySeedMs",1e4,t),this.Ya=Ds("forwardChannelMaxRetries",2,t),this.ra=Ds("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new L0(t&&t.concurrentRequestLimit),this.Ca=new gk,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}$=G0.prototype;$.ma=8;$.G=1;function Gf(t){if(H0(t),t.G==3){var e=t.V++,n=pn(t.F);oe(n,"SID",t.J),oe(n,"RID",e),oe(n,"TYPE","terminate"),sa(t,n),e=new ta(t,t.h,e,void 0),e.K=2,e.v=Ol(pn(n)),n=!1,V.navigator&&V.navigator.sendBeacon&&(n=V.navigator.sendBeacon(e.v.toString(),"")),!n&&V.Image&&(new Image().src=e.v,n=!0),n||(e.g=t1(e.l,null),e.g.ea(e.v)),e.F=Date.now(),na(e)}Z0(t)}$.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Fl(t){t.g&&(Qf(t),t.g.cancel(),t.g=null)}function H0(t){Fl(t),t.u&&(V.clearTimeout(t.u),t.u=null),Wu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function Gc(t,e){t.l.push(new pk(t.Za++,e)),t.G==3&&Vl(t)}function Vl(t){M0(t.i)||t.m||(t.m=!0,Pf(t.Ha,t),t.C=0)}function _k(t,e){return F0(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Zo(qe(t.Ha,t,e),J0(t,t.C)),t.C++,!0)}$.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new ta(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=a0(s),u0(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Q0(this,i,e),n=pn(this.F),oe(n,"RID",t),oe(n,"CVER",22),this.D&&oe(n,"X-HTTP-Session-Id",this.D),sa(this,n),this.o&&s&&Kf(n,this.o,s),zf(this.i,i),this.Ra&&oe(n,"TYPE","init"),this.ja?(oe(n,"$req",e),oe(n,"SID","null"),i.$=!0,id(i,n,null)):id(i,n,e),this.G=2}}else this.G==3&&(t?Tg(this,t):this.l.length==0||M0(this.i)||Tg(this))};function Tg(t,e){var n;e?n=e.m:n=t.V++;const r=pn(t.F);oe(r,"SID",t.J),oe(r,"RID",n),oe(r,"AID",t.U),sa(t,r),t.o&&t.s&&Kf(r,t.o,t.s),n=new ta(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Q0(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zf(t.i,n),id(n,r,e)}function sa(t,e){t.j&&Bf({},function(n,r){oe(e,r,n)})}function Q0(t,e,n){n=Math.min(t.l.length,n);var r=t.j?qe(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].h;const c=i[u].g;if(l-=s,0>l)s=Math.max(0,i[u].h-100),a=!1;else try{yk(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function W0(t){t.g||t.u||(t.Y=1,Pf(t.Ga,t),t.A=0)}function Hf(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Zo(qe(t.Ga,t),J0(t,t.A)),t.A++,!0)}$.Ga=function(){if(this.u=null,X0(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Zo(qe(this.bb,this),t)}};$.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,st(10),Fl(this),X0(this))};function Qf(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function X0(t){t.g=new ta(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=pn(t.oa);oe(e,"RID","rpc"),oe(e,"SID",t.J),oe(e,"CI",t.N?"0":"1"),oe(e,"AID",t.U),sa(t,e),oe(e,"TYPE","xmlhttp"),t.o&&t.s&&Kf(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ol(pn(e)),n.s=null,n.U=!0,A0(n,t)}$.ab=function(){this.v!=null&&(this.v=null,Fl(this),Hf(this),st(19))};function Wu(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function Y0(t,e){var n=null;if(t.g==e){Wu(t),Qf(t),t.g=null;var r=2}else if(od(t.i,e))n=e.D,V0(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=bl(),Ke(r,new x0(r,n)),Vl(t)}else W0(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&_k(t,e)||r==2&&Hf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Dr(t,5);break;case 4:Dr(t,10);break;case 3:Dr(t,6);break;default:Dr(t,2)}}}function J0(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Dr(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=qe(t.jb,t);n||(n=new Gr("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||Gu(n,"https"),Ol(n)),vk(n.toString(),r)}else st(2);t.G=0,t.j&&t.j.va(e),Z0(t),H0(t)}$.jb=function(t){t?(this.h.info("Successfully pinged google.com"),st(2)):(this.h.info("Failed to ping google.com"),st(1))};function Z0(t){t.G=0,t.I=-1,t.j&&((B0(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,kf(t.l),t.l.length=0),t.j.ua())}function e1(t,e,n){let r=ok(n);if(r.i!="")e&&Hu(r,e+"."+r.i),Qu(r,r.m);else{const i=V.location;r=ak(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Cf(t.aa,function(i,s){oe(r,s,i)}),e=t.D,n=t.sa,e&&n&&oe(r,e,n),oe(r,"VER",t.ma),sa(t,r),r}function t1(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new xe(new ra({ib:!0})):new xe(t.qa),e.L=t.H,e}function n1(){}$=n1.prototype;$.xa=function(){};$.wa=function(){};$.va=function(){};$.ua=function(){};$.Oa=function(){};function Xu(){if(Qi&&!(10<=Number(F_)))throw Error("Environmental error: no available transport.")}Xu.prototype.g=function(t,e){return new _t(t,e)};function _t(t,e){Le.call(this),this.g=new G0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ju(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ju(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new hs(this)}He(_t,Le);_t.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Pf(qe(t.hb,t,e))),st(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=e1(t,null,t.W),Vl(t)};_t.prototype.close=function(){Gf(this.g)};_t.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Gc(this.g,e)}else this.v?(e={},e.__data__=Rf(t),Gc(this.g,e)):Gc(this.g,t)};_t.prototype.M=function(){this.g.j=null,delete this.j,Gf(this.g),delete this.g,_t.Z.M.call(this)};function r1(t){Ff.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}He(r1,Ff);function i1(){Vf.call(this),this.status=1}He(i1,Vf);function hs(t){this.g=t}He(hs,n1);hs.prototype.xa=function(){Ke(this.g,"a")};hs.prototype.wa=function(t){Ke(this.g,new r1(t))};hs.prototype.va=function(t){Ke(this.g,new i1)};hs.prototype.ua=function(){Ke(this.g,"b")};Xu.prototype.createWebChannel=Xu.prototype.g;_t.prototype.send=_t.prototype.u;_t.prototype.open=_t.prototype.m;_t.prototype.close=_t.prototype.close;$l.NO_ERROR=0;$l.TIMEOUT=8;$l.HTTP_ERROR=6;_0.COMPLETE="complete";k0.EventType=ea;ea.OPEN="a";ea.CLOSE="b";ea.ERROR="c";ea.MESSAGE="d";Le.prototype.listen=Le.prototype.N;xe.prototype.listenOnce=xe.prototype.O;xe.prototype.getLastError=xe.prototype.La;xe.prototype.getLastErrorCode=xe.prototype.Da;xe.prototype.getStatus=xe.prototype.ba;xe.prototype.getResponseJson=xe.prototype.Qa;xe.prototype.getResponseText=xe.prototype.ga;xe.prototype.send=xe.prototype.ea;var kk=function(){return new Xu},Ck=function(){return bl()},Hc=$l,Ak=_0,Nk=oi,xg={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Dk=ra,Ua=k0,bk=xe;const _g="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new If("@firebase/firestore");function ad(){return Xn.logLevel}function $k(t){Xn.setLogLevel(t)}function T(t,...e){if(Xn.logLevel<=X.DEBUG){const n=e.map(Wf);Xn.debug(`Firestore (${ds}): ${t}`,...n)}}function we(t,...e){if(Xn.logLevel<=X.ERROR){const n=e.map(Wf);Xn.error(`Firestore (${ds}): ${t}`,...n)}}function Wi(t,...e){if(Xn.logLevel<=X.WARN){const n=e.map(Wf);Xn.warn(`Firestore (${ds}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(t="Unexpected state"){const e=`FIRESTORE (${ds}) INTERNAL ASSERTION FAILED: `+t;throw we(e),new Error(e)}function F(t,e){t||R()}function Rk(t,e){t||R()}function N(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class I extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}shutdown(){}}class Ok{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lk{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Pe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pe,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pe)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(F(typeof r.accessToken=="string"),new s1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return F(e===null||typeof e=="string"),new $e(e)}}class Mk{constructor(e,n,r){this.type="FirstParty",this.user=$e.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Fk{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Mk(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bk{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(F(typeof n.token=="string"),this.p=n.token,new Vk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Uk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function B(t,e){return t<e?-1:t>e?1:0}function Xi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function a1(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new I(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new I(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new I(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ae.fromMillis(Date.now())}static fromDate(e){return ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?B(this.nanoseconds,e.nanoseconds):B(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.timestamp=e}static fromTimestamp(e){return new M(e)}static min(){return new M(new ae(0,0))}static max(){return new M(new ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r){n===void 0?n=0:n>e.length&&R(),r===void 0?r=e.length-n:r>e.length-n&&R(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class H extends $o{construct(e,n,r){return new H(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new I(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new H(n)}static emptyPath(){return new H([])}}const zk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends $o{construct(e,n,r){return new Ee(e,n,r)}static isValidIdentifier(e){return zk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ee(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new I(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new I(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new I(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new I(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ee(n)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(H.fromString(e))}static fromName(e){return new A(H.fromString(e).popFirst(5))}static empty(){return new A(H.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&H.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return H.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new H(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ud(t){return t.fields.find(e=>e.kind===2)}function Er(t){return t.fields.filter(e=>e.kind!==2)}u1.UNKNOWN_ID=-1;class jk{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yu(0,kt.min())}}function l1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=M.fromTimestamp(r===1e9?new ae(n+1,0):new ae(n,r));return new kt(i,A.empty(),e)}function c1(t){return new kt(t.readTime,t.key,-1)}class kt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kt(M.min(),A.empty(),-1)}static max(){return new kt(M.max(),A.empty(),-1)}}function Xf(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:B(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ur(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==h1)throw t;T("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):v.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):v.reject(n)}static resolve(e){return new v((n,r)=>{n(e)})}static reject(e){return new v((n,r)=>{r(e)})}static waitFor(e){return new v((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=v.resolve(!1);for(const r of e)n=n.next(i=>i?v.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new v((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new v((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.T=new Pe,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{n.error?this.T.reject(new to(e,n.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Yf(r.target.error);this.T.reject(new to(e,i))}}static open(e,n,r,i){try{return new Bl(n,e.transaction(i,r))}catch(s){throw new to(n,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Kk(n)}}class Ut{constructor(e,n,r){this.name=e,this.version=n,this.P=r,Ut.v(Ur())===12.2&&we("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return T("SimpleDb","Removing database:",e),Sr(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!Hw())return!1;if(Ut.S())return!0;const e=Ur(),n=Ut.v(e),r=0<n&&n<10,i=Ut.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.C)==="YES"}static N(e,n){return e.store(n)}static v(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async k(e){return this.db||(T("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new to(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new I(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new I(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new to(e,o))},i.onupgradeneeded=s=>{T("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.P.M(o,i.transaction,s.oldVersion,this.version).next(()=>{T("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.O&&(this.db.onversionchange=n=>this.O(n)),this.db}F(e){this.O=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Bl.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.R(),l)).catch(l=>(a.abort(l),v.reject(l))).toPromise();return u.catch(()=>{}),await a.A,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&o<3;if(T("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class qk{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Sr(this.$.delete())}}class to extends I{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lr(t){return t.name==="IndexedDbTransactionError"}class Kk{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(T("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sr(r)}add(e){return T("SimpleDb","ADD",this.store.name,e,e),Sr(this.store.add(e))}get(e){return Sr(this.store.get(e)).next(n=>(n===void 0&&(n=null),T("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return T("SimpleDb","DELETE",this.store.name,e),Sr(this.store.delete(e))}count(){return T("SimpleDb","COUNT",this.store.name),Sr(this.store.count())}K(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new v((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new v((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}W(e,n){T("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Y(e){const n=this.cursor({});return new v((r,i)=>{n.onerror=s=>{const o=Yf(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new v((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new qk(a),l=n(a.primaryKey,a.value,u);if(l instanceof v){const c=l.catch(h=>(u.done(),v.reject(h)));r.push(c)}u.isDone?i():u.U===null?a.continue():a.continue(u.U)}}).next(()=>v.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Sr(t){return new v((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Yf(r.target.error);n(i)}})}let kg=!1;function Yf(t){const e=Ut.v(Ur());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new I("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kg||(kg=!0,setTimeout(()=>{throw r},0)),r}}return t}class Gk{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}Z(e){T("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{T("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(n){lr(n)?T("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ur(n)}await this.Z(1)})}}class Hk{constructor(e,n){this.localStore=e,this.persistence=n}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.et(n,e))}et(e,n){const r=new Set;let i=n,s=!0;return v.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return T("IndexBackiller",`Processing collection: ${o}`),this.nt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}nt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.st(i,s)).next(a=>(T("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}st(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=c1(s);Xf(o,r)>0&&(r=o)}),new kt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ft.ot=-1;class pe{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Be.RED,this.left=i!=null?i:Be.EMPTY,this.right=s!=null?s:Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Be(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Be.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();const e=this.left.check();if(e!==this.right.check())throw R();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Be(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Z)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Z(this.comparator);return n.data=e,n}}class Ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.fields=e,e.sort(Ee.comparator)}static empty(){return new Tt([])}unionWith(e){let n=new Z(Ee.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ce(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ce(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return B(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const Wk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(t){if(F(!!t),typeof t=="string"){let e=0;const n=Wk.exec(t);if(F(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fe(t.seconds),nanos:fe(t.nanos)}}function fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?Ce.fromBase64String(t):Ce.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function p1(t){const e=t.mapValue.fields.__previous_value__;return Jf(e)?p1(e):e}function Ro(t){const e=Yn(t.mapValue.fields.__local_write_time__.timestampValue);return new ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class mn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){return t==null}function Po(t){return t===0&&1/t==-1/0}function m1(t){return typeof t=="number"&&Number.isInteger(t)&&!Po(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ou={nullValue:"NULL_VALUE"};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jf(t)?4:g1(t)?9007199254740991:10:R()}function en(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ro(t).isEqual(Ro(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Yn(r.timestampValue),o=Yn(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Hr(r.bytesValue).isEqual(Hr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return fe(r.geoPointValue.latitude)===fe(i.geoPointValue.latitude)&&fe(r.geoPointValue.longitude)===fe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fe(r.integerValue)===fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=fe(r.doubleValue),o=fe(i.doubleValue);return s===o?Po(s)===Po(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Xi(t.arrayValue.values||[],e.arrayValue.values||[],en);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Cg(s)!==Cg(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!en(s[a],o[a])))return!1;return!0}(t,e);default:return R()}}function Oo(t,e){return(t.values||[]).find(n=>en(n,e))!==void 0}function Jn(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return B(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return B(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=fe(i.integerValue||i.doubleValue),a=fe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Ng(t.timestampValue,e.timestampValue);case 4:return Ng(Ro(t),Ro(e));case 5:return B(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Hr(i),a=Hr(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=B(o[u],a[u]);if(l!==0)return l}return B(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=B(fe(i.latitude),fe(s.latitude));return o!==0?o:B(fe(i.longitude),fe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=Jn(o[u],a[u]);if(l)return l}return B(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Pn.mapValue&&s===Pn.mapValue)return 0;if(i===Pn.mapValue)return 1;if(s===Pn.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const h=B(a[c],l[c]);if(h!==0)return h;const d=Jn(o[a[c]],u[l[c]]);if(d!==0)return d}return B(a.length,l.length)}(t.mapValue,e.mapValue);default:throw R()}}function Ng(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return B(t,e);const n=Yn(t),r=Yn(e),i=B(n.seconds,r.seconds);return i!==0?i:B(n.nanos,r.nanos)}function Mi(t){return ld(t)}function ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Yn(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,A.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=ld(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${ld(r.fields[a])}`;return s+"}"}(t.mapValue):R();var e,n}function Wr(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cd(t){return!!t&&"integerValue"in t}function Lo(t){return!!t&&"arrayValue"in t}function Dg(t){return!!t&&"nullValue"in t}function bg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function no(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ai(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=no(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=no(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Yk(t){return"nullValue"in t?ou:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wr(mn.empty(),A.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:R()}function Jk(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wr(mn.empty(),A.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Pn:R()}function $g(t,e){const n=Jn(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Rg(t,e){const n=Jn(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.value=e}static empty(){return new Ue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=no(n)}setAll(e){let n=Ee.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=no(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];au(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ai(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ue(no(this.value))}}function y1(t){const e=[];return ai(t.fields,(n,r)=>{const i=new Ee([n]);if(au(r)){const s=y1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ee(e,0,M.min(),M.min(),Ue.empty(),0)}static newFoundDocument(e,n,r){return new ee(e,1,n,M.min(),r,0)}static newNoDocument(e,n){return new ee(e,2,n,M.min(),Ue.empty(),0)}static newUnknownDocument(e,n){return new ee(e,3,n,M.min(),Ue.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=M.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ee&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ee(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function Pg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zk(t,e,n,r,i,s,o)}function Xr(t){const e=N(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Mi(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),oa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mi(r)).join(",")),e.ut=n}return e.ut}function eC(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Mi(r.value)}`;var r}).join(", ")}]`),oa(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Mi(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Mi(n)).join(",")),`Target(${e})`}function aa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!uC(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!en(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fg(t.startAt,e.startAt)&&Fg(t.endAt,e.endAt)}function Ju(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zu(t,e){return t.filters.filter(n=>n instanceof ze&&n.field.isEqual(e))}function Og(t,e,n){let r=ou,i=!0;for(const s of Zu(t,e)){let o=ou,a=!0;switch(s.op){case"<":case"<=":o=Yk(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ou}$g({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];$g({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Lg(t,e,n){let r=Pn,i=!0;for(const s of Zu(t,e)){let o=Pn,a=!0;switch(s.op){case">=":case">":o=Jk(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Pn}Rg({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Rg({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class ze extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new tC(e,n,r):n==="array-contains"?new iC(e,r):n==="in"?new sC(e,r):n==="not-in"?new oC(e,r):n==="array-contains-any"?new aC(e,r):new ze(e,n,r)}static ct(e,n,r){return n==="in"?new nC(e,r):new rC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(Jn(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.at(Jn(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return R()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tC extends ze{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.at(n)}}class nC extends ze{constructor(e,n){super(e,"in",n),this.keys=v1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rC extends ze{constructor(e,n){super(e,"not-in",n),this.keys=v1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class iC extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lo(n)&&Oo(n.arrayValue,this.value)}}class sC extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class oC extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Oo(this.value.arrayValue,n)}}class aC extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oo(this.value.arrayValue,r))}}class Zn{constructor(e,n){this.position=e,this.inclusive=n}}class Fi{constructor(e,n="asc"){this.field=e,this.dir=n}}function uC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Mg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=A.comparator(A.fromName(o.referenceValue),n.key):r=Jn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!en(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}}function w1(t,e,n,r,i,s,o,a){return new wn(t,e,n,r,i,s,o,a)}function fs(t){return new wn(t)}function Vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ep(t){for(const e of t.filters)if(e.ht())return e.field;return null}function tp(t){return t.collectionGroup!==null}function Yi(t){const e=N(t);if(e.lt===null){e.lt=[];const n=ep(e),r=Zf(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new Fi(n)),e.lt.push(new Fi(Ee.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Fi(Ee.keyField(),s))}}}return e.lt}function vt(t){const e=N(t);if(!e.ft)if(e.limitType==="F")e.ft=Pg(e.path,e.collectionGroup,Yi(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Yi(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Fi(s.field,o))}const r=e.endAt?new Zn(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Zn(e.startAt.position,e.startAt.inclusive):null;e.ft=Pg(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function el(t,e,n){return new wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ua(t,e){return aa(vt(t),vt(e))&&t.limitType===e.limitType}function E1(t){return`${Xr(vt(t))}|lt:${t.limitType}`}function hd(t){return`Query(target=${eC(vt(t))}; limitType=${t.limitType})`}function np(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):A.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Mg(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Yi(n),r)||n.endAt&&!function(i,s,o){const a=Mg(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Yi(n),r))}(t,e)}function S1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function I1(t){return(e,n)=>{let r=!1;for(const i of Yi(t)){const s=lC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lC(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?Jn(a,u):R()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return R()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Po(e)?"-0":e}}function x1(t){return{integerValue:""+t}}function _1(t,e){return m1(e)?x1(e):T1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this._=void 0}}function cC(t,e,n){return t instanceof Ji?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Yr?C1(t,e):t instanceof Jr?A1(t,e):function(r,i){const s=k1(r,i),o=Bg(s)+Bg(r._t);return cd(s)&&cd(r._t)?x1(o):T1(r.wt,o)}(t,e)}function hC(t,e,n){return t instanceof Yr?C1(t,e):t instanceof Jr?A1(t,e):n}function k1(t,e){return t instanceof Zi?cd(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Ji extends Ul{}class Yr extends Ul{constructor(e){super(),this.elements=e}}function C1(t,e){const n=N1(e);for(const r of t.elements)n.some(i=>en(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jr extends Ul{constructor(e){super(),this.elements=e}}function A1(t,e){let n=N1(e);for(const r of t.elements)n=n.filter(i=>!en(i,r));return{arrayValue:{values:n}}}class Zi extends Ul{constructor(e,n){super(),this.wt=e,this._t=n}}function Bg(t){return fe(t.integerValue||t.doubleValue)}function N1(t){return Lo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.field=e,this.transform=n}}function dC(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Yr&&r instanceof Yr||n instanceof Jr&&r instanceof Jr?Xi(n.elements,r.elements,en):n instanceof Zi&&r instanceof Zi?en(n._t,r._t):n instanceof Ji&&r instanceof Ji}(t.transform,e.transform)}class fC{constructor(e,n){this.version=e,this.transformResults=n}}class le{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new le}static exists(e){return new le(void 0,e)}static updateTime(e){return new le(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zl{}function D1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ms(t.key,le.none()):new ps(t.key,t.data,le.none());{const n=t.data,r=Ue.empty();let i=new Z(Ee.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new En(t.key,r,new Tt(i.toArray()),le.none())}}function pC(t,e,n){t instanceof ps?function(r,i,s){const o=r.value.clone(),a=zg(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof En?function(r,i,s){if(!uu(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=zg(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(b1(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n,r){return t instanceof ps?function(i,s,o,a){if(!uu(i.precondition,s))return o;const u=i.value.clone(),l=jg(i.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof En?function(i,s,o,a){if(!uu(i.precondition,s))return o;const u=jg(i.fieldTransforms,a,s),l=s.data;return l.setAll(b1(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return uu(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function mC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=k1(r.transform,i||null);s!=null&&(n===null&&(n=Ue.empty()),n.set(r.field,s))}return n||null}function Ug(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Xi(n,r,(i,s)=>dC(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ps extends zl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class En extends zl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function b1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;F(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hC(o,a,n[i]))}return r}function jg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,cC(s,o,e))}return r}class ms extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rp extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se,G;function $1(t){switch(t){default:return R();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function R1(t){if(t===void 0)return we("GRPC error has no .code"),w.UNKNOWN;switch(t){case Se.OK:return w.OK;case Se.CANCELLED:return w.CANCELLED;case Se.UNKNOWN:return w.UNKNOWN;case Se.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Se.INTERNAL:return w.INTERNAL;case Se.UNAVAILABLE:return w.UNAVAILABLE;case Se.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Se.NOT_FOUND:return w.NOT_FOUND;case Se.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Se.ABORTED:return w.ABORTED;case Se.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Se.DATA_LOSS:return w.DATA_LOSS;default:return R()}}(G=Se||(Se={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ai(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return f1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new pe(A.comparator);function pt(){return yC}const P1=new pe(A.comparator);function zs(...t){let e=P1;for(const n of t)e=e.insert(n.key,n);return e}function O1(t){let e=P1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qt(){return io()}function L1(){return io()}function io(){return new cr(t=>t.toString(),(t,e)=>t.isEqual(e))}const vC=new pe(A.comparator),wC=new Z(A.comparator);function U(...t){let e=wC;for(const n of t)e=e.add(n);return e}const EC=new Z(B);function jl(){return EC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n)),new ca(M.min(),r,jl(),pt(),U())}}class ha{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new ha(Ce.EMPTY_BYTE_STRING,n,U(),U(),U())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class M1{constructor(e,n){this.targetId=e,this.It=n}}class F1{constructor(e,n,r=Ce.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qg{constructor(){this.Tt=0,this.Et=Gg(),this.At=Ce.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=U(),n=U(),r=U();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:R()}}),new ha(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=Gg()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class SC{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=pt(),this.Bt=Kg(),this.Lt=new Z(B)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:R()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(Ju(s))if(r===0){const o=new A(s.path);this.Kt(n,o,ee.newNoDocument(o,M.min()))}else F(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&Ju(a.target)){const u=new A(a.target.path);this.$t.get(u)!==null||this.Xt(o,u)||this.Kt(o,u,ee.newNoDocument(u,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=U();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ht(u);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new ca(e,n,this.Lt,this.$t,r);return this.$t=pt(),this.Bt=Kg(),this.Lt=new Z(B),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new qg,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new Z(B),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||T("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new qg),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function Kg(){return new pe(A.comparator)}function Gg(){return new pe(A.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),TC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class xC{constructor(e,n){this.databaseId=e,this.dt=n}}function Mo(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V1(t,e){return t.dt?e.toBase64():e.toUint8Array()}function _C(t,e){return Mo(t,e.toTimestamp())}function Oe(t){return F(!!t),M.fromTimestamp(function(e){const n=Yn(e);return new ae(n.seconds,n.nanos)}(t))}function ip(t,e){return function(n){return new H(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function B1(t){const e=H.fromString(t);return F(Q1(e)),e}function Fo(t,e){return ip(t.databaseId,e.path)}function Jt(t,e){const n=B1(e);if(n.get(1)!==t.databaseId.projectId)throw new I(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new I(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(z1(n))}function dd(t,e){return ip(t.databaseId,e)}function U1(t){const e=B1(t);return e.length===4?H.emptyPath():z1(e)}function Vo(t){return new H(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z1(t){return F(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hg(t,e,n){return{name:Fo(t,e),fields:n.value.mapValue.fields}}function j1(t,e,n){const r=Jt(t,e.name),i=Oe(e.updateTime),s=new Ue({mapValue:{fields:e.fields}}),o=ee.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function kC(t,e){return"found"in e?function(n,r){F(!!r.found),r.found.name,r.found.updateTime;const i=Jt(n,r.found.name),s=Oe(r.found.updateTime),o=new Ue({mapValue:{fields:r.found.fields}});return ee.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){F(!!r.missing),F(!!r.readTime);const i=Jt(n,r.missing),s=Oe(r.readTime);return ee.newNoDocument(i,s)}(t,e):R()}function CC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:R()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.dt?(F(l===void 0||typeof l=="string"),Ce.fromBase64String(l||"")):(F(l===void 0||l instanceof Uint8Array),Ce.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=u.code===void 0?w.UNKNOWN:R1(u.code);return new I(l,u.message||"")}(o);n=new F1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jt(t,r.document.name),s=Oe(r.document.updateTime),o=new Ue({mapValue:{fields:r.document.fields}}),a=ee.newFoundDocument(i,s,o),u=r.targetIds||[],l=r.removedTargetIds||[];n=new lu(u,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Jt(t,r.document),s=r.readTime?Oe(r.readTime):M.min(),o=ee.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Jt(t,r.document),s=r.removedTargetIds||[];n=new lu([],s,i,null)}else{if(!("filter"in e))return R();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new gC(i),o=r.targetId;n=new M1(o,s)}}return n}function Bo(t,e){let n;if(e instanceof ps)n={update:Hg(t,e.key,e.value)};else if(e instanceof ms)n={delete:Fo(t,e.key)};else if(e instanceof En)n={update:Hg(t,e.key,e.data),updateMask:PC(e.fieldMask)};else{if(!(e instanceof rp))return R();n={verify:Fo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Ji)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Yr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Zi)return{fieldPath:s.field.canonicalString(),increment:o._t};throw R()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:_C(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:R()}(t,e.precondition)),n}function fd(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?le.updateTime(Oe(i.updateTime)):i.exists!==void 0?le.exists(i.exists):le.none()}(e.currentDocument):le.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)F(o.setToServerValue==="REQUEST_TIME"),a=new Ji;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];a=new Yr(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];a=new Jr(l)}else"increment"in o?a=new Zi(s,o.increment):R();const u=Ee.fromServerFormat(o.fieldPath);return new la(u,a)}(t,i)):[];if(e.update){e.update.name;const i=Jt(t,e.update.name),s=new Ue({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new Tt(u.map(l=>Ee.fromServerFormat(l)))}(e.updateMask);return new En(i,s,o,n,r)}return new ps(i,s,n,r)}if(e.delete){const i=Jt(t,e.delete);return new ms(i,n)}if(e.verify){const i=Jt(t,e.verify);return new rp(i,n)}return R()}function AC(t,e){return t&&t.length>0?(F(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Oe(r.updateTime):Oe(i);return s.isEqual(M.min())&&(s=Oe(i)),new fC(s,r.transformResults||[])}(n,e))):[]}function q1(t,e){return{documents:[dd(t,e.path)]}}function K1(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=dd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length===0)return;const l=u.map(c=>function(h){if(h.op==="=="){if(bg(h.value))return{unaryFilter:{field:pi(h.field),op:"IS_NAN"}};if(Dg(h.value))return{unaryFilter:{field:pi(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(bg(h.value))return{unaryFilter:{field:pi(h.field),op:"IS_NOT_NAN"}};if(Dg(h.value))return{unaryFilter:{field:pi(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pi(h.field),op:bC(h.op),value:h.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(c){return{field:pi(c.field),direction:DC(c.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,l){return u.dt||oa(l)?l:{value:l}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function G1(t){let e=U1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){F(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=H1(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Fi(Di(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,oa(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(c){const h=!!c.before,d=c.values||[];return new Zn(d,h)}(n.startAt));let l=null;return n.endAt&&(l=function(c){const h=!c.before,d=c.values||[];return new Zn(d,h)}(n.endAt)),w1(e,i,o,s,a,"F",u,l)}function NC(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return R()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function H1(t){return t?t.unaryFilter!==void 0?[RC(t)]:t.fieldFilter!==void 0?[$C(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>H1(e)).reduce((e,n)=>e.concat(n)):R():[]}function DC(t){return IC[t]}function bC(t){return TC[t]}function pi(t){return{fieldPath:t.canonicalString()}}function Di(t){return Ee.fromServerFormat(t.fieldPath)}function $C(t){return ze.create(Di(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(t.fieldFilter.op),t.fieldFilter.value)}function RC(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Di(t.unaryFilter.field);return ze.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Di(t.unaryFilter.field);return ze.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Di(t.unaryFilter.field);return ze.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Di(t.unaryFilter.field);return ze.create(i,"!=",{nullValue:"NULL_VALUE"});default:return R()}}function PC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qg(e)),e=OC(t.get(n),e);return Qg(e)}function OC(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Qg(t){return t+""}function Wt(t){const e=t.length;if(F(e>=2),e===2)return F(t.charAt(0)===""&&t.charAt(1)===""),H.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&R(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:R()}s=o+2}return new H(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e){return[t,at(e)]}function W1(t,e,n){return[t,at(e),n]}const LC={},MC=["prefixPath","collectionGroup","readTime","documentId"],FC=["prefixPath","collectionGroup","documentId"],VC=["collectionGroup","readTime","prefixPath","documentId"],BC=["canonicalId","targetId"],UC=["targetId","path"],zC=["path","targetId"],jC=["collectionId","parent"],qC=["indexId","uid"],KC=["uid","sequenceNumber"],GC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HC=["indexId","uid","orderedDocumentKey"],QC=["userId","collectionPath","documentId"],WC=["userId","collectionPath","largestBatchId"],XC=["userId","collectionGroup","largestBatchId"],X1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YC=[...X1,"documentOverlays"],Y1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],J1=Y1,JC=[...J1,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends d1{constructor(e,n){super(),this.ee=e,this.currentSequenceNumber=n}}function Me(t,e){const n=N(t);return Ut.N(n.ee,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=D1(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(M.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),U())}isEqual(e){return this.batchId===e.batchId&&Xi(this.mutations,e.mutations,(n,r)=>Ug(n,r))&&Xi(this.baseMutations,e.baseMutations,(n,r)=>Ug(n,r))}}class op{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){F(e.mutations.length===r.length);let i=vC;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new op(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,i,s=M.min(),o=M.min(),a=Ce.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.ne=e}}function ZC(t,e){let n;if(e.document)n=j1(t.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=A.fromSegments(e.noDocument.path),i=ei(e.noDocument.readTime);n=ee.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return R();{const r=A.fromSegments(e.unknownDocument.path),i=ei(e.unknownDocument.version);n=ee.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new ae(r[0],r[1]);return M.fromTimestamp(i)}(e.readTime)),n}function Xg(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:Fo(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Mo(i,s.version.toTimestamp())}}(t.ne,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zr(e.version)};else{if(!e.isUnknownDocument())return R();r.unknownDocument={path:n.path.toArray(),version:Zr(e.version)}}return r}function tl(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zr(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ei(t){const e=new ae(t.seconds,t.nanoseconds);return M.fromTimestamp(e)}function Ir(t,e){const n=(e.baseMutations||[]).map(s=>fd(t.ne,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>fd(t.ne,s)),i=ae.fromMillis(e.localWriteTimeMs);return new sp(e.batchId,i,n,r)}function js(t){const e=ei(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ei(t.lastLimboFreeSnapshotVersion):M.min();let r;var i;return t.query.documents!==void 0?(F((i=t.query).documents.length===1),r=vt(fs(U1(i.documents[0])))):r=function(s){return vt(G1(s))}(t.query),new Kn(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Ce.fromBase64String(t.resumeToken))}function eE(t,e){const n=Zr(e.snapshotVersion),r=Zr(e.lastLimboFreeSnapshotVersion);let i;i=Ju(e.target)?q1(t.ne,e.target):K1(t.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xr(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function up(t){const e=G1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?el(e,e.limit,"L"):e}function Qc(t,e){return new ap(e.largestBatchId,fd(t.ne,e.overlayMutation))}function Yg(t,e){const n=e.path.lastSegment();return[t,at(e.path.popLast()),n]}function Jg(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Zr(r.readTime),documentKey:at(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{getBundleMetadata(e,n){return Zg(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ei(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return Zg(e).put({bundleId:(r=n).id,createTime:Zr(Oe(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return ey(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:up(i.bundledQuery),readTime:ei(i.readTime)};var i})}saveNamedQuery(e,n){return ey(e).put(function(r){return{name:r.name,readTime:Zr(Oe(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Zg(t){return Me(t,"bundles")}function ey(t){return Me(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.wt=e,this.userId=n}static se(e,n){const r=n.uid||"";return new ql(e,r)}getOverlay(e,n){return bs(e).get(Yg(this.userId,n)).next(r=>r?Qc(this.wt,r):null)}getOverlays(e,n){const r=Qt();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ap(n,o);i.push(this.ie(e,a))}),v.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(at(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(bs(e).W("collectionPathOverlayIndex",a))}),v.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Qt(),s=at(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return bs(e).K("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=Qc(this.wt,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Qt();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bs(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const h=Qc(this.wt,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ie(e,n){return bs(e).put(function(r,i,s){const[o,a,u]=Yg(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Bo(r.ne,s.mutation)}}(this.wt,this.userId,n))}}function bs(t){return Me(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(fe(e.integerValue));else if("doubleValue"in e){const r=fe(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),Po(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),typeof r=="string"?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Hr(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?g1(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):R()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),A.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}Tr.ye=new Tr;function tA(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function ty(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=tA(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class nA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ie(r.value),r=n.next();this.Te()}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=n.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=n.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const n=this.Ve(e),r=ty(n);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}De(e){const n=this.Ve(e),r=ty(n);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ie(e){const n=255&e;n===0?(this.xe(0),this.xe(255)):n===255?(this.xe(255),this.xe(0)):this.xe(n)}Ae(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rA{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class iA{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class $s{constructor(){this.Oe=new nA,this.Fe=new rA(this.Oe),this.$e=new iA(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return e===0?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xr(this.indexId,this.documentKey,this.arrayValue,r)}}function mr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ny(t.arrayValue,e.arrayValue),n!==0?n:(n=ny(t.directionalValue,e.directionalValue),n!==0?n:A.comparator(t.documentKey,e.documentKey)))}function ny(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const n of e.filters){const r=n;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const n=ud(e);if(n!==void 0&&!this.Qe(n))return!1;const r=Er(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(this.Ke!==void 0){const o=r[i];if(!this.je(this.Ke,o)||!this.We(this.Ue[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],o))return!1}return!0}Qe(e){for(const n of this.qe)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ze=new lp}addToCollectionParentIndex(e,n){return this.ze.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(kt.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(kt.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}}class lp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Z(H.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Z(H.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Uint8Array(0);class aA{constructor(e,n){this.user=e,this.databaseId=n,this.He=new lp,this.Je=new cr(r=>Xr(r),(r,i)=>aa(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.He.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.He.add(n)});const s={collectionId:r,parent:at(i)};return ry(e).put(s)}return v.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[a1(n),""],!1,!0);return ry(e).K(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Wt(o.parent))}return r})}addFieldIndex(e,n){const r=qa(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ps(e);return s.next(a=>{o.put(Jg(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=qa(e),i=Ps(e),s=Rs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Rs(e);let i=!0;const s=new Map;return v.forEach(this.Ye(n),o=>this.Xe(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=U();const a=[];return v.forEach(s,(u,l)=>{var c;T("IndexedDbIndexManager",`Using index ${c=u,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`} to execute ${Xr(n)}`);const h=function(g,S){const _=ud(S);if(_===void 0)return null;for(const C of Zu(g,_.fieldPath))switch(C.op){case"array-contains-any":return C.value.arrayValue.values||[];case"array-contains":return[C.value]}return null}(l,u),d=function(g,S){const _=new Map;for(const C of Er(S))for(const D of Zu(g,C.fieldPath))switch(D.op){case"==":case"in":_.set(C.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return _.set(C.fieldPath.canonicalString(),D.value),Array.from(_.values())}return null}(l,u),p=function(g,S){const _=[];let C=!0;for(const D of Er(S)){const O=D.kind===0?Og(g,D.fieldPath,g.startAt):Lg(g,D.fieldPath,g.startAt);_.push(O.value),C&&(C=O.inclusive)}return new Zn(_,C)}(l,u),y=function(g,S){const _=[];let C=!0;for(const D of Er(S)){const O=D.kind===0?Lg(g,D.fieldPath,g.endAt):Og(g,D.fieldPath,g.endAt);_.push(O.value),C&&(C=O.inclusive)}return new Zn(_,C)}(l,u),E=this.Ze(u,l,p),k=this.Ze(u,l,y),m=this.tn(u,l,d),f=this.en(u.indexId,h,E,p.inclusive,k,y.inclusive,m);return v.forEach(f,g=>r.j(g,n.limit).next(S=>{S.forEach(_=>{const C=A.fromSegments(_.documentKey);o.has(C)||(o=o.add(C),a.push(C))})}))}).next(()=>a)}return v.resolve(null)})}Ye(e){let n=this.Je.get(e);return n||(n=[e],this.Je.set(e,n),n)}en(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),l=u/(n!=null?n.length:1),c=[];for(let h=0;h<u;++h){const d=n?this.nn(n[h/l]):ja,p=this.sn(e,d,r[h%l],i),y=this.rn(e,d,s[h%l],o),E=a.map(k=>this.sn(e,d,k,!0));c.push(...this.createRange(p,y,E))}return c}sn(e,n,r,i){const s=new xr(e,A.empty(),n,r);return i?s:s.Le()}rn(e,n,r,i){const s=new xr(e,A.empty(),n,r);return i?s.Le():s}Xe(e,n){const r=new sA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.Ge(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return v.forEach(this.Ye(n),i=>this.Xe(e,i).next(s=>{s?r!==0&&s.fields.length<function(o){let a=new Z(Ee.comparator),u=!1;for(const l of o.filters){const c=l;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?u=!0:a=a.add(c.field))}for(const l of o.orderBy)l.field.isKeyField()||(a=a.add(l.field));return a.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,n){const r=new $s;for(const i of Er(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Be(i.kind);Tr.ye.re(s,o)}return r.Me()}nn(e){const n=new $s;return Tr.ye.re(e,n.Be(0)),n.Me()}un(e,n){const r=new $s;return Tr.ye.re(Wr(this.databaseId,n),r.Be(function(i){const s=Er(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Me()}tn(e,n,r){if(r===null)return[];let i=[];i.push(new $s);let s=0;for(const o of Er(e)){const a=r[s++];for(const u of i)if(this.cn(n,o.fieldPath)&&Lo(a))i=this.an(i,o,a);else{const l=u.Be(o.kind);Tr.ye.re(a,l)}}return this.hn(i)}Ze(e,n,r){return this.tn(e,n,r.position)}hn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Me();return n}an(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new $s;u.seed(a.Me()),Tr.ye.re(o,u.Be(n.kind)),s.push(u)}return s}cn(e,n){return!!e.filters.find(r=>r instanceof ze&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=qa(e),i=Ps(e);return(n?r.K("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.K()).next(s=>{const o=[];return v.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(l,c){const h=c?new Yu(c.sequenceNumber,new kt(ei(c.readTime),new A(Wt(c.documentKey)),c.largestBatchId)):Yu.empty(),d=l.fields.map(([p,y])=>new jk(Ee.fromServerFormat(p),y));return new u1(l.indexId,l.collectionGroup,d,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:B(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=qa(e),s=Ps(e);return this.ln(e).next(o=>i.K("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>v.forEach(a,u=>s.put(Jg(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return v.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?v.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),v.forEach(a,u=>this.fn(e,i,u).next(l=>{const c=this.dn(s,u);return l.isEqual(c)?v.resolve():this._n(e,s,u,l,c)}))))})}wn(e,n,r,i){return Rs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,n.key),documentKey:n.key.path.toArray()})}mn(e,n,r,i){return Rs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Rs(e);let s=new Z(mr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,n)])},(o,a)=>{s=s.add(new xr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}dn(e,n){let r=new Z(mr);const i=this.on(n,e);if(i==null)return r;const s=ud(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Lo(o))for(const a of o.arrayValue.values||[])r=r.add(new xr(n.indexId,e.key,this.nn(a),i))}else r=r.add(new xr(n.indexId,e.key,ja,i));return r}_n(e,n,r,i,s){T("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,l,c,h){const d=a.getIterator(),p=u.getIterator();let y=fi(d),E=fi(p);for(;y||E;){let k=!1,m=!1;if(y&&E){const f=l(y,E);f<0?m=!0:f>0&&(k=!0)}else y!=null?m=!0:k=!0;k?(c(E),E=fi(p)):m?(h(y),y=fi(d)):(y=fi(d),E=fi(p))}}(i,s,mr,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.mn(e,n,r,a))}),v.waitFor(o)}ln(e){let n=1;return Ps(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>mr(o,a)).filter((o,a,u)=>!a||mr(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=mr(o,e),u=mr(o,n);if(a===0)i[0]=e.Le();else if(a>0&&u<0)i.push(o),i.push(o.Le());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ja,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ja,[]]));return s}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(iy)}getMinOffset(e,n){return v.mapArray(this.Ye(n),r=>this.Xe(e,r).next(i=>i||R())).next(iy)}}function ry(t){return Me(t,"collectionParents")}function Rs(t){return Me(t,"indexEntries")}function qa(t){return Me(t,"indexConfiguration")}function Ps(t){return Me(t,"indexState")}function iy(t){F(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Xf(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ct{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(c,h,d)=>(a++,d.delete()));s.push(u.next(()=>{F(a===1)}));const l=[];for(const c of n.mutations){const h=W1(e,c.key.path,n.batchId);s.push(i.delete(h)),l.push(c.key)}return v.waitFor(s).next(()=>l)}function nl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw R();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(41943040,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);class Kl{constructor(e,n,r,i){this.userId=e,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,n,r,i){F(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Kl(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tn(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=gi(e),o=Tn(e);return o.add({}).next(a=>{F(typeof a=="number");const u=new sp(a,n,r,i),l=function(d,p,y){const E=y.baseMutations.map(m=>Bo(d.ne,m)),k=y.mutations.map(m=>Bo(d.ne,m));return{userId:p,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:k}}(this.wt,this.userId,u),c=[];let h=new Z((d,p)=>B(d.canonicalString(),p.canonicalString()));for(const d of i){const p=W1(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(l)),c.push(s.put(p,LC))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.gn[a]=u.keys()}),v.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return Tn(e).get(n).next(r=>r?(F(r.userId===this.userId),Ir(this.wt,r)):null)}yn(e,n){return this.gn[n]?v.resolve(this.gn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.gn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Tn(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(F(a.batchId>=r),s=Ir(this.wt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tn(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tn(e).K("userMutationsIndex",n).next(r=>r.map(i=>Ir(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cu(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return gi(e).J({range:i},(o,a,u)=>{const[l,c,h]=o,d=Wt(c);if(l===this.userId&&n.path.isEqual(d))return Tn(e).get(h).next(p=>{if(!p)throw R();F(p.userId===this.userId),s.push(Ir(this.wt,p))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Z(B);const i=[];return n.forEach(s=>{const o=cu(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=gi(e).J({range:a},(l,c,h)=>{const[d,p,y]=l,E=Wt(p);d===this.userId&&s.path.isEqual(E)?r=r.add(y):h.done()});i.push(u)}),v.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=cu(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Z(B);return gi(e).J({range:o},(u,l,c)=>{const[h,d,p]=u,y=Wt(d);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(p)):c.done()}).next(()=>this.pn(e,a))}pn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Tn(e).get(s).next(o=>{if(o===null)throw R();F(o.userId===this.userId),r.push(Ir(this.wt,o))}))}),v.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return tE(e.ee,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.In(n.batchId)}),v.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return v.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gi(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Wt(s[1]);i.push(u)}else a.done()}).next(()=>{F(i.length===0)})})}containsKey(e,n){return nE(e,this.userId,n)}Tn(e){return rE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nE(t,e,n){const r=cu(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return gi(t).J({range:s,H:!0},(a,u,l)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function Tn(t){return Me(t,"mutations")}function gi(t){return Me(t,"documentMutations")}function rE(t){return Me(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ti(0)}static Rn(){return new ti(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.referenceDelegate=e,this.wt=n}allocateTargetId(e){return this.bn(e).next(n=>{const r=new ti(n.highestTargetId);return n.highestTargetId=r.next(),this.Pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(n=>M.fromTimestamp(new ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Pn(e,i)))}addTargetData(e,n){return this.vn(e,n).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(n,r),this.Pn(e,r))))}updateTargetData(e,n){return this.vn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>mi(e).delete(n.targetId)).next(()=>this.bn(e)).next(r=>(F(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return mi(e).J((o,a)=>{const u=js(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>v.waitFor(s)).next(()=>i)}forEachTarget(e,n){return mi(e).J((r,i)=>{const s=js(i);n(s)})}bn(e){return oy(e).get("targetGlobalKey").next(n=>(F(n!==null),n))}Pn(e,n){return oy(e).put("targetGlobalKey",n)}vn(e,n){return mi(e).put(eE(this.wt,n))}Vn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Xr(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return mi(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=js(a);aa(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Nn(e);return n.forEach(o=>{const a=at(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),v.waitFor(i)}removeMatchingKeys(e,n,r){const i=Nn(e);return v.forEach(n,s=>{const o=at(s.path);return v.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Nn(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Nn(e);let s=U();return i.J({range:r,H:!0},(o,a,u)=>{const l=Wt(o[1]),c=new A(l);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=at(n.path),i=IDBKeyRange.bound([r],[a1(r)],!1,!0);let s=0;return Nn(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}te(e,n){return mi(e).get(n).next(r=>r?js(r):null)}}function mi(t){return Me(t,"targets")}function oy(t){return Me(t,"targetGlobal")}function Nn(t){return Me(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay([t,e],[n,r]){const i=B(t,n);return i===0?B(e,r):i}class lA{constructor(e){this.Sn=e,this.buffer=new Z(ay),this.Dn=0}Cn(){return++this.Dn}xn(e){const n=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ay(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Nn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return this.Nn!==null}kn(e){T("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lr(n)?T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ur(n)}await this.kn(3e5)})}}class hA{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.On(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return v.resolve(ft.ot);const r=new lA(n);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Mn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(T("LruGarbageCollector","Garbage collection skipped; disabled"),v.resolve(sy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sy):this.$n(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),ad()<=X.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),v.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new hA(r,i)}(this,n)}On(e){const n=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Bn(e){let n=0;return this.Fn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Fn(e,n){return this.Ln(e,(r,i)=>n(i))}addReference(e,n,r){return Ka(e,r)}removeReference(e,n,r){return Ka(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ka(e,n)}Un(e,n){return function(r,i){let s=!1;return rE(r).Y(o=>nE(r,o,i).next(a=>(a&&(s=!0),v.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(o,a)=>{if(a<=n){const u=this.Un(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,M.min()),Nn(e).delete([0,at(o.path)])))});i.push(u)}}).next(()=>v.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ka(e,n)}Ln(e,n){const r=Nn(e);let i,s=ft.ot;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(s!==ft.ot&&n(new A(Wt(i)),s),s=l,i=u):s=ft.ot}).next(()=>{s!==ft.ot&&n(new A(Wt(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ka(t,e){return Nn(t).put(function(n,r){return{targetId:0,path:at(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.changes=new cr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ee.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return gr(e).put(r)}removeEntry(e,n,r){return gr(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],tl(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.qn(e,r)))}getEntry(e,n){let r=ee.newInvalidDocument(n);return gr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Os(n))},(i,s)=>{r=this.Kn(n,s)}).next(()=>r)}Gn(e,n){let r={size:0,document:ee.newInvalidDocument(n)};return gr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Os(n))},(i,s)=>{r={document:this.Kn(n,s),size:nl(s)}}).next(()=>r)}getEntries(e,n){let r=pt();return this.Qn(e,n,(i,s)=>{const o=this.Kn(i,s);r=r.insert(i,o)}).next(()=>r)}jn(e,n){let r=pt(),i=new pe(A.comparator);return this.Qn(e,n,(s,o)=>{const a=this.Kn(s,o);r=r.insert(s,a),i=i.insert(s,nl(o))}).next(()=>({documents:r,Wn:i}))}Qn(e,n,r){if(n.isEmpty())return v.resolve();let i=new Z(cy);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Os(i.first()),Os(i.last())),o=i.getIterator();let a=o.getNext();return gr(e).J({index:"documentKeyIndex",range:s},(u,l,c)=>{const h=A.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cy(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.q(Os(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),tl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gr(e).K(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=pt();for(const u of o){const l=this.Kn(A.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(l.key,l)}return a})}getAllFromCollectionGroup(e,n,r,i){let s=pt();const o=ly(n,r),a=ly(n,kt.max());return gr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,c)=>{const h=this.Kn(A.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new pA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return uy(e).get("remoteDocumentGlobalKey").next(n=>(F(!!n),n))}qn(e,n){return uy(e).put("remoteDocumentGlobalKey",n)}Kn(e,n){if(n){const r=ZC(this.wt,n);if(!(r.isNoDocument()&&r.version.isEqual(M.min())))return r}return ee.newInvalidDocument(e)}}function sE(t){return new fA(t)}class pA extends iE{constructor(e,n){super(),this.zn=e,this.trackRemovals=n,this.Hn=new cr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Z((s,o)=>B(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Hn.get(s);if(n.push(this.zn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Xg(this.zn.wt,o);i=i.add(s.path.popLast()),r+=nl(u)-a.size,n.push(this.zn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Xg(this.zn.wt,o.convertToNoDocument(M.min()));n.push(this.zn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.zn.updateMetadata(e,r)),v.waitFor(n)}getFromCache(e,n){return this.zn.Gn(e,n).next(r=>(this.Hn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.zn.jn(e,n).next(({documents:r,Wn:i})=>(i.forEach((s,o)=>{this.Hn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function uy(t){return Me(t,"remoteDocumentGlobal")}function gr(t){return Me(t,"remoteDocumentsV14")}function Os(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ly(t,e){const n=e.documentKey.path.toArray();return[t,tl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cy(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=B(n[s],r[s]),i)return i;return i=B(n.length,r.length),i||(i=B(n[n.length-2],r[r.length-2]),i||B(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(r!==null&&ro(r.mutation,i,Tt.empty(),ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,U()).next(()=>r))}getLocalViewOfDocuments(e,n,r=U()){const i=Qt();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=zs();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,U()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=pt();const o=io(),a=io();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof En)?s=s.insert(l.key,l):c!==void 0&&(o.set(l.key,c.mutation.getFieldMask()),ro(c.mutation,l,c.mutation.getFieldMask(),ae.now()))}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var h;return a.set(l,new mA(c,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=io();let i=new pe((o,a)=>o-a),s=U();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Tt.empty();c=a.applyToLocalView(l,c),r.set(u,c);const h=(i.get(a.batchId)||U()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=L1();c.forEach(d=>{if(!s.has(d)){const p=D1(n.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return A.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(Qt());let a=-1,u=s;return o.next(l=>v.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?v.resolve():this.getBaseDocument(e,c,h).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,U())).next(c=>({batchId:a,changes:O1(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=zs();return this.indexManager.getCollectionParents(e,i).next(o=>v.forEach(o,a=>{const u=function(l,c){return new wn(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const l=u.getKey();i.get(l)===null&&(i=i.insert(l,ee.newInvalidDocument(l)))});let o=zs();return i.forEach((a,u)=>{const l=s.get(a);l!==void 0&&ro(l.mutation,u,Tt.empty(),ae.now()),np(n,u)&&(o=o.insert(a,u))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):v.resolve(ee.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return v.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:Oe(r.createTime)}),v.resolve()}getNamedQuery(e,n){return v.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:up(r.bundledQuery),readTime:Oe(r.readTime)}}(n)),v.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.overlays=new pe(A.comparator),this.Xn=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qt();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){const i=Qt(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pe((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Qt(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Qt(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return v.resolve(a)}ie(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ap(n,r));let s=this.Xn.get(n);s===void 0&&(s=U(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.Zn=new Z(De.ts),this.es=new Z(De.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new De(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new De(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new A(new H([])),r=new De(n,e),i=new De(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new A(new H([])),r=new De(n,e),i=new De(n,e+1);let s=U();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new De(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class De{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return A.comparator(e.key,n.key)||B(e.ls,n.ls)}static ns(e,n){return B(e.ls,n.ls)||A.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Z(De.ts)}checkEmpty(e){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sp(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new De(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ws(r),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new De(n,0),i=new De(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Z(B);return n.forEach(i=>{const s=new De(i,0),o=new De(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),v.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;A.isDocumentKey(s)||(s=s.child(""));const o=new De(new A(s),0);let a=new Z(B);return this.ds.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.ls)),!0)},o),v.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){F(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return v.forEach(n.mutations,i=>{const s=new De(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new De(n,0),i=this.ds.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,v.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.ps=e,this.docs=new pe(A.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():ee.newInvalidDocument(n))}getEntries(e,n){let r=pt();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ee.newInvalidDocument(i))}),v.resolve(r)}getAllFromCollection(e,n,r){let i=pt();const s=new A(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Xf(c1(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return v.resolve(i)}getAllFromCollectionGroup(e,n,r,i){R()}Is(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EA(this)}getSize(e){return v.resolve(this.size)}}class EA extends iE{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.persistence=e,this.Ts=new cr(n=>Xr(n),aa),this.lastRemoteSnapshotVersion=M.min(),this.highestTargetId=0,this.Es=0,this.As=new cp,this.targetCount=0,this.Rs=ti.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),v.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new ti(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.vn(n),v.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),v.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.bs={},this.overlays={},this.Ps=new ft(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new SA(this),this.indexManager=new oA,this.remoteDocumentCache=function(r){return new wA(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new Z1(n),this.Ds=new gA(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new vA(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);const i=new IA(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return v.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class IA extends d1{constructor(e){super(),this.currentSequenceNumber=e}}class Gl{constructor(e){this.persistence=e,this.ks=new cp,this.Ms=null}static Os(e){return new Gl(e)}get Fs(){if(this.Ms)return this.Ms;throw R()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),v.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Fs,r=>{const i=A.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,M.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return v.or([()=>v.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.wt=e}M(e,n,r,i){const s=new Bl("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wg,{unique:!0}),a.createObjectStore("documentMutations")}(e),hy(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=v.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),hy(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:M.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").K().next(l=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wg,{unique:!0});const c=u.store("mutations"),h=l.map(d=>c.put(d));return v.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Bs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(o=o.next(()=>this.Us(s))),r<8&&i>=8&&(o=o.next(()=>this.qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ks(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:QC});u.createIndex("collectionPathOverlayIndex",WC,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",XC,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:MC});u.createIndex("documentKeyIndex",FC),u.createIndex("collectionGroupIndex",VC)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Qs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:qC}).createIndex("sequenceNumberIndex",KC,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:GC}).createIndex("documentKeyIndex",HC,{unique:!1})}(e))),o}Ls(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=nl(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next(i=>v.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",o).next(a=>v.forEach(a,u=>{F(u.userId===s.userId);const l=Ir(this.wt,u);return tE(e,s.userId,l).next(()=>{})}))}))}Us(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new H(o),l=function(c){return[0,at(c)]}(u);s.push(n.get(l).next(c=>c?v.resolve():(h=>n.put({targetId:0,path:at(h),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>v.waitFor(s))})}qs(e,n){e.createObjectStore("collectionParents",{keyPath:jC});const r=n.store("collectionParents"),i=new lp,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:at(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new H(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],l)=>{const c=Wt(a);return s(c.popLast())}))}Ks(e){const n=e.store("targets");return n.J((r,i)=>{const s=js(i),o=eE(this.wt,s);return n.put(o)})}Gs(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(l=o,l.document?new A(H.fromString(l.document.name).popFirst(5)):l.noDocument?A.fromSegments(l.noDocument.path):l.unknownDocument?A.fromSegments(l.unknownDocument.path):R()).path.toArray();var l;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>v.waitFor(i))}Qs(e,n){const r=n.store("mutations"),i=sE(this.wt),s=new aE(Gl.Os,this.wt.ne);return r.K().next(o=>{const a=new Map;return o.forEach(u=>{var l;let c=(l=a.get(u.userId))!==null&&l!==void 0?l:U();Ir(this.wt,u).keys().forEach(h=>c=c.add(h)),a.set(u.userId,c)}),v.forEach(a,(u,l)=>{const c=new $e(l),h=ql.se(this.wt,c),d=s.getIndexManager(c),p=Kl.se(c,this.wt,d,s.referenceDelegate);return new oE(i,p,h,d).recalculateAndSaveOverlaysForDocumentKeys(new pd(n,ft.ot),u).next()})})}}function hy(t){t.createObjectStore("targetDocuments",{keyPath:UC}).createIndex("documentTargetsIndex",zC,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BC,{unique:!0}),t.createObjectStore("targetGlobal")}const Wc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hp{constructor(e,n,r,i,s,o,a,u,l,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=s,this.window=o,this.document=a,this.Ws=l,this.zs=c,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=d=>Promise.resolve(),!hp.V())throw new I(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dA(this,i),this.ei=n+"main",this.wt=new Z1(u),this.ni=new Ut(this.ei,this.Hs,new TA(this.wt)),this.Vs=new uA(this.referenceDelegate,this.wt),this.remoteDocumentCache=sE(this.wt),this.Ds=new eA,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,c===!1&&we("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I(w.FAILED_PRECONDITION,Wc);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ft(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){return this.ti=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(async()=>{this.started&&await this.ii()}))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ga(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(n=>{n||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(n=>this.isPrimary&&!n?this.li(e).next(()=>!1):!!n&&this.fi(e).next(()=>!0))).catch(e=>{if(lr(e))return T("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Ls(e).get("owner").next(n=>v.resolve(this.di(n)))}_i(e){return Ga(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Me(n,"clientMetadata");return r.K().next(i=>{const s=this.gi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return v.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.si)for(const n of e)this.si.removeItem(this.yi(n.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?v.resolve(!0):Ls(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)){if(this.di(n)&&this.networkEnabled)return!0;if(!this.di(n)){if(!n.allowTabSynchronization)throw new I(w.FAILED_PRECONDITION,Wc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ga(e).K().next(r=>this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&T("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new pd(e,ft.ot);return this.li(n).next(()=>this._i(n))}),this.ni.close(),this.Ai()}gi(e,n){return e.filter(r=>this.mi(r.updateTimeMs,n)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Ga(e).K().next(n=>this.gi(n,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,n){return Kl.se(e,this.wt,n,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aA(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return ql.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,n,r){T("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Hs)===15?JC:o===14?J1:o===13?Y1:o===12?YC:o===11?X1:void R();var o;let a;return this.ni.runTransaction(e,i,s,u=>(a=new pd(u,this.Ps?this.Ps.next():ft.ot),n==="readwrite-primary"?this.ai(a).next(l=>!!l||this.hi(a)).next(l=>{if(!l)throw we(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new I(w.FAILED_PRECONDITION,h1);return r(a)}).next(l=>this.fi(a).next(()=>l)):this.bi(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}bi(e){return Ls(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)&&!this.di(n)&&!(this.zs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new I(w.FAILED_PRECONDITION,Wc)})}fi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ls(e).put("owner",n)}static V(){return Ut.V()}li(e){const n=Ls(e);return n.get("owner").next(r=>this.di(r)?(T("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):v.resolve())}mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(we(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground=this.document.visibilityState==="visible")}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Js=()=>{this.Ii(),ux()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var n;try{const r=((n=this.si)===null||n===void 0?void 0:n.getItem(this.yi(e)))!==null;return T("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return we("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){we("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ls(t){return Me(t,"owner")}function Ga(t){return Me(t,"clientMetadata")}function dp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=U(),i=U();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){if(Vg(n))return v.resolve(null);let r=vt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=el(n,null,"F"),r=vt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=U(...s);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ki(n,a);return this.Mi(n,l,o,u.readTime)?this.Ci(e,el(n,null,"F")):this.Oi(e,l,n,u)}))})))}xi(e,n,r,i){return Vg(n)||i.isEqual(M.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Mi(n,o,r,i)?this.Ni(e,n):(ad()<=X.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hd(n)),this.Oi(e,o,n,l1(i,-1)))})}ki(e,n){let r=new Z(I1(e));return n.forEach((i,s)=>{np(e,s)&&(r=r.add(s))}),r}Mi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return ad()<=X.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",hd(n)),this.Di.getDocumentsMatchingQuery(e,n,kt.min())}Oi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new pe(B),this.Bi=new cr(s=>Xr(s),aa),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oE(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function lE(t,e,n,r){return new xA(t,e,n,r)}async function cE(t,e){const n=N(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=U();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function _A(t,e){const n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,u,l){const c=u.batch,h=c.keys();let d=v.resolve();return h.forEach(p=>{d=d.next(()=>l.getEntry(a,p)).next(y=>{const E=u.docVersions.get(p);F(E!==null),y.version.compareTo(E)<0&&(c.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=U();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hE(t){const e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function kA(t,e){const n=N(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Vs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(s,c.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?p=p.withResumeToken(Ce.EMPTY_BYTE_STRING,M.min()).withLastLimboFreeSnapshotVersion(M.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(y,E,k){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(d,p,c)&&a.push(n.Vs.updateTargetData(s,p))});let u=pt(),l=U();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(dE(s,o,e.documentUpdates).next(c=>{u=c.Gi,l=c.Qi})),!r.isEqual(M.min())){const c=n.Vs.getLastRemoteSnapshotVersion(s).next(h=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.$i=i,s))}function dE(t,e,n){let r=U(),i=U();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=pt();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(M.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Gi:o,Qi:i}})}function CA(t,e){const n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function es(t,e){const n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new Kn(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function ts(t,e,n){const r=N(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!lr(o))throw o;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}function rl(t,e,n){const r=N(t);let i=M.min(),s=U();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=N(a),h=c.Bi.get(l);return h!==void 0?v.resolve(c.$i.get(h)):c.Vs.getTargetData(u,l)}(r,o,vt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:M.min(),n?s:U())).next(a=>(mE(r,S1(e),a),{documents:a,ji:s})))}function fE(t,e){const n=N(t),r=N(n.Vs),i=n.$i.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(o=>o?o.target:null))}function pE(t,e){const n=N(t),r=n.Li.get(e)||M.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ui.getAllFromCollectionGroup(i,e,l1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(mE(n,e,i),i))}function mE(t,e,n){let r=M.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}async function AA(t,e,n,r){const i=N(t);let s=U(),o=pt();for(const l of n){const c=e.Wi(l.metadata.name);l.document&&(s=s.add(c));const h=e.zi(l);h.setReadTime(e.Hi(l.metadata.readTime)),o=o.insert(c,h)}const a=i.Ui.newChangeBuffer({trackRemovals:!0}),u=await es(i,function(l){return vt(fs(H.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>dE(l,a,o).next(c=>(a.apply(l),c)).next(c=>i.Vs.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Vs.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.Gi,c.Qi)).next(()=>c.Gi)))}async function NA(t,e,n=U()){const r=await es(t,vt(up(e.bundledQuery))),i=N(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Oe(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ds.saveNamedQuery(s,e);const a=r.withResumeToken(Ce.EMPTY_BYTE_STRING,o);return i.$i=i.$i.insert(a.targetId,a),i.Vs.updateTargetData(s,a).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}function dy(t,e){return`firestore_clients_${t}_${e}`}function fy(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xc(t,e){return`firestore_targets_${t}_${e}`}class il{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ji(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new I(i.error.code,i.error.message))),o?new il(e,n,i.state,s):(we("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class so{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ji(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new I(r.error.code,r.error.message))),s?new so(e,r.state,i):(we("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sl{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=jl();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=m1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new sl(e,s):(we("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class pp{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new pp(n.clientId,n.onlineState):(we("SharedClientState",`Failed to parse online state: ${e}`),null)}}class md{constructor(){this.activeTargetIds=jl()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yc{constructor(e,n,r,i,s){this.window=e,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new pe(B),this.started=!1,this.ir=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=dy(this.persistenceKey,this.tr),this.ur=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new md),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.dr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const r of e){if(r===this.tr)continue;const i=this.getItem(dy(this.persistenceKey,r));if(i){const s=sl.Ji(r,i);s&&(this.sr=this.sr.insert(s.clientId,s))}}this._r();const n=this.storage.getItem(this.lr);if(n){const r=this.wr(n);r&&this.mr(r)}for(const r of this.ir)this.nr(r);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,r){this.yr(e,n,r),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Xc(this.persistenceKey,e));if(r){const i=so.Ji(e,r);i&&(n=i.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xc(this.persistenceKey,e))}updateQueryState(e,n,r){this.Tr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return T("SharedClientState","READ",e,n),n}setItem(e,n){T("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const n=e;if(n.storageArea===this.storage){if(T("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void we("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.cr.test(n.key)){if(n.newValue==null){const r=this.Rr(n.key);return this.br(r,null)}{const r=this.Pr(n.key,n.newValue);if(r)return this.br(r.clientId,r)}}else if(this.ar.test(n.key)){if(n.newValue!==null){const r=this.vr(n.key,n.newValue);if(r)return this.Vr(r)}}else if(this.hr.test(n.key)){if(n.newValue!==null){const r=this.Sr(n.key,n.newValue);if(r)return this.Dr(r)}}else if(n.key===this.lr){if(n.newValue!==null){const r=this.wr(n.newValue);if(r)return this.mr(r)}}else if(n.key===this.ur){const r=function(i){let s=ft.ot;if(i!=null)try{const o=JSON.parse(i);F(typeof o=="number"),s=o}catch(o){we("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==ft.ot&&this.sequenceNumberHandler(r)}else if(n.key===this.dr){const r=this.Cr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Nr(i)))}}}else this.ir.push(n)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,r){const i=new il(this.currentUser,e,n,r),s=fy(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const n=fy(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){const n={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(n))}Tr(e,n,r){const i=Xc(this.persistenceKey,e),s=new so(e,n,r);this.setItem(i,s.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.cr.exec(e);return n?n[1]:null}Pr(e,n){const r=this.Rr(e);return sl.Ji(r,n)}vr(e,n){const r=this.ar.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return il.Ji(new $e(s),i,n)}Sr(e,n){const r=this.hr.exec(e),i=Number(r[1]);return so.Ji(i,n)}wr(e){return pp.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);T("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,n){const r=n?this.sr.insert(e,n):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Or(o,a).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=jl();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class gE{constructor(){this.Fr=new md,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new md,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);T("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(u=>(T("RestConnection","Received: ",u),u),u=>{throw Wi("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}ao(e,n,r,i,s,o){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ds,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){const r=bA[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const a=new bk;a.listenOnce(Ak.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Hc.NO_ERROR:const l=a.getResponseJson();T("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Hc.TIMEOUT:T("Connection",'RPC "'+e+'" timed out'),o(new I(w.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const c=a.getStatus();if(T("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(p){const y=p.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(y)>=0?y:w.UNKNOWN}(h.status);o(new I(d,h.message))}else o(new I(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new I(w.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{T("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kk(),o=Ck(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Dk({})),this.uo(a.initMessageHeaders,n,r),ex()||ix()||sx()||ox()||ax()||rx()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=i.join("");T("Connection","Creating WebChannel: "+u,a);const l=s.createWebChannel(u,a);let c=!1,h=!1;const d=new $A({jr:y=>{h?T("Connection","Not sending because WebChannel is closed:",y):(c||(T("Connection","Opening WebChannel transport."),l.open(),c=!0),T("Connection","WebChannel sending:",y),l.send(y))},Wr:()=>l.close()}),p=(y,E,k)=>{y.listen(E,m=>{try{k(m)}catch(f){setTimeout(()=>{throw f},0)}})};return p(l,Ua.EventType.OPEN,()=>{h||T("Connection","WebChannel transport opened.")}),p(l,Ua.EventType.CLOSE,()=>{h||(h=!0,T("Connection","WebChannel transport closed"),d.eo())}),p(l,Ua.EventType.ERROR,y=>{h||(h=!0,Wi("Connection","WebChannel transport errored:",y),d.eo(new I(w.UNAVAILABLE,"The operation could not be completed")))}),p(l,Ua.EventType.MESSAGE,y=>{var E;if(!h){const k=y.data[0];F(!!k);const m=k,f=m.error||((E=m[0])===null||E===void 0?void 0:E.error);if(f){T("Connection","WebChannel received error:",f);const g=f.status;let S=function(C){const D=Se[C];if(D!==void 0)return R1(D)}(g),_=f.message;S===void 0&&(S=w.INTERNAL,_="Unknown error status: "+g+" with message "+f.message),h=!0,d.eo(new I(S,_)),l.close()}else T("Connection","WebChannel received:",k),d.no(k)}}),p(o,Nk.STAT_EVENT,y=>{y.stat===xg.PROXY?T("Connection","Detected buffering proxy"):y.stat===xg.NOPROXY&&T("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof window!="undefined"?window:null}function hu(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){return new xC(t,!0)}class mp{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,i,s,o,a,u){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new mp(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(we(n.toString()),we("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new I(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PA extends vE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=CC(this.wt,e),r=function(i){if(!("targetChange"in i))return M.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?M.min():s.readTime?Oe(s.readTime):M.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=Vo(this.wt),n.addTarget=function(i,s){let o;const a=s.target;return o=Ju(a)?{documents:q1(i,a)}:{query:K1(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=V1(i,s.resumeToken):s.snapshotVersion.compareTo(M.min())>0&&(o.readTime=Mo(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=NC(this.wt,e);r&&(n.labels=r),this.Oo(n)}jo(e){const n={};n.database=Vo(this.wt),n.removeTarget=e,this.Oo(n)}}class OA extends vE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(F(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=AC(e.writeResults,e.commitTime),r=Oe(e.commitTime);return this.listener.Jo(r,n)}return F(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Vo(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bo(this.wt,r))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new I(w.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new I(w.UNKNOWN,i.toString())})}ao(e,n,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new I(w.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class MA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(we(n),this.su=!1):T("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{r.enqueueAndForget(async()=>{hr(this)&&(T("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=N(a);u.lu.add(4),await gs(u),u._u.set("Unknown"),u.lu.delete(4),await fa(u)}(this))})}),this._u=new MA(r,i)}}async function fa(t){if(hr(t))for(const e of t.fu)await e(!0)}async function gs(t){for(const e of t.fu)await e(!1)}function Hl(t,e){const n=N(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),vp(n)?yp(n):vs(n).Co()&&gp(n,e))}function Uo(t,e){const n=N(t),r=vs(n);n.hu.delete(e),r.Co()&&wE(n,e),n.hu.size===0&&(r.Co()?r.ko():hr(n)&&n._u.set("Unknown"))}function gp(t,e){t.wu.Nt(e.targetId),vs(t).Qo(e)}function wE(t,e){t.wu.Nt(e),vs(t).jo(e)}function yp(t){t.wu=new SC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),vs(t).start(),t._u.iu()}function vp(t){return hr(t)&&!vs(t).Do()&&t.hu.size>0}function hr(t){return N(t).lu.size===0}function EE(t){t.wu=void 0}async function VA(t){t.hu.forEach((e,n)=>{gp(t,e)})}async function BA(t,e){EE(t),vp(t)?(t._u.uu(e),yp(t)):t._u.set("Unknown")}async function UA(t,e,n){if(t._u.set("Online"),e instanceof F1&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.hu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.hu.delete(o),r.wu.removeTarget(o))}(t,e)}catch(r){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof lu?t.wu.Ut(e):e instanceof M1?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(M.min()))try{const r=await hE(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.hu.get(u);l&&i.hu.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.hu.get(a);if(!u)return;i.hu.set(a,u.withResumeToken(Ce.EMPTY_BYTE_STRING,u.snapshotVersion)),wE(i,a);const l=new Kn(u.target,a,1,u.sequenceNumber);gp(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){T("RemoteStore","Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!lr(e))throw e;t.lu.add(1),await gs(t),t._u.set("Offline"),n||(n=()=>hE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{T("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await fa(t)})}function SE(t,e){return e().catch(n=>ol(t,n,e))}async function ys(t){const e=N(t),n=er(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;zA(e);)try{const i=await CA(e.localStore,r);if(i===null){e.au.length===0&&n.ko();break}r=i.batchId,jA(e,i)}catch(i){await ol(e,i)}IE(e)&&TE(e)}function zA(t){return hr(t)&&t.au.length<10}function jA(t,e){t.au.push(e);const n=er(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function IE(t){return hr(t)&&!er(t).Do()&&t.au.length>0}function TE(t){er(t).start()}async function qA(t){er(t).Xo()}async function KA(t){const e=er(t);for(const n of t.au)e.Ho(n.mutations)}async function GA(t,e,n){const r=t.au.shift(),i=op.from(r,e,n);await SE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ys(t)}async function HA(t,e){e&&er(t).zo&&await async function(n,r){if(i=r.code,$1(i)&&i!==w.ABORTED){const s=n.au.shift();er(n).No(),await SE(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ys(n)}var i}(t,e),IE(t)&&TE(t)}async function my(t,e){const n=N(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const r=hr(n);n.lu.add(3),await gs(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await fa(n)}async function gd(t,e){const n=N(t);e?(n.lu.delete(2),await fa(n)):e||(n.lu.add(2),await gs(n),n._u.set("Unknown"))}function vs(t){return t.mu||(t.mu=function(e,n,r){const i=N(e);return i.tu(),new PA(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:VA.bind(null,t),Jr:BA.bind(null,t),Go:UA.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),vp(t)?yp(t):t._u.set("Unknown")):(await t.mu.stop(),EE(t))})),t.mu}function er(t){return t.gu||(t.gu=function(e,n,r){const i=N(e);return i.tu(),new OA(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:qA.bind(null,t),Jr:HA.bind(null,t),Yo:KA.bind(null,t),Jo:GA.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await ys(t)):(await t.gu.stop(),t.au.length>0&&(T("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new wp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ws(t,e){if(we("AsyncQueue",`${e}: ${t}`),lr(t))return new I(w.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=zs(),this.sortedSet=new pe(this.comparator)}static emptySet(e){return new Vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.yu=new pe(A.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):R():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ns{constructor(e,n,r,i,s,o,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new ns(e,n,Vi.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ua(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.Iu=void 0,this.listeners=[]}}class WA{constructor(){this.queries=new cr(e=>E1(e),ua),this.onlineState="Unknown",this.Tu=new Set}}async function Ep(t,e){const n=N(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new QA),i)try{s.Iu=await n.onListen(r)}catch(o){const a=ws(o,`Initialization of query '${hd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&Ip(n)}async function Sp(t,e){const n=N(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function XA(t,e){const n=N(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&Ip(n)}function YA(t,e,n){const r=N(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Ip(t){t.Tu.forEach(e=>{e.next()})}class Tp{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.wt=e}Wi(e){return Jt(this.wt,e)}zi(e){return e.metadata.exists?j1(this.wt,e.document,!1):ee.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Oe(e)}}class ZA{constructor(e,n,r){this.xu=e,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xE(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=H.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,r=new yy(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||U()).add(s);n.set(o,a)}}return n}async complete(){const e=await AA(this.localStore,new yy(this.wt),this.documents,this.xu.id),n=this.ku(this.documents);for(const r of this.queries)await NA(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:e}}}function xE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.key=e}}class kE{constructor(e){this.key=e}}class CE{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=U(),this.mutatedKeys=U(),this.Lu=I1(e),this.Uu=new Vi(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new gy,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=np(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let k=!1;d&&p?d.data.isEqual(p.data)?y!==E&&(r.track({type:3,doc:p}),k=!0):this.Qu(d,p)||(r.track({type:2,doc:p}),k=!0,(u&&this.Lu(p,u)>0||l&&this.Lu(p,l)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),k=!0):d&&!p&&(r.track({type:1,doc:d}),k=!0,(u||l)&&(a=!0)),k&&(p?(o=o.add(p),s=E?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Mi:a,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((l,c)=>function(h,d){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return p(h)-p(d)}(l.type,c.type)||this.Lu(l.doc,c.doc)),this.ju(r);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,u=a!==this.$u;return this.$u=a,s.length!==0||u?{snapshot:new ns(this.query,e.Uu,i,s,e.mutatedKeys,a===0,u,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new gy,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=U(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new kE(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new _E(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=U();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return ns.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class eN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tN{constructor(e){this.key=e,this.Xu=!1}}class nN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new cr(a=>E1(a),ua),this.ec=new Map,this.nc=new Set,this.sc=new pe(A.comparator),this.ic=new Map,this.rc=new cp,this.oc={},this.uc=new Map,this.cc=ti.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function rN(t,e){const n=Ap(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=await es(n.localStore,vt(e));n.isPrimaryClient&&Hl(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await xp(n,e,r,a==="current")}return i}async function xp(t,e,n,r){t.hc=(c,h,d)=>async function(p,y,E,k){let m=y.view.Ku(E);m.Mi&&(m=await rl(p.localStore,y.query,!1).then(({documents:S})=>y.view.Ku(S,m)));const f=k&&k.targetChanges.get(y.targetId),g=y.view.applyChanges(m,p.isPrimaryClient,f);return yd(p,y.targetId,g.zu),g.snapshot}(t,c,h,d);const i=await rl(t.localStore,e,!0),s=new CE(e,i.ji),o=s.Ku(i.documents),a=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),u=s.applyChanges(o,t.isPrimaryClient,a);yd(t,n,u.zu);const l=new eN(e,n,s);return t.tc.set(e,l),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),u.snapshot}async function iN(t,e){const n=N(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!ua(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ts(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Uo(n.remoteStore,r.targetId),rs(n,r.targetId)}).catch(ur)):(rs(n,r.targetId),await ts(n.localStore,r.targetId,!0))}async function sN(t,e,n){const r=Np(t);try{const i=await function(s,o){const a=N(s),u=ae.now(),l=o.reduce((d,p)=>d.add(p.key),U());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=pt(),y=U();return a.Ui.getEntries(d,l).next(E=>{p=E,p.forEach((k,m)=>{m.isValidDocument()||(y=y.add(k))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,p)).next(E=>{c=E;const k=[];for(const m of o){const f=mC(m,c.get(m.key).overlayedDocument);f!=null&&k.push(new En(m.key,f,y1(f.value.mapValue),le.exists(!0)))}return a.mutationQueue.addMutationBatch(d,u,k,o)}).next(E=>{h=E;const k=E.applyToLocalDocumentSet(c,y);return a.documentOverlayCache.saveOverlays(d,E.batchId,k)})}).then(()=>({batchId:h.batchId,changes:O1(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.oc[s.currentUser.toKey()];u||(u=new pe(B)),u=u.insert(o,a),s.oc[s.currentUser.toKey()]=u}(r,i.batchId,n),await Sn(r,i.changes),await ys(r.remoteStore)}catch(i){const s=ws(i,"Failed to persist write");n.reject(s)}}async function AE(t,e){const n=N(t);try{const r=await kA(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(F(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?F(o.Xu):i.removedDocuments.size>0&&(F(o.Xu),o.Xu=!1))}),await Sn(n,r,e)}catch(r){await ur(r)}}function vy(t,e,n){const r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const h of c.listeners)h.Eu(o)&&(u=!0)}),u&&Ip(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oN(t,e,n){const r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new pe(A.comparator);o=o.insert(s,ee.newNoDocument(s,M.min()));const a=U().add(s),u=new ca(M.min(),new Map,new Z(B),o,a);await AE(r,u),r.sc=r.sc.remove(s),r.ic.delete(e),Cp(r)}else await ts(r.localStore,e,!1).then(()=>rs(r,e,n)).catch(ur)}async function aN(t,e){const n=N(t),r=e.batch.batchId;try{const i=await _A(n.localStore,e);kp(n,r,null),_p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sn(n,i)}catch(i){await ur(i)}}async function uN(t,e,n){const r=N(t);try{const i=await function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return a.mutationQueue.lookupMutationBatch(u,o).next(c=>(F(c!==null),l=c.keys(),a.mutationQueue.removeMutationBatch(u,c))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>a.localDocuments.getDocuments(u,l))})}(r.localStore,e);kp(r,e,n),_p(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sn(r,i)}catch(i){await ur(i)}}async function lN(t,e){const n=N(t);hr(n.remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=N(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.uc.get(r)||[];i.push(e),n.uc.set(r,i)}catch(r){const i=ws(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function _p(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function kp(t,e,n){const r=N(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function rs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||NE(t,r)})}function NE(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(Uo(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),Cp(t))}function yd(t,e,n){for(const r of n)r instanceof _E?(t.rc.addReference(r.key,e),cN(t,r)):r instanceof kE?(T("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||NE(t,r.key)):R()}function cN(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(T("SyncEngine","New document in limbo: "+n),t.nc.add(r),Cp(t))}function Cp(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new A(H.fromString(e)),r=t.cc.next();t.ic.set(r,new tN(n)),t.sc=t.sc.insert(n,r),Hl(t.remoteStore,new Kn(vt(fs(n.path)),r,2,ft.ot))}}async function Sn(t,e,n){const r=N(t),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,u)=>{o.push(r.hc(u,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l.fromCache?"not-current":"current"),i.push(l);const c=fp.Vi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Zu.Go(i),await async function(a,u){const l=N(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>v.forEach(u,h=>v.forEach(h.Pi,d=>l.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>v.forEach(h.vi,d=>l.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!lr(c))throw c;T("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const h=c.targetId;if(!c.fromCache){const d=l.$i.get(h),p=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(p);l.$i=l.$i.insert(h,y)}}}(r.localStore,s))}async function hN(t,e){const n=N(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const r=await cE(n.localStore,e);n.currentUser=e,function(i,s){i.uc.forEach(o=>{o.forEach(a=>{a.reject(new I(w.CANCELLED,s))})}),i.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sn(n,r.Ki)}}function dN(t,e){const n=N(t),r=n.ic.get(e);if(r&&r.Xu)return U().add(r.key);{let i=U();const s=n.ec.get(e);if(!s)return i;for(const o of s){const a=n.tc.get(o);i=i.unionWith(a.view.qu)}return i}}async function fN(t,e){const n=N(t),r=await rl(n.localStore,e.query,!0),i=e.view.Ju(r);return n.isPrimaryClient&&yd(n,e.targetId,i.zu),i}async function pN(t,e){const n=N(t);return pE(n.localStore,e).then(r=>Sn(n,r))}async function mN(t,e,n,r){const i=N(t),s=await function(o,a){const u=N(o),l=N(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",c=>l.yn(c,a).next(h=>h?u.localDocuments.getDocuments(c,h):v.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ys(i.remoteStore):n==="acknowledged"||n==="rejected"?(kp(i,e,r||null),_p(i,e),function(o,a){N(N(o).mutationQueue).In(a)}(i.localStore,e)):R(),await Sn(i,s)):T("SyncEngine","Cannot apply mutation batch with id: "+e)}async function gN(t,e){const n=N(t);if(Ap(n),Np(n),e===!0&&n.ac!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await wy(n,r.toArray());n.ac=!0,await gd(n.remoteStore,!0);for(const s of i)Hl(n.remoteStore,s)}else if(e===!1&&n.ac!==!1){const r=[];let i=Promise.resolve();n.ec.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(rs(n,o),ts(n.localStore,o,!0))),Uo(n.remoteStore,o)}),await i,await wy(n,r),function(s){const o=N(s);o.ic.forEach((a,u)=>{Uo(o.remoteStore,u)}),o.rc.cs(),o.ic=new Map,o.sc=new pe(A.comparator)}(n),n.ac=!1,await gd(n.remoteStore,!1)}}async function wy(t,e,n){const r=N(t),i=[],s=[];for(const o of e){let a;const u=r.ec.get(o);if(u&&u.length!==0){a=await es(r.localStore,vt(u[0]));for(const l of u){const c=r.tc.get(l),h=await fN(r,c);h.snapshot&&s.push(h.snapshot)}}else{const l=await fE(r.localStore,o);a=await es(r.localStore,l),await xp(r,DE(l),o,!1)}i.push(a)}return r.Zu.Go(s),i}function DE(t){return w1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yN(t){const e=N(t);return N(N(e.localStore).persistence).Ri()}async function vN(t,e,n,r){const i=N(t);if(i.ac)return void T("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await pE(i.localStore,S1(s[0])),a=ca.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await Sn(i,o,a);break}case"rejected":await ts(i.localStore,e,!0),rs(i,e,r);break;default:R()}}async function wN(t,e,n){const r=Ap(t);if(r.ac){for(const i of e){if(r.ec.has(i)){T("SyncEngine","Adding an already active target "+i);continue}const s=await fE(r.localStore,i),o=await es(r.localStore,s);await xp(r,DE(s),o.targetId,!1),Hl(r.remoteStore,o)}for(const i of n)r.ec.has(i)&&await ts(r.localStore,i,!1).then(()=>{Uo(r.remoteStore,i),rs(r,i)}).catch(ur)}}function Ap(t){const e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oN.bind(null,e),e.Zu.Go=XA.bind(null,e.eventManager),e.Zu.lc=YA.bind(null,e.eventManager),e}function Np(t){const e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uN.bind(null,e),e}function EN(t,e,n){const r=N(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(h,d){const p=N(h),y=Oe(d.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",E=>p.Ds.getBundleMetadata(E,d.id)).then(E=>!!E&&E.createTime.compareTo(y)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(xE(a));const u=new ZA(a,i.localStore,s.wt);let l=await s.fc();for(;l;){const h=await u.Nu(l);h&&o._updateProgress(h),l=await s.fc()}const c=await u.complete();return await Sn(i,c.Ou,void 0),await function(h,d){const p=N(h);return p.persistence.runTransaction("Save bundle","readwrite",y=>p.Ds.saveBundleMetadata(y,d))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Mu)}catch(a){return Wi("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class bE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=da(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return lE(this.persistence,new uE,e.initialUser,this.wt)}_c(e){return new aE(Gl.Os,this.wt)}dc(e){return new gE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $E extends bE{constructor(e,n,r){super(),this.yc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await Np(this.yc.syncEngine),await ys(this.yc.remoteStore),await this.persistence.ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wc(e){return lE(this.persistence,new uE,e.initialUser,this.wt)}mc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new cA(r,e.asyncQueue,n)}gc(e,n){const r=new Hk(n,this.persistence);return new Gk(e.asyncQueue,r)}_c(e){const n=dp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new hp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,yE(),hu(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new gE}}class SN extends $E{constructor(e,n){super(e,n,!1),this.yc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.yc.syncEngine;this.sharedClientState instanceof Yc&&(this.sharedClientState.syncEngine={kr:mN.bind(null,n),Mr:vN.bind(null,n),Or:wN.bind(null,n),Ri:yN.bind(null,n),Nr:pN.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ci(async r=>{await gN(this.yc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}dc(e){const n=yE();if(!Yc.V(n))throw new I(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yc(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,this.syncEngine),await gd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new WA}createDatastore(e){const n=da(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new RA(i));var i;return function(s,o,a,u){return new LA(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>vy(this.syncEngine,a,0),o=py.V()?new py:new DA,new FA(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,l){const c=new nN(r,i,s,o,a,u);return l&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=N(e);T("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await gs(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):we("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.Ec=e,this.wt=n,this.metadata=new Pe,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(e===null)return null;const n=this.Ac.decode(e),r=Number(n);isNaN(r)&&this.Pc(`length string (${n}) is not valid number`);const i=await this.vc(r);return new JA(JSON.parse(i),e.length+r)}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(this.buffer.length===0)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const n=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new I(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=N(r),o=Vo(s.wt)+"/documents",a={documents:i.map(h=>Fo(s.wt,h))},u=await s.ao("BatchGetDocuments",o,a,i.length),l=new Map;u.forEach(h=>{const d=kC(s.wt,h);l.set(d.key.toString(),d)});const c=[];return i.forEach(h=>{const d=l.get(h.toString());F(!!d),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ms(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=A.fromPath(r);this.mutations.push(new rp(i,this.precondition(i)))}),await async function(n,r){const i=N(n),s=Vo(i.wt)+"/documents",o={writes:r.map(a=>Bo(i.wt,a))};await i.ro("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw R();n=M.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new I(w.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?le.updateTime(n):le.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(M.min()))throw new I(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return le.updateTime(n)}return le.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new mp(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io(async()=>{const e=new TN(this.datastore),n=this.xc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Nc(i)}))}).catch(r=>{this.Nc(r)})})}xc(e){try{const n=this.updateFunction(e);return!oa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!$1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=o1.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{T("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(T("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ws(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function RE(t,e){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function PE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bp(t);T("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>my(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>my(e.remoteStore,s)),t.onlineComponents=e}async function bp(t){return t.offlineComponents||(T("FirestoreClient","Using default OfflineComponentProvider"),await RE(t,new bE)),t.offlineComponents}async function Wl(t){return t.onlineComponents||(T("FirestoreClient","Using default OnlineComponentProvider"),await PE(t,new Dp)),t.onlineComponents}function OE(t){return bp(t).then(e=>e.persistence)}function $p(t){return bp(t).then(e=>e.localStore)}function LE(t){return Wl(t).then(e=>e.remoteStore)}function Rp(t){return Wl(t).then(e=>e.syncEngine)}async function is(t){const e=await Wl(t),n=e.eventManager;return n.onListen=rN.bind(null,e.syncEngine),n.onUnlisten=iN.bind(null,e.syncEngine),n}function kN(t){return t.asyncQueue.enqueue(async()=>{const e=await OE(t),n=await LE(t);return e.setNetworkEnabled(!0),function(r){const i=N(r);return i.lu.delete(0),fa(i)}(n)})}function CN(t){return t.asyncQueue.enqueue(async()=>{const e=await OE(t),n=await LE(t);return e.setNetworkEnabled(!1),async function(r){const i=N(r);i.lu.add(0),await gs(i),i._u.set("Offline")}(n)})}function AN(t,e){const n=new Pe;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const l=N(a);return l.persistence.runTransaction("read document","readonly",c=>l.localDocuments.getDocument(c,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new I(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=ws(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await $p(t),e,n)),n.promise}function ME(t,e,n={}){const r=new Pe;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const l=new Ql({next:h=>{s.enqueueAndForget(()=>Sp(i,c));const d=h.docs.has(o);!d&&h.fromCache?u.reject(new I(w.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?u.reject(new I(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),c=new Tp(fs(o.path),l,{includeMetadataChanges:!0,Du:!0});return Ep(i,c)}(await is(t),t.asyncQueue,e,n,r)),r.promise}function NN(t,e){const n=new Pe;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await rl(r,i,!0),a=new CE(i,o.ji),u=a.Ku(o.documents),l=a.applyChanges(u,!1);s.resolve(l.snapshot)}catch(o){const a=ws(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await $p(t),e,n)),n.promise}function FE(t,e,n={}){const r=new Pe;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const l=new Ql({next:h=>{s.enqueueAndForget(()=>Sp(i,c)),h.fromCache&&a.source==="server"?u.reject(new I(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),c=new Tp(o,l,{includeMetadataChanges:!0,Du:!0});return Ep(i,c)}(await is(t),t.asyncQueue,e,n,r)),r.promise}function DN(t,e){const n=new Ql(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){N(r).Tu.add(i),i.next()}(await is(t),n)),()=>{n.Tc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){N(r).Tu.delete(i)}(await is(t),n))}}function bN(t,e,n){const r=new Pe;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(s){return Wl(s).then(o=>o.datastore)}(t);new xN(t.asyncQueue,i,n,e,r).run()}),r.promise}function $N(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,l){return new IN(u,l)}(function(u,l){if(u instanceof Uint8Array)return Ey(u,l);if(u instanceof ArrayBuffer)return Ey(new Uint8Array(u),l);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,da(e));t.asyncQueue.enqueueAndForget(async()=>{EN(await Rp(t),i,r)})}function RN(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=N(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(await $p(t),e))}const Sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e,n){if(!n)throw new I(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VE(t,e,n,r){if(e===!0&&r===!0)throw new I(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iy(t){if(!A.isDocumentKey(t))throw new I(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ty(t){if(A.isDocumentKey(t))throw new I(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":R()}function W(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new I(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xl(t);throw new I(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BE(t,e){if(e<=0)throw new I(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new I(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xy({}),this._settingsFrozen=!1,e instanceof mn?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new I(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mn(i.options.projectId)}(e))}get app(){if(!this._app)throw new I(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new I(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xy(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Pk;switch(n.type){case"gapi":const r=n.client;return F(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Fk(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new I(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Sy.get(e);n&&(T("ComponentProvider","Removing Datastore"),Sy.delete(e),n.terminate())}(this),Promise.resolve()}}function PN(t,e,n,r={}){var i;const s=(t=W(t,pa))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Wi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=$e.MOCK_USER;else{o=ZT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new I(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new $e(u)}t._authCredentials=new Ok(new s1(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ie(this.firestore,e,this._key)}}class Ze{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ze(this.firestore,e,this._query)}}class Zt extends Ze{constructor(e,n,r){super(e,n,fs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ie(this.firestore,null,new A(e))}withConverter(e){return new Zt(this.firestore,e,this._path)}}function Op(t,e,...n){if(t=Te(t),Pp("collection","path",e),t instanceof pa){const r=H.fromString(e,...n);return Ty(r),new Zt(t,null,r)}{if(!(t instanceof ie||t instanceof Zt))throw new I(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(H.fromString(e,...n));return Ty(r),new Zt(t.firestore,null,r)}}function ON(t,e){if(t=W(t,pa),Pp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new I(w.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ze(t,null,function(n){return new wn(H.emptyPath(),n)}(e))}function al(t,e,...n){if(t=Te(t),arguments.length===1&&(e=o1.I()),Pp("doc","path",e),t instanceof pa){const r=H.fromString(e,...n);return Iy(r),new ie(t,null,new A(r))}{if(!(t instanceof ie||t instanceof Zt))throw new I(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(H.fromString(e,...n));return Iy(r),new ie(t.firestore,t instanceof Zt?t.converter:null,new A(r))}}function UE(t,e){return t=Te(t),e=Te(e),(t instanceof ie||t instanceof Zt)&&(e instanceof ie||e instanceof Zt)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function zE(t,e){return t=Te(t),e=Te(e),t instanceof Ze&&e instanceof Ze&&t.firestore===e.firestore&&ua(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new mp(this,"async_queue_retry"),this.Kc=()=>{const n=hu();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=hu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=hu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new Pe;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!lr(e))throw e;T("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw we("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=wp.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&R()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function vd(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class MN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=-1;class me extends pa{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new LN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||jE(this),this._firestoreClient.terminate()}}function Fe(t){return t._firestoreClient||jE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jE(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new Xk(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new _N(t._authCredentials,t._appCheckCredentials,t._queue,r)}function VN(t,e){KE(t=W(t,me));const n=Fe(t),r=t._freezeSettings(),i=new Dp;return qE(n,i,new $E(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function BN(t){KE(t=W(t,me));const e=Fe(t),n=t._freezeSettings(),r=new Dp;return qE(e,r,new SN(r,n.cacheSizeBytes))}function qE(t,e,n){const r=new Pe;return t.asyncQueue.enqueue(async()=>{try{await RE(t,n),await PE(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===w.FAILED_PRECONDITION||o.code===w.UNIMPLEMENTED:typeof DOMException!="undefined"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Wi("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function UN(t){if(t._initialized&&!t._terminated)throw new I(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pe;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Ut.V())return Promise.resolve();const r=n+"main";await Ut.delete(r)}(dp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function zN(t){return function(e){const n=new Pe;return e.asyncQueue.enqueueAndForget(async()=>lN(await Rp(e),n)),n.promise}(Fe(t=W(t,me)))}function jN(t){return kN(Fe(t=W(t,me)))}function qN(t){return CN(Fe(t=W(t,me)))}function KN(t,e){const n=Fe(t=W(t,me)),r=new MN;return $N(n,t._databaseId,e,r),r}function GN(t,e){return RN(Fe(t=W(t,me)),e).then(n=>n?new Ze(t,null,n.query):null)}function KE(t){if(t._initialized||t._terminated)throw new I(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new I(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tn(Ce.fromBase64String(e))}catch(n){throw new I(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tn(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new I(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new I(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return B(this._lat,e._lat)||B(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^__.*__$/;class QN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new En(e,this.data,this.fieldMask,n,this.fieldTransforms):new ps(e,this.data,n,this.fieldTransforms)}}class GE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new En(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}class Jl{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Jl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return ul(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(HE(this.Zc)&&HN.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class WN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||da(e)}aa(e,n,r,i=!1){return new Jl({Zc:e,methodName:n,ca:r,path:Ee.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function li(t){const e=t._freezeSettings(),n=da(t._databaseId);return new WN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zl(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);Vp("Data must be an object, but it was:",o,r);const a=XE(r,o);let u,l;if(s.merge)u=new Tt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=wd(e,h,n);if(!o.contains(d))throw new I(w.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);JE(c,d)||c.push(d)}u=new Tt(c),l=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=o.fieldTransforms;return new QN(new Ue(a),u,l)}class ma extends ui{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ma}}function QE(t,e,n){return new Jl({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Lp extends ui{_toFieldTransform(e){return new la(e.path,new Ji)}isEqual(e){return e instanceof Lp}}class XN extends ui{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=QE(this,e,!0),r=this.ha.map(s=>ci(s,n)),i=new Yr(r);return new la(e.path,i)}isEqual(e){return this===e}}class YN extends ui{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=QE(this,e,!0),r=this.ha.map(s=>ci(s,n)),i=new Jr(r);return new la(e.path,i)}isEqual(e){return this===e}}class JN extends ui{constructor(e,n){super(e),this.la=n}_toFieldTransform(e){const n=new Zi(e.wt,_1(e.wt,this.la));return new la(e.path,n)}isEqual(e){return this===e}}function Mp(t,e,n,r){const i=t.aa(1,e,n);Vp("Data must be an object, but it was:",i,r);const s=[],o=Ue.empty();ai(r,(u,l)=>{const c=Bp(e,u,n);l=Te(l);const h=i.ia(c);if(l instanceof ma)s.push(c);else{const d=ci(l,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new Tt(s);return new GE(o,a,i.fieldTransforms)}function Fp(t,e,n,r,i,s){const o=t.aa(1,e,n),a=[wd(e,r,n)],u=[i];if(s.length%2!=0)throw new I(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(wd(e,s[d])),u.push(s[d+1]);const l=[],c=Ue.empty();for(let d=a.length-1;d>=0;--d)if(!JE(l,a[d])){const p=a[d];let y=u[d];y=Te(y);const E=o.ia(p);if(y instanceof ma)l.push(p);else{const k=ci(y,E);k!=null&&(l.push(p),c.set(p,k))}}const h=new Tt(l);return new GE(c,h,o.fieldTransforms)}function WE(t,e,n,r=!1){return ci(n,t.aa(r?4:3,e))}function ci(t,e){if(YE(t=Te(t)))return Vp("Unsupported field value:",e,t),XE(t,e);if(t instanceof ui)return function(n,r){if(!HE(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=ci(o,r.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Te(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _1(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ae.fromDate(n);return{timestampValue:Mo(r.wt,i)}}if(n instanceof ae){const i=new ae(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Mo(r.wt,i)}}if(n instanceof Yl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof tn)return{bytesValue:V1(r.wt,n._byteString)};if(n instanceof ie){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ip(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${Xl(n)}`)}(t,e)}function XE(t,e){const n={};return f1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ai(t,(r,i)=>{const s=ci(i,e.ea(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ae||t instanceof Yl||t instanceof tn||t instanceof ie||t instanceof ui)}function Vp(t,e,n){if(!YE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Xl(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function wd(t,e,n){if((e=Te(e))instanceof tr)return e._internalPath;if(typeof e=="string")return Bp(t,e);throw ul("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZN=new RegExp("[~\\*/\\[\\]]");function Bp(t,e,n){if(e.search(ZN)>=0)throw ul(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tr(...e.split("."))._internalPath}catch{throw ul(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ul(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new I(w.INVALID_ARGUMENT,a+t+u)}function JE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ec("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eD extends zo{data(){return super.data()}}function ec(t,e){return typeof e=="string"?Bp(t,e):e instanceof tr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gn extends zo{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ec("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class oo extends gn{data(e={}){return super.data(e)}}class nr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new br(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oo(this._firestore,this._userDataWriter,r.key,r,new br(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new I(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new oo(r._firestore,r._userDataWriter,o.doc.key,o.doc,new br(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new oo(r._firestore,r._userDataWriter,o.doc.key,o.doc,new br(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:tD(o.type),doc:a,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function ZE(t,e){return t instanceof gn&&e instanceof gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nr&&e instanceof nr&&t._firestore===e._firestore&&zE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new I(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ga{}function xn(t,...e){for(const n of e)t=n._apply(t);return t}class nD extends ga{constructor(e,n,r){super(),this.fa=e,this.da=n,this._a=r,this.type="where"}_apply(e){const n=li(e.firestore),r=function(i,s,o,a,u,l,c){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new I(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){ky(c,l);const p=[];for(const y of c)p.push(_y(a,i,y));h={arrayValue:{values:p}}}else h=_y(a,i,c)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||ky(c,l),h=WE(o,s,c,l==="in"||l==="not-in");const d=ze.create(u,l,h);return function(p,y){if(y.ht()){const k=ep(p);if(k!==null&&!k.isEqual(y.field))throw new I(w.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${k.toString()}' and '${y.field.toString()}'`);const m=Zf(p);m!==null&&sS(p,y.field,m)}const E=function(k,m){for(const f of k.filters)if(m.indexOf(f.op)>=0)return f.op;return null}(p,function(k){switch(k){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(y.op));if(E!==null)throw E===y.op?new I(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${y.op.toString()}' filter.`):new I(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${y.op.toString()}' filters with '${E.toString()}' filters.`)}(i,d),d}(e._query,"where",n,e.firestore._databaseId,this.fa,this.da,this._a);return new Ze(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new wn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function rD(t,e,n){const r=e,i=ec("where",t);return new nD(i,r,n)}class iD extends ga{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new I(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new I(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Fi(i,s);return function(a,u){if(Zf(a)===null){const l=ep(a);l!==null&&sS(a,l,u.field)}}(r,o),o}(e._query,this.fa,this.wa);return new Ze(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new wn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function sD(t,e="asc"){const n=e,r=ec("orderBy",t);return new iD(r,n)}class tS extends ga{constructor(e,n,r){super(),this.type=e,this.ma=n,this.ga=r}_apply(e){return new Ze(e.firestore,e.converter,el(e._query,this.ma,this.ga))}}function oD(t){return BE("limit",t),new tS("limit",t,"F")}function aD(t){return BE("limitToLast",t),new tS("limitToLast",t,"L")}class nS extends ga{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=iS(e,this.type,this.ya,this.pa);return new Ze(e.firestore,e.converter,function(r,i){return new wn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function uD(...t){return new nS("startAt",t,!0)}function lD(...t){return new nS("startAfter",t,!1)}class rS extends ga{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=iS(e,this.type,this.ya,this.pa);return new Ze(e.firestore,e.converter,function(r,i){return new wn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function cD(...t){return new rS("endBefore",t,!1)}function hD(...t){return new rS("endAt",t,!0)}function iS(t,e,n,r){if(n[0]=Te(n[0]),n[0]instanceof zo)return function(i,s,o,a,u){if(!a)throw new I(w.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const c of Yi(i))if(c.field.isKeyField())l.push(Wr(s,a.key));else{const h=a.data.field(c.field);if(Jf(h))throw new I(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new I(w.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}l.push(h)}return new Zn(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=li(t.firestore);return function(s,o,a,u,l,c){const h=s.explicitOrderBy;if(l.length>h.length)throw new I(w.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let p=0;p<l.length;p++){const y=l[p];if(h[p].field.isKeyField()){if(typeof y!="string")throw new I(w.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!tp(s)&&y.indexOf("/")!==-1)throw new I(w.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const E=s.path.child(H.fromString(y));if(!A.isDocumentKey(E))throw new I(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const k=new A(E);d.push(Wr(o,k))}else{const E=WE(a,u,y);d.push(E)}}return new Zn(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _y(t,e,n){if(typeof(n=Te(n))=="string"){if(n==="")throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tp(e)&&n.indexOf("/")!==-1)throw new I(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(H.fromString(n));if(!A.isDocumentKey(r))throw new I(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wr(t,new A(r))}if(n instanceof ie)return Wr(t,n._key);throw new I(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xl(n)}.`)}function ky(t,e){if(!Array.isArray(t)||t.length===0)throw new I(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new I(w.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sS(t,e,n){if(!n.isEqual(e))throw new I(w.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw R()}}convertObject(e,n){const r={};return ai(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Yl(fe(e.latitude),fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=p1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){const n=Yn(e);return new ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=H.fromString(e);F(Q1(r));const i=new mn(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||we(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fD extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ie(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=li(e)}set(e,n,r){this._verifyNotCommitted();const i=Dn(e,this._firestore),s=tc(i.converter,n,r),o=Zl(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,le.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Dn(e,this._firestore);let o;return o=typeof(n=Te(n))=="string"||n instanceof tr?Fp(this._dataReader,"WriteBatch.update",s._key,n,r,i):Mp(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,le.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Dn(e,this._firestore);return this._mutations=this._mutations.concat(new ms(n._key,le.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new I(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dn(t,e){if((t=Te(t)).firestore!==e)throw new I(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){t=W(t,ie);const e=W(t.firestore,me);return ME(Fe(e),t._key).then(n=>zp(e,t,n))}class hi extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ie(this.firestore,null,n)}}function gD(t){t=W(t,ie);const e=W(t.firestore,me),n=Fe(e),r=new hi(e);return AN(n,t._key).then(i=>new gn(e,r,t._key,i,new br(i!==null&&i.hasLocalMutations,!0),t.converter))}function yD(t){t=W(t,ie);const e=W(t.firestore,me);return ME(Fe(e),t._key,{source:"server"}).then(n=>zp(e,t,n))}function vD(t){t=W(t,Ze);const e=W(t.firestore,me),n=Fe(e),r=new hi(e);return eS(t._query),FE(n,t._query).then(i=>new nr(e,r,t,i))}function wD(t){t=W(t,Ze);const e=W(t.firestore,me),n=Fe(e),r=new hi(e);return NN(n,t._query).then(i=>new nr(e,r,t,i))}function ED(t){t=W(t,Ze);const e=W(t.firestore,me),n=Fe(e),r=new hi(e);return FE(n,t._query,{source:"server"}).then(i=>new nr(e,r,t,i))}function Cy(t,e,n){t=W(t,ie);const r=W(t.firestore,me),i=tc(t.converter,e,n);return ya(r,[Zl(li(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,le.none())])}function Ay(t,e,n,...r){t=W(t,ie);const i=W(t.firestore,me),s=li(i);let o;return o=typeof(e=Te(e))=="string"||e instanceof tr?Fp(s,"updateDoc",t._key,e,n,r):Mp(s,"updateDoc",t._key,e),ya(i,[o.toMutation(t._key,le.exists(!0))])}function SD(t){return ya(W(t.firestore,me),[new ms(t._key,le.none())])}function oS(t,e){const n=W(t.firestore,me),r=al(t),i=tc(t.converter,e);return ya(n,[Zl(li(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,le.exists(!1))]).then(()=>r)}function aS(t,...e){var n,r,i;t=Te(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||vd(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(vd(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,l,c;if(t instanceof ie)l=W(t.firestore,me),c=fs(t._key.path),u={next:h=>{e[o]&&e[o](zp(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=W(t,Ze);l=W(h.firestore,me),c=h._query;const d=new hi(l);u={next:p=>{e[o]&&e[o](new nr(l,d,h,p))},error:e[o+1],complete:e[o+2]},eS(t._query)}return function(h,d,p,y){const E=new Ql(y),k=new Tp(d,E,p);return h.asyncQueue.enqueueAndForget(async()=>Ep(await is(h),k)),()=>{E.Tc(),h.asyncQueue.enqueueAndForget(async()=>Sp(await is(h),k))}}(Fe(l),c,a,u)}function ID(t,e){return DN(Fe(t=W(t,me)),vd(e)?e:{next:e})}function ya(t,e){return function(n,r){const i=new Pe;return n.asyncQueue.enqueueAndForget(async()=>sN(await Rp(n),r,i)),i.promise}(Fe(t),e)}function zp(t,e,n){const r=n.docs.get(e._key),i=new hi(t);return new gn(t,i,e._key,r,new br(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=li(e)}get(e){const n=Dn(e,this._firestore),r=new fD(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return R();const s=i[0];if(s.isFoundDocument())return new zo(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new zo(this._firestore,r,n._key,null,n.converter);throw R()})}set(e,n,r){const i=Dn(e,this._firestore),s=tc(i.converter,n,r),o=Zl(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Dn(e,this._firestore);let o;return o=typeof(n=Te(n))=="string"||n instanceof tr?Fp(this._dataReader,"Transaction.update",s._key,n,r,i):Mp(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Dn(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Dn(e,this._firestore),r=new hi(this._firestore);return super.get(e).then(i=>new gn(this._firestore,r,n._key,i._document,new br(!1,!1),n.converter))}}function xD(t,e,n){t=W(t,me);const r=Object.assign(Object.assign({},dD),n);return function(i){if(i.maxAttempts<1)throw new I(w.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),bN(Fe(t),i=>e(new TD(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){return new ma("deleteField")}function kD(){return new Lp("serverTimestamp")}function CD(...t){return new XN("arrayUnion",t)}function AD(...t){return new YN("arrayRemove",t)}function ND(t){return new JN("increment",t)}(function(t,e=!0){(function(n){ds=n})(xf),Hi(new zr("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new me(i,new Lk(n.getProvider("auth-internal")),new Bk(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),qn(_g,"3.4.14",t),qn(_g,"3.4.14","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this._delegate=e,this.firebase=n,Uu(e,new zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),e0(this._delegate)))}_getService(e,n=qr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=qr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Uu(this._delegate,e)}_addOrOverwriteComponent(e){Yw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},Ny=new kl("app-compat","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:qn,setLogLevel:n0,onLog:t0,apps:null,SDK_VERSION:xf,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:__}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function i(l){if(l=l||qr,!tg(e,l))throw Ny.create("no-app",{appName:l});return e[l]}i.App=t;function s(l,c={}){const h=Zw(l,c);if(tg(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const c=l.name,h=c.replace("-compat","");if(Hi(l)&&l.type==="PUBLIC"){const d=(p=i())=>{if(typeof p[h]!="function")throw Ny.create("invalid-app-argument",{appName:c});return p[h]()};l.serviceProps!==void 0&&Bu(d,l.serviceProps),n[h]=d,t.prototype[h]=function(...p){return this._getService.bind(this,c).apply(this,l.multipleInstances?p:[])}}return l.type==="PUBLIC"?n[h]:null}function u(l,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){const t=$D(DD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:uS,extendNamespace:e,createSubscribe:fx,ErrorFactory:kl,deepExtend:Bu});function e(n){Bu(t,n)}return t}const RD=uS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=new If("@firebase/app-compat"),PD="@firebase/app-compat",OD="0.1.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){qn(PD,OD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(nx()&&self.firebase!==void 0){Dy.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Dy.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const nc=RD;LD();var MD="firebase",FD="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nc.registerVersion(MD,FD,"app-compat");const VD="@firebase/firestore-compat",BD="0.1.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new I("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(){if(typeof Uint8Array=="undefined")throw new I("unimplemented","Uint8Arrays are not available in this environment.")}function $y(){if(!Qk())throw new I("unimplemented","Blobs are unavailable in Firestore in this environment.")}class jo{constructor(e){this._delegate=e}static fromBase64String(e){return $y(),new jo(tn.fromBase64String(e))}static fromUint8Array(e){return by(),new jo(tn.fromUint8Array(e))}toBase64(){return $y(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){return UD(t,["next","error","complete"])}function UD(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{enableIndexedDbPersistence(e,n){return VN(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return BN(e._delegate)}clearIndexedDbPersistence(e){return UN(e._delegate)}}class lS{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mn||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){PN(this._delegate,e,n,r)}enableNetwork(){return jN(this._delegate)}disableNetwork(){return qN(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return zN(this._delegate)}onSnapshotsInSync(e){return ID(this._delegate,e)}get app(){if(!this._appCompat)throw new I("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ss(this,Op(this._delegate,e))}catch(n){throw nt(n,"collection()","Firestore.collection()")}}doc(e){try{return new $t(this,al(this._delegate,e))}catch(n){throw nt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tt(this,ON(this._delegate,e))}catch(n){throw nt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xD(this._delegate,n=>e(new cS(this,n)))}batch(){return Fe(this._delegate),new hS(new pD(this._delegate,e=>ya(this._delegate,e)))}loadBundle(e){return KN(this._delegate,e)}namedQuery(e){return GN(this._delegate,e).then(n=>n?new tt(this,n):null)}}class rc extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(new tn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return $t.forKey(n,this.firestore,null)}}function jD(t){$k(t)}class cS{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new rc(e)}get(e){const n=$r(e);return this._delegate.get(n).then(r=>new qo(this._firestore,new gn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=$r(e);return r?(jp("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$r(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$r(e);return this._delegate.delete(n),this}}class hS{constructor(e){this._delegate=e}set(e,n,r){const i=$r(e);return r?(jp("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$r(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$r(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ni{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new oo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ko(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ni.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ni(e,new rc(e),n),i.set(n,s)),s}}ni.INSTANCES=new WeakMap;class $t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new rc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new I("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $t(n,new ie(n._delegate,r,new A(e)))}static forKey(e,n,r){return new $t(n,new ie(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ss(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ss(this.firestore,Op(this._delegate,e))}catch(n){throw nt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Te(e),e instanceof ie?UE(this._delegate,e):!1}set(e,n){n=jp("DocumentReference.set",n);try{return n?Cy(this._delegate,e,n):Cy(this._delegate,e)}catch(r){throw nt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Ay(this._delegate,e):Ay(this._delegate,e,n,...r)}catch(i){throw nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return SD(this._delegate)}onSnapshot(...e){const n=dS(e),r=fS(e,i=>new qo(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aS(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=gD(this._delegate):(e==null?void 0:e.source)==="server"?n=yD(this._delegate):n=mD(this._delegate),n.then(r=>new qo(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $t(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nt(t,e,n){return t.message=t.message.replace(e,n),t}function dS(t){for(const e of t)if(typeof e=="object"&&!Ed(e))return e;return{}}function fS(t,e){var n,r;let i;return Ed(t[0])?i=t[0]:Ed(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class qo{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new $t(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ZE(this._delegate,e._delegate)}}class Ko extends qo{data(e){const n=this._delegate.data(e);return Rk(n!==void 0),n}}class tt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new rc(e)}where(e,n,r){try{return new tt(this.firestore,xn(this._delegate,rD(e,n,r)))}catch(i){throw nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new tt(this.firestore,xn(this._delegate,sD(e,n)))}catch(r){throw nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tt(this.firestore,xn(this._delegate,oD(e)))}catch(n){throw nt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new tt(this.firestore,xn(this._delegate,aD(e)))}catch(n){throw nt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new tt(this.firestore,xn(this._delegate,uD(...e)))}catch(n){throw nt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new tt(this.firestore,xn(this._delegate,lD(...e)))}catch(n){throw nt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new tt(this.firestore,xn(this._delegate,cD(...e)))}catch(n){throw nt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new tt(this.firestore,xn(this._delegate,hD(...e)))}catch(n){throw nt(n,"endAt()","Query.endAt()")}}isEqual(e){return zE(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=wD(this._delegate):(e==null?void 0:e.source)==="server"?n=ED(this._delegate):n=vD(this._delegate),n.then(r=>new Sd(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=dS(e),r=fS(e,i=>new Sd(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aS(this._delegate,n,r)}withConverter(e){return new tt(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class qD{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ko(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Sd{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new tt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ko(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new qD(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ko(this._firestore,r))})}isEqual(e){return ZE(this._delegate,e._delegate)}}class ss extends tt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $t(this.firestore,e):null}doc(e){try{return e===void 0?new $t(this.firestore,al(this._delegate)):new $t(this.firestore,al(this._delegate,e))}catch(n){throw nt(n,"doc()","CollectionReference.doc()")}}add(e){return oS(this._delegate,e).then(n=>new $t(this.firestore,n))}isEqual(e){return UE(this._delegate,e._delegate)}withConverter(e){return new ss(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $r(t){return W(t,ie)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(...e){this._delegate=new tr(...e)}static documentId(){return new qp(Ee.keyField().canonicalString())}isEqual(e){return e=Te(e),e instanceof tr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._delegate=e}static serverTimestamp(){const e=kD();return e._methodName="FieldValue.serverTimestamp",new _r(e)}static delete(){const e=_D();return e._methodName="FieldValue.delete",new _r(e)}static arrayUnion(...e){const n=CD(...e);return n._methodName="FieldValue.arrayUnion",new _r(n)}static arrayRemove(...e){const n=AD(...e);return n._methodName="FieldValue.arrayRemove",new _r(n)}static increment(e){const n=ND(e);return n._methodName="FieldValue.increment",new _r(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={Firestore:lS,GeoPoint:Yl,Timestamp:ae,Blob:jo,Transaction:cS,WriteBatch:hS,DocumentReference:$t,DocumentSnapshot:qo,Query:tt,QueryDocumentSnapshot:Ko,QuerySnapshot:Sd,CollectionReference:ss,FieldPath:qp,FieldValue:_r,setLogLevel:jD,CACHE_SIZE_UNLIMITED:FN};function GD(t,e){t.INTERNAL.registerComponent(new zr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KD)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){GD(t,(e,n)=>new lS(e,n,new zD)),t.registerVersion(VD,BD)}HD(nc);const QD={apiKey:{}.REACT_APP_API_KEY_TWO,authDomain:"weddingpage-62db4.firebaseapp.com",projectId:"weddingpage-62db4",storageBucket:"weddingpage-62db4.appspot.com",messagingSenderId:{}.REACT_APP_API_KEY_MESS,appId:{}.REACT_APP_API_KEY};nc.initializeApp(QD);const WD=nc.firestore();let XD={data:""},YD=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||XD,JD=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ZD=/\/\*[^]*?\*\/|  +/g,Ry=/\n+/g,bn=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?bn(o,s):s+"{"+bn(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=bn(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=bn.p?bn.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},nn={},pS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+pS(t[n]);return e}return t},eb=(t,e,n,r,i)=>{let s=pS(t),o=nn[s]||(nn[s]=(u=>{let l=0,c=11;for(;l<u.length;)c=101*c+u.charCodeAt(l++)>>>0;return"go"+c})(s));if(!nn[o]){let u=s!==t?t:(l=>{let c,h,d=[{}];for(;c=JD.exec(l.replace(ZD,""));)c[4]?d.shift():c[3]?(h=c[3].replace(Ry," ").trim(),d.unshift(d[0][h]=d[0][h]||{})):d[0][c[1]]=c[2].replace(Ry," ").trim();return d[0]})(t);nn[o]=bn(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&nn.g?nn.g:null;return n&&(nn.g=nn[o]),((u,l,c,h)=>{h?l.data=l.data.replace(h,u):l.data.indexOf(u)===-1&&(l.data=c?u+l.data:l.data+u)})(nn[o],e,r,a),o},tb=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":bn(a,""):a===!1?"":a}return r+i+(o==null?"":o)},"");function ic(t){let e=this||{},n=t.call?t(e.p):t;return eb(n.unshift?n.raw?tb(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,YD(e.target),e.g,e.o,e.k)}let mS,Id,Td;ic.bind({g:1});let yn=ic.bind({k:1});function nb(t,e,n,r){bn.p=e,mS=t,Id=n,Td=r}function dr(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:Id&&Id()},a),n.o=/ *go\d+/.test(u),a.className=ic.apply(n,r)+(u?" "+u:""),e&&(a.ref=o);let l=t;return t[0]&&(l=a.as||t,delete a.as),Td&&l[0]&&Td(a),mS(l,a)}return e?e(i):i}}var rb=t=>typeof t=="function",ll=(t,e)=>rb(t)?t(e):t,ib=(()=>{let t=0;return()=>(++t).toString()})(),sb=t=>e=>{e&&setTimeout(()=>{let n=e.getBoundingClientRect();t(n)})},gS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),ob=20,du=new Map,Py=t=>{if(du.has(t))return;let e=setTimeout(()=>{du.delete(t),Or({type:4,toastId:t})},1e3);du.set(t,e)},ab=t=>{let e=du.get(t);e&&clearTimeout(e)},xd=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,ob)};case 1:return e.toast.id&&ab(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?xd(t,{type:1,toast:n}):xd(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?Py(r):t.toasts.forEach(s=>{Py(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},fu=[],pu={toasts:[],pausedAt:void 0},Or=t=>{pu=xd(pu,t),fu.forEach(e=>{e(pu)})},ub={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},lb=(t={})=>{let[e,n]=Y.exports.useState(pu);Y.exports.useEffect(()=>(fu.push(n),()=>{let i=fu.indexOf(n);i>-1&&fu.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...t,...t[i.type],...i,duration:i.duration||((s=t[i.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||ub[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},cb=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ib()}),va=t=>(e,n)=>{let r=cb(e,t,n);return Or({type:2,toast:r}),r.id},St=(t,e)=>va("blank")(t,e);St.error=va("error");St.success=va("success");St.loading=va("loading");St.custom=va("custom");St.dismiss=t=>{Or({type:3,toastId:t})};St.remove=t=>Or({type:4,toastId:t});St.promise=(t,e,n)=>{let r=St.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(St.success(ll(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{St.error(ll(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var hb=t=>{let{toasts:e,pausedAt:n}=lb(t);Y.exports.useEffect(()=>{if(n)return;let i=Date.now(),s=e.map(o=>{if(o.duration===1/0)return;let a=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(a<0){o.visible&&St.dismiss(o.id);return}return setTimeout(()=>St.dismiss(o.id),a)});return()=>{s.forEach(o=>o&&clearTimeout(o))}},[e,n]);let r=Y.exports.useMemo(()=>({startPause:()=>{Or({type:5,time:Date.now()})},endPause:()=>{n&&Or({type:6,time:Date.now()})},updateHeight:(i,s)=>Or({type:1,toast:{id:i,height:s}}),calculateOffset:(i,s)=>{let{reverseOrder:o=!1,gutter:a=8,defaultPosition:u}=s||{},l=e.filter(d=>(d.position||u)===(i.position||u)&&d.height),c=l.findIndex(d=>d.id===i.id),h=l.filter((d,p)=>p<c&&d.visible).length;return l.filter(d=>d.visible).slice(...o?[h+1]:[0,h]).reduce((d,p)=>d+(p.height||0)+a,0)}}),[e,n]);return{toasts:e,handlers:r}},db=yn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fb=yn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pb=yn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,mb=dr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${db} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${pb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gb=yn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yb=dr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${gb} 1s linear infinite;
`,vb=yn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,wb=yn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Eb=dr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${wb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Sb=dr("div")`
  position: absolute;
`,Ib=dr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Tb=yn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xb=dr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Tb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_b=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?Y.exports.createElement(xb,null,e):e:n==="blank"?null:Y.exports.createElement(Ib,null,Y.exports.createElement(yb,{...r}),n!=="loading"&&Y.exports.createElement(Sb,null,n==="error"?Y.exports.createElement(mb,{...r}):Y.exports.createElement(Eb,{...r})))},kb=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Cb=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ab="0%{opacity:0;} 100%{opacity:1;}",Nb="0%{opacity:1;} 100%{opacity:0;}",Db=dr("div",Y.exports.forwardRef)`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,bb=dr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$b=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=gS()?[Ab,Nb]:[kb(n),Cb(n)];return{animation:e?`${yn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${yn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rb=Y.exports.memo(({toast:t,position:e,style:n,children:r})=>{let i=t!=null&&t.height?$b(t.position||e||"top-center",t.visible):{opacity:0},s=Y.exports.createElement(_b,{toast:t}),o=Y.exports.createElement(bb,{...t.ariaProps},ll(t.message,t));return Y.exports.createElement(Db,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):Y.exports.createElement(Y.exports.Fragment,null,s,o))});nb(Y.exports.createElement);var Pb=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:gS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},Ob=ic`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ha=16,Lb=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:u}=hb(n);return Y.exports.createElement("div",{style:{position:"fixed",zIndex:9999,top:Ha,left:Ha,right:Ha,bottom:Ha,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},a.map(l=>{let c=l.position||e,h=u.calculateOffset(l,{reverseOrder:t,gutter:r,defaultPosition:e}),d=Pb(c,h),p=l.height?void 0:sb(y=>{u.updateHeight(l.id,y.height)});return Y.exports.createElement("div",{ref:p,className:l.visible?Ob:"",key:l.id,style:d},l.type==="custom"?ll(l.message,l):i?i(l):Y.exports.createElement(Rb,{toast:l,position:c}))}))},Mb=St;const Fb=()=>{const[t,e]=Y.exports.useState({name:"",email:"",numberGuests:"",guesstOne:"",guesstTwo:"",dedication:""}),n=s=>{e({...t,[s.target.name]:s.target.value})};console.log(t);const r=Y.exports.useRef();return L("section",{className:"form-container",id:"form",children:Ne("div",{className:"card-form-container",children:[L("h1",{className:"form-header",children:"Confirma tu asistencia"}),L("span",{className:"error-text",children:"Evento sin ni\xF1os.*"}),Ne("form",{ref:r,onSubmit:async s=>{s.preventDefault(),Mb.success("Haz confirmado ir a la boda de Mariana y Carlos! \u{1F408}\u200D\u2B1B \u{1F408}",{duration:5e3,position:"top-center"}),await oS(Op(WD,"invitations"),{formData:t}),r.current.reset(),e({...t,numberGuests:""})},action:"",className:"form-container-inputs",children:[L("input",{className:"form-input",type:"text",name:"name",placeholder:"Nombre Completo",required:!0,onChange:n}),L("input",{className:"form-input",type:"email",name:"email",placeholder:"Email",required:!0,onChange:n}),Ne("select",{value:t.numberGuests,className:"form-input",placeholder:"Invitados",id:"select",name:"numberGuests",onChange:n,children:[L("option",{value:"0",children:"Invitados Confirmados"}),GT.map(s=>L("option",{value:s.value,children:s.label},s.id))]}),L("input",{className:"form-input",type:"text",placeholder:"Nombre Invitado",name:"guesstOne",onChange:n,disabled:!(t.numberGuests==="2"||t.numberGuests==="3"),required:t.numberGuests==="2"||t.numberGuests==="3"}),L("input",{className:"form-input",type:"text",name:"guesstTwo",onChange:n,placeholder:"Nombre Invitado",disabled:t.numberGuests!=="3",required:t.numberGuests==="3"}),L("textarea",{className:"form-input",id:"text-area",name:"dedication",placeholder:"Dedica un mensaje",onChange:n}),L("button",{type:"submit",className:"confirm-button",children:"Confirmar"})]})]})})};var Vb="/wedding-page/assets/icon-arrow-light.c1e7ee8d.svg";const Bb=()=>Ne("section",{className:"header-container",children:[Ne("div",{className:"header-label-container",children:[L("h1",{className:"header-title",children:"Mariana & Carlos"}),L("h3",{className:"header-subtitle",children:"Diciembre 03,2022 - Reserva la Cofradia."}),L("a",{href:"#middle",children:L("img",{src:Vb,alt:"arrow",className:"header-mobile-arrow"})})]}),L("img",{src:"https://i.ibb.co/NTnTtcr/paris3.jpg",alt:"weeding",className:"header-img"})]}),Ub=()=>{const[t,e]=Y.exports.useState(0),[n,r]=Y.exports.useState(0),[i,s]=Y.exports.useState(0),[o,a]=Y.exports.useState(0),[u,l]=Y.exports.useState(0),c=()=>{const h=new Date,p=new Date("Dec 03 2022 00:00:00").getTime()-h,y=1e3,E=y*60,k=E*60,m=k*24;e(Math.floor(p/m)),r(Math.floor(p%m/k)),s(Math.floor(p%k/E)),a(Math.floor(p%E/y))};return Y.exports.useEffect(()=>{const h=setInterval(()=>{l(u+1),c()},1e3);return()=>clearInterval(h)},[u]),{daysState:t,hoursState:n,minutesState:i,secondsState:o,counter:u}};const zb=()=>{const{secondsState:t,daysState:e,hoursState:n,minutesState:r}=Ub();return Ne("section",{className:"middle-container",id:"middle",children:[Ne("div",{className:"middle-top-container",children:[L("img",{src:"https://i.ibb.co/ZYMCBGP/1-D75-B396-1178-460-A-AFBD-94-EA2120-C206.jpg",alt:"mariana",className:"middle-top-profile-img"}),Ne("div",{className:"middle-top-middle-container",children:[L("h1",{className:"middle-top-middle-header",children:"Save The Date"}),L("h1",{className:"middle-top-middle-description",children:"Nos conocimos en una era dif\xEDcil. pero eso no impidi\xF3 que el amor fuera creciendo,los dos ten\xEDamos sentimientos encontrados el uno por el otro y as\xED sin m\xE1s hemos llegado hasta aqu\xED. \u{1F499}"})]}),L("img",{src:"https://i.ibb.co/KKkMzwh/680-D6456-5746-43-F7-ACFF-85-ADA027-B949.jpg",alt:"carlos",className:"middle-top-profile-img"})]}),Ne("div",{className:"middle-middle-container",children:[L("h1",{className:"middle-middle-header",children:"Fiesta"}),L("span",{className:"middle-middle-location",children:"Reserva La Cofrad\xEDa"}),L("span",{className:"middle-middle-address",children:"Carretera Comala San Antonio - Colima M\xE9xico s/n Kilometro 11.5 Cofrad\xEDa de Suchitl\xE1n,"}),Ne("div",{className:"middle-middle-bottom-container",children:[L("span",{className:"middle-middle-bottom-text",children:"5:00 pm"}),L("a",{href:"https://www.google.com/maps/place/Reserva+La+Cofrad%C3%ADa/@19.4158337,-103.6972265,17z/data=!3m1!4b1!4m8!3m7!1s0x84255aaff2138e89:0x89ff01ee93bf727a!5m2!4m1!1i2!8m2!3d19.4158287!4d-103.6950378",target:"_blank",className:"middle-link",children:L("span",{className:"middle-middle-bottom-link",children:"Llevame"})})]}),Ne("div",{className:"middle-count-container",children:[L("span",{className:"middle-count-header",children:"Faltan"}),Ne("div",{className:"count-label-container",children:[L("span",{className:"middle-count-text",children:e}),L("span",{className:"middle-count-subtext",children:"D\xEDas"})]}),Ne("div",{className:"count-label-container",children:[L("span",{className:"middle-count-text",children:n}),L("span",{className:"middle-count-subtext",children:"Horas"})]}),Ne("div",{className:"count-label-container",children:[L("span",{className:"middle-count-text",children:r}),L("span",{className:"middle-count-subtext",children:"Minutos"})]}),Ne("div",{className:"count-label-container",children:[L("span",{className:"middle-count-text",children:t}),L("span",{className:"middle-count-subtext",children:"Segundos"})]})]})]})]})};function jb(){return Ne("main",{children:[L(Lb,{}),L(Bb,{}),L(zb,{}),L(Fb,{}),L(HT,{})]})}Jc.createRoot(document.getElementById("root")).render(L(jb,{}));
